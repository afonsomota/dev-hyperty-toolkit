{
  "HypertyConnector": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoKICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICoKICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogKiAgdHJlZS4KICovCgovKiBNb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZXNlIG9wdGlvbnMgYXQganNoaW50LmNvbS9kb2NzL29wdGlvbnMgKi8KLyoganNoaW50IGJyb3dzZXI6IHRydWUsIGNhbWVsY2FzZTogdHJ1ZSwgY3VybHk6IHRydWUsIGRldmVsOiB0cnVlLAogICBlcWVxZXE6IHRydWUsIGZvcmluOiBmYWxzZSwgZ2xvYmFsc3RyaWN0OiB0cnVlLCBub2RlOiB0cnVlLAogICBxdW90bWFyazogc2luZ2xlLCB1bmRlZjogdHJ1ZSwgdW51c2VkOiBzdHJpY3QgKi8KLyogZ2xvYmFsIG1velJUQ0ljZUNhbmRpZGF0ZSwgbW96UlRDUGVlckNvbm5lY3Rpb24sIFByb21pc2UsCm1velJUQ1Nlc3Npb25EZXNjcmlwdGlvbiwgd2Via2l0UlRDUGVlckNvbm5lY3Rpb24sIE1lZGlhU3RyZWFtVHJhY2ssCk1lZGlhU3RyZWFtLCBSVENJY2VHYXRoZXJlciwgUlRDSWNlVHJhbnNwb3J0LCBSVENEdGxzVHJhbnNwb3J0LApSVENSdHBTZW5kZXIsIFJUQ1J0cFJlY2VpdmVyKi8KLyogZXhwb3J0ZWQgdHJhY2UscmVxdWVzdFVzZXJNZWRpYSAqLwoKJ3VzZSBzdHJpY3QnOwoKdmFyIGdldFVzZXJNZWRpYSA9IG51bGw7CnZhciBhdHRhY2hNZWRpYVN0cmVhbSA9IG51bGw7CnZhciByZWF0dGFjaE1lZGlhU3RyZWFtID0gbnVsbDsKdmFyIHdlYnJ0Y0RldGVjdGVkQnJvd3NlciA9IG51bGw7CnZhciB3ZWJydGNEZXRlY3RlZFZlcnNpb24gPSBudWxsOwp2YXIgd2VicnRjTWluaW11bVZlcnNpb24gPSBudWxsOwp2YXIgd2VicnRjVXRpbHMgPSB7CiAgbG9nOiBmdW5jdGlvbigpIHsKICAgIC8vIHN1cHByZXNzIGNvbnNvbGUubG9nIG91dHB1dCB3aGVuIGJlaW5nIGluY2x1ZGVkIGFzIGEgbW9kdWxlLgogICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnIHx8CiAgICAgICAgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpOwogIH0sCiAgZXh0cmFjdFZlcnNpb246IGZ1bmN0aW9uKHVhc3RyaW5nLCBleHByLCBwb3MpIHsKICAgIHZhciBtYXRjaCA9IHVhc3RyaW5nLm1hdGNoKGV4cHIpOwogICAgcmV0dXJuIG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+PSBwb3MgJiYgcGFyc2VJbnQobWF0Y2hbcG9zXSwgMTApOwogIH0KfTsKCmZ1bmN0aW9uIHRyYWNlKHRleHQpIHsKICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgZm9yIGxvZ2dpbmcuCiAgaWYgKHRleHRbdGV4dC5sZW5ndGggLSAxXSA9PT0gJ1xuJykgewogICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDAsIHRleHQubGVuZ3RoIC0gMSk7CiAgfQogIGlmICh3aW5kb3cucGVyZm9ybWFuY2UpIHsKICAgIHZhciBub3cgPSAod2luZG93LnBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMCkudG9GaXhlZCgzKTsKICAgIHdlYnJ0Y1V0aWxzLmxvZyhub3cgKyAnOiAnICsgdGV4dCk7CiAgfSBlbHNlIHsKICAgIHdlYnJ0Y1V0aWxzLmxvZyh0ZXh0KTsKICB9Cn0KCmlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgewogIGlmICh3aW5kb3cuSFRNTE1lZGlhRWxlbWVudCAmJgogICAgISgnc3JjT2JqZWN0JyBpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUpKSB7CiAgICAvLyBTaGltIHRoZSBzcmNPYmplY3QgcHJvcGVydHksIG9uY2UsIHdoZW4gSFRNTE1lZGlhRWxlbWVudCBpcyBmb3VuZC4KICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsICdzcmNPYmplY3QnLCB7CiAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgLy8gSWYgcHJlZml4ZWQgc3JjT2JqZWN0IHByb3BlcnR5IGV4aXN0cywgcmV0dXJuIGl0LgogICAgICAgIC8vIE90aGVyd2lzZSB1c2UgdGhlIHNoaW1tZWQgcHJvcGVydHksIF9zcmNPYmplY3QKICAgICAgICByZXR1cm4gJ21velNyY09iamVjdCcgaW4gdGhpcyA/IHRoaXMubW96U3JjT2JqZWN0IDogdGhpcy5fc3JjT2JqZWN0OwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICAgIGlmICgnbW96U3JjT2JqZWN0JyBpbiB0aGlzKSB7CiAgICAgICAgICB0aGlzLm1velNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gVXNlIF9zcmNPYmplY3QgYXMgYSBwcml2YXRlIHByb3BlcnR5IGZvciB0aGlzIHNoaW0KICAgICAgICAgIHRoaXMuX3NyY09iamVjdCA9IHN0cmVhbTsKICAgICAgICAgIC8vIFRPRE86IHJldm9rZU9iamVjdFVybCh0aGlzLnNyYykgd2hlbiAhc3RyZWFtIHRvIHJlbGVhc2UgcmVzb3VyY2VzPwogICAgICAgICAgdGhpcy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9CiAgLy8gUHJveHkgZXhpc3RpbmcgZ2xvYmFscwogIGdldFVzZXJNZWRpYSA9IHdpbmRvdy5uYXZpZ2F0b3IgJiYgd2luZG93Lm5hdmlnYXRvci5nZXRVc2VyTWVkaWE7Cn0KCi8vIEF0dGFjaCBhIG1lZGlhIHN0cmVhbSB0byBhbiBlbGVtZW50LgphdHRhY2hNZWRpYVN0cmVhbSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHN0cmVhbSkgewogIGVsZW1lbnQuc3JjT2JqZWN0ID0gc3RyZWFtOwp9OwoKcmVhdHRhY2hNZWRpYVN0cmVhbSA9IGZ1bmN0aW9uKHRvLCBmcm9tKSB7CiAgdG8uc3JjT2JqZWN0ID0gZnJvbS5zcmNPYmplY3Q7Cn07CgppZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXdpbmRvdy5uYXZpZ2F0b3IpIHsKICB3ZWJydGNVdGlscy5sb2coJ1RoaXMgZG9lcyBub3QgYXBwZWFyIHRvIGJlIGEgYnJvd3NlcicpOwogIHdlYnJ0Y0RldGVjdGVkQnJvd3NlciA9ICdub3QgYSBicm93c2VyJzsKfSBlbHNlIGlmIChuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7CiAgd2VicnRjVXRpbHMubG9nKCdUaGlzIGFwcGVhcnMgdG8gYmUgRmlyZWZveCcpOwoKICB3ZWJydGNEZXRlY3RlZEJyb3dzZXIgPSAnZmlyZWZveCc7CgogIC8vIHRoZSBkZXRlY3RlZCBmaXJlZm94IHZlcnNpb24uCiAgd2VicnRjRGV0ZWN0ZWRWZXJzaW9uID0gd2VicnRjVXRpbHMuZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgL0ZpcmVmb3hcLyhbMC05XSspXC4vLCAxKTsKCiAgLy8gdGhlIG1pbmltdW0gZmlyZWZveCB2ZXJzaW9uIHN0aWxsIHN1cHBvcnRlZCBieSBhZGFwdGVyLgogIHdlYnJ0Y01pbmltdW1WZXJzaW9uID0gMzE7CgogIC8vIFNoaW0gZm9yIFJUQ1BlZXJDb25uZWN0aW9uIG9uIG9sZGVyIHZlcnNpb25zLgogIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7CiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgICBpZiAod2VicnRjRGV0ZWN0ZWRWZXJzaW9uIDwgMzgpIHsKICAgICAgICAvLyAudXJscyBpcyBub3Qgc3VwcG9ydGVkIGluIEZGIDwgMzguCiAgICAgICAgLy8gY3JlYXRlIFJUQ0ljZVNlcnZlcnMgd2l0aCBhIHNpbmdsZSB1cmwuCiAgICAgICAgaWYgKHBjQ29uZmlnICYmIHBjQ29uZmlnLmljZVNlcnZlcnMpIHsKICAgICAgICAgIHZhciBuZXdJY2VTZXJ2ZXJzID0gW107CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBjQ29uZmlnLmljZVNlcnZlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHNlcnZlciA9IHBjQ29uZmlnLmljZVNlcnZlcnNbaV07CiAgICAgICAgICAgIGlmIChzZXJ2ZXIuaGFzT3duUHJvcGVydHkoJ3VybHMnKSkgewogICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2VydmVyLnVybHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgIHZhciBuZXdTZXJ2ZXIgPSB7CiAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyLnVybHNbal0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZiAoc2VydmVyLnVybHNbal0uaW5kZXhPZigndHVybicpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIG5ld1NlcnZlci51c2VybmFtZSA9IHNlcnZlci51c2VybmFtZTsKICAgICAgICAgICAgICAgICAgbmV3U2VydmVyLmNyZWRlbnRpYWwgPSBzZXJ2ZXIuY3JlZGVudGlhbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG5ld0ljZVNlcnZlcnMucHVzaChuZXdTZXJ2ZXIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2gocGNDb25maWcuaWNlU2VydmVyc1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHBjQ29uZmlnLmljZVNlcnZlcnMgPSBuZXdJY2VTZXJ2ZXJzOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbmV3IG1velJUQ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTsgLy8ganNjczppZ25vcmUgcmVxdWlyZUNhcGl0YWxpemVkQ29uc3RydWN0b3JzCiAgICB9OwogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSA9IG1velJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTsKCiAgICAvLyB3cmFwIHN0YXRpYyBtZXRob2RzLiBDdXJyZW50bHkganVzdCBnZW5lcmF0ZUNlcnRpZmljYXRlLgogICAgaWYgKG1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGUpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiwgJ2dlbmVyYXRlQ2VydGlmaWNhdGUnLCB7CiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiBtb3pSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlLmFwcGx5KG51bGwsCiAgICAgICAgICAgICAgICBhcmd1bWVudHMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gbW96UlRDU2Vzc2lvbkRlc2NyaXB0aW9uOwogICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA9IG1velJUQ0ljZUNhbmRpZGF0ZTsKICB9CgogIC8vIGdldFVzZXJNZWRpYSBjb25zdHJhaW50cyBzaGltLgogIGdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHsKICAgIHZhciBjb25zdHJhaW50c1RvRkYzNyA9IGZ1bmN0aW9uKGMpIHsKICAgICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLnJlcXVpcmUpIHsKICAgICAgICByZXR1cm4gYzsKICAgICAgfQogICAgICB2YXIgcmVxdWlyZSA9IFtdOwogICAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgIGlmIChrZXkgPT09ICdyZXF1aXJlJyB8fCBrZXkgPT09ICdhZHZhbmNlZCcgfHwga2V5ID09PSAnbWVkaWFTb3VyY2UnKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciByID0gY1trZXldID0gKHR5cGVvZiBjW2tleV0gPT09ICdvYmplY3QnKSA/CiAgICAgICAgICAgIGNba2V5XSA6IHtpZGVhbDogY1trZXldfTsKICAgICAgICBpZiAoci5taW4gIT09IHVuZGVmaW5lZCB8fAogICAgICAgICAgICByLm1heCAhPT0gdW5kZWZpbmVkIHx8IHIuZXhhY3QgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVxdWlyZS5wdXNoKGtleSk7CiAgICAgICAgfQogICAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGlmICh0eXBlb2Ygci5leGFjdCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgci5taW4gPSByLm1heCA9IHIuZXhhY3Q7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjW2tleV0gPSByLmV4YWN0OwogICAgICAgICAgfQogICAgICAgICAgZGVsZXRlIHIuZXhhY3Q7CiAgICAgICAgfQogICAgICAgIGlmIChyLmlkZWFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGMuYWR2YW5jZWQgPSBjLmFkdmFuY2VkIHx8IFtdOwogICAgICAgICAgdmFyIG9jID0ge307CiAgICAgICAgICBpZiAodHlwZW9mIHIuaWRlYWwgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgIG9jW2tleV0gPSB7bWluOiByLmlkZWFsLCBtYXg6IHIuaWRlYWx9OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb2Nba2V5XSA9IHIuaWRlYWw7CiAgICAgICAgICB9CiAgICAgICAgICBjLmFkdmFuY2VkLnB1c2gob2MpOwogICAgICAgICAgZGVsZXRlIHIuaWRlYWw7CiAgICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHIpLmxlbmd0aCkgewogICAgICAgICAgICBkZWxldGUgY1trZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChyZXF1aXJlLmxlbmd0aCkgewogICAgICAgIGMucmVxdWlyZSA9IHJlcXVpcmU7CiAgICAgIH0KICAgICAgcmV0dXJuIGM7CiAgICB9OwogICAgaWYgKHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiA8IDM4KSB7CiAgICAgIHdlYnJ0Y1V0aWxzLmxvZygnc3BlYzogJyArIEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7CiAgICAgIGlmIChjb25zdHJhaW50cy5hdWRpbykgewogICAgICAgIGNvbnN0cmFpbnRzLmF1ZGlvID0gY29uc3RyYWludHNUb0ZGMzcoY29uc3RyYWludHMuYXVkaW8pOwogICAgICB9CiAgICAgIGlmIChjb25zdHJhaW50cy52aWRlbykgewogICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gY29uc3RyYWludHNUb0ZGMzcoY29uc3RyYWludHMudmlkZW8pOwogICAgICB9CiAgICAgIHdlYnJ0Y1V0aWxzLmxvZygnZmYzNzogJyArIEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7CiAgICB9CiAgICByZXR1cm4gbmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYShjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKTsKICB9OwoKICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZ2V0VXNlck1lZGlhOwoKICAvLyBTaGltIGZvciBtZWRpYURldmljZXMgb24gb2xkZXIgdmVyc2lvbnMuCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID0ge2dldFVzZXJNZWRpYTogcmVxdWVzdFVzZXJNZWRpYSwKICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7IH0sCiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uKCkgeyB9CiAgICB9OwogIH0KICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgPQogICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgfHwgZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICB2YXIgaW5mb3MgPSBbCiAgICAgICAge2tpbmQ6ICdhdWRpb2lucHV0JywgZGV2aWNlSWQ6ICdkZWZhdWx0JywgbGFiZWw6ICcnLCBncm91cElkOiAnJ30sCiAgICAgICAge2tpbmQ6ICd2aWRlb2lucHV0JywgZGV2aWNlSWQ6ICdkZWZhdWx0JywgbGFiZWw6ICcnLCBncm91cElkOiAnJ30KICAgICAgXTsKICAgICAgcmVzb2x2ZShpbmZvcyk7CiAgICB9KTsKICB9OwoKICBpZiAod2VicnRjRGV0ZWN0ZWRWZXJzaW9uIDwgNDEpIHsKICAgIC8vIFdvcmsgYXJvdW5kIGh0dHA6Ly9idWd6aWwubGEvMTE2OTY2NQogICAgdmFyIG9yZ0VudW1lcmF0ZURldmljZXMgPQogICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcy5iaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpOwogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBvcmdFbnVtZXJhdGVEZXZpY2VzKCkudGhlbih1bmRlZmluZWQsIGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoZS5uYW1lID09PSAnTm90Rm91bmRFcnJvcicpIHsKICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgZTsKICAgICAgfSk7CiAgICB9OwogIH0KfSBlbHNlIGlmIChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhICYmIHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbikgewogIHdlYnJ0Y1V0aWxzLmxvZygnVGhpcyBhcHBlYXJzIHRvIGJlIENocm9tZScpOwoKICB3ZWJydGNEZXRlY3RlZEJyb3dzZXIgPSAnY2hyb21lJzsKCiAgLy8gdGhlIGRldGVjdGVkIGNocm9tZSB2ZXJzaW9uLgogIHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiA9IHdlYnJ0Y1V0aWxzLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgIC9DaHJvbShlfGl1bSlcLyhbMC05XSspXC4vLCAyKTsKCiAgLy8gdGhlIG1pbmltdW0gY2hyb21lIHZlcnNpb24gc3RpbGwgc3VwcG9ydGVkIGJ5IGFkYXB0ZXIuCiAgd2VicnRjTWluaW11bVZlcnNpb24gPSAzODsKCiAgLy8gVGhlIFJUQ1BlZXJDb25uZWN0aW9uIG9iamVjdC4KICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgLy8gVHJhbnNsYXRlIGljZVRyYW5zcG9ydFBvbGljeSB0byBpY2VUcmFuc3BvcnRzLAogICAgLy8gc2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3Avd2VicnRjL2lzc3Vlcy9kZXRhaWw/aWQ9NDg2OQogICAgaWYgKHBjQ29uZmlnICYmIHBjQ29uZmlnLmljZVRyYW5zcG9ydFBvbGljeSkgewogICAgICBwY0NvbmZpZy5pY2VUcmFuc3BvcnRzID0gcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5OwogICAgfQoKICAgIHZhciBwYyA9IG5ldyB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cyk7IC8vIGpzY3M6aWdub3JlIHJlcXVpcmVDYXBpdGFsaXplZENvbnN0cnVjdG9ycwogICAgdmFyIG9yaWdHZXRTdGF0cyA9IHBjLmdldFN0YXRzLmJpbmQocGMpOwogICAgcGMuZ2V0U3RhdHMgPSBmdW5jdGlvbihzZWxlY3Rvciwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7IC8vIGpzaGludCBpZ25vcmU6IGxpbmUKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKCiAgICAgIC8vIElmIHNlbGVjdG9yIGlzIGEgZnVuY3Rpb24gdGhlbiB3ZSBhcmUgaW4gdGhlIG9sZCBzdHlsZSBzdGF0cyBzbyBqdXN0CiAgICAgIC8vIHBhc3MgYmFjayB0aGUgb3JpZ2luYWwgZ2V0U3RhdHMgZm9ybWF0IHRvIGF2b2lkIGJyZWFraW5nIG9sZCB1c2Vycy4KICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMoc2VsZWN0b3IsIHN1Y2Nlc3NDYWxsYmFjayk7CiAgICAgIH0KCiAgICAgIHZhciBmaXhDaHJvbWVTdGF0cyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIHN0YW5kYXJkUmVwb3J0ID0ge307CiAgICAgICAgdmFyIHJlcG9ydHMgPSByZXNwb25zZS5yZXN1bHQoKTsKICAgICAgICByZXBvcnRzLmZvckVhY2goZnVuY3Rpb24ocmVwb3J0KSB7CiAgICAgICAgICB2YXIgc3RhbmRhcmRTdGF0cyA9IHsKICAgICAgICAgICAgaWQ6IHJlcG9ydC5pZCwKICAgICAgICAgICAgdGltZXN0YW1wOiByZXBvcnQudGltZXN0YW1wLAogICAgICAgICAgICB0eXBlOiByZXBvcnQudHlwZQogICAgICAgICAgfTsKICAgICAgICAgIHJlcG9ydC5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24obmFtZSkgewogICAgICAgICAgICBzdGFuZGFyZFN0YXRzW25hbWVdID0gcmVwb3J0LnN0YXQobmFtZSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHN0YW5kYXJkUmVwb3J0W3N0YW5kYXJkU3RhdHMuaWRdID0gc3RhbmRhcmRTdGF0czsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHN0YW5kYXJkUmVwb3J0OwogICAgICB9OwoKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikgewogICAgICAgIHZhciBzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyID0gZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgIGFyZ3NbMV0oZml4Q2hyb21lU3RhdHMocmVzcG9uc2UpKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb3JpZ0dldFN0YXRzLmFwcGx5KHRoaXMsIFtzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyLCBhcmd1bWVudHNbMF1dKTsKICAgICAgfQoKICAgICAgLy8gcHJvbWlzZS1zdXBwb3J0CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDEgJiYgc2VsZWN0b3IgPT09IG51bGwpIHsKICAgICAgICAgIG9yaWdHZXRTdGF0cy5hcHBseShzZWxmLCBbCiAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHJlc29sdmUuYXBwbHkobnVsbCwgW2ZpeENocm9tZVN0YXRzKHJlc3BvbnNlKV0pOwogICAgICAgICAgICAgIH0sIHJlamVjdF0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvcmlnR2V0U3RhdHMuYXBwbHkoc2VsZiwgW3Jlc29sdmUsIHJlamVjdF0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIHJldHVybiBwYzsKICB9OwogIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPSB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7CgogIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuCiAgaWYgKHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGUpIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sICdnZW5lcmF0ZUNlcnRpZmljYXRlJywgewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm4gd2Via2l0UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZS5hcHBseShudWxsLAogICAgICAgICAgICAgIGFyZ3VtZW50cyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICAvLyBhZGQgcHJvbWlzZSBzdXBwb3J0CiAgWydjcmVhdGVPZmZlcicsICdjcmVhdGVBbnN3ZXInXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgd2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEgfHwgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYKICAgICAgICAgIHR5cGVvZihhcmd1bWVudHNbMF0pID09PSAnb2JqZWN0JykpIHsKICAgICAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQ7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgbmF0aXZlTWV0aG9kLmFwcGx5KHNlbGYsIFtyZXNvbHZlLCByZWplY3QsIG9wdHNdKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH07CiAgfSk7CgogIFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbicsCiAgICAgICdhZGRJY2VDYW5kaWRhdGUnXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgd2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIG5hdGl2ZU1ldGhvZC5hcHBseShzZWxmLCBbYXJnc1swXSwKICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+PSAyKSB7CiAgICAgICAgICAgICAgICBhcmdzWzFdLmFwcGx5KG51bGwsIFtdKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+PSAzKSB7CiAgICAgICAgICAgICAgICBhcmdzWzJdLmFwcGx5KG51bGwsIFtlcnJdKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1dCiAgICAgICAgICApOwogICAgICB9KTsKICAgIH07CiAgfSk7CgogIC8vIGdldFVzZXJNZWRpYSBjb25zdHJhaW50cyBzaGltLgogIHZhciBjb25zdHJhaW50c1RvQ2hyb21lID0gZnVuY3Rpb24oYykgewogICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLm1hbmRhdG9yeSB8fCBjLm9wdGlvbmFsKSB7CiAgICAgIHJldHVybiBjOwogICAgfQogICAgdmFyIGNjID0ge307CiAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAoa2V5ID09PSAncmVxdWlyZScgfHwga2V5ID09PSAnYWR2YW5jZWQnIHx8IGtleSA9PT0gJ21lZGlhU291cmNlJykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgciA9ICh0eXBlb2YgY1trZXldID09PSAnb2JqZWN0JykgPyBjW2tleV0gOiB7aWRlYWw6IGNba2V5XX07CiAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHIuZXhhY3QgPT09ICdudW1iZXInKSB7CiAgICAgICAgci5taW4gPSByLm1heCA9IHIuZXhhY3Q7CiAgICAgIH0KICAgICAgdmFyIG9sZG5hbWUgPSBmdW5jdGlvbihwcmVmaXgsIG5hbWUpIHsKICAgICAgICBpZiAocHJlZml4KSB7CiAgICAgICAgICByZXR1cm4gcHJlZml4ICsgbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAobmFtZSA9PT0gJ2RldmljZUlkJykgPyAnc291cmNlSWQnIDogbmFtZTsKICAgICAgfTsKICAgICAgaWYgKHIuaWRlYWwgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGNjLm9wdGlvbmFsID0gY2Mub3B0aW9uYWwgfHwgW107CiAgICAgICAgdmFyIG9jID0ge307CiAgICAgICAgaWYgKHR5cGVvZiByLmlkZWFsID09PSAnbnVtYmVyJykgewogICAgICAgICAgb2Nbb2xkbmFtZSgnbWluJywga2V5KV0gPSByLmlkZWFsOwogICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7CiAgICAgICAgICBvYyA9IHt9OwogICAgICAgICAgb2Nbb2xkbmFtZSgnbWF4Jywga2V5KV0gPSByLmlkZWFsOwogICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9jW29sZG5hbWUoJycsIGtleSldID0gci5pZGVhbDsKICAgICAgICAgIGNjLm9wdGlvbmFsLnB1c2gob2MpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoci5leGFjdCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByLmV4YWN0ICE9PSAnbnVtYmVyJykgewogICAgICAgIGNjLm1hbmRhdG9yeSA9IGNjLm1hbmRhdG9yeSB8fCB7fTsKICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZSgnJywga2V5KV0gPSByLmV4YWN0OwogICAgICB9IGVsc2UgewogICAgICAgIFsnbWluJywgJ21heCddLmZvckVhY2goZnVuY3Rpb24obWl4KSB7CiAgICAgICAgICBpZiAoclttaXhdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgY2MubWFuZGF0b3J5ID0gY2MubWFuZGF0b3J5IHx8IHt9OwogICAgICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZShtaXgsIGtleSldID0gclttaXhdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIGlmIChjLmFkdmFuY2VkKSB7CiAgICAgIGNjLm9wdGlvbmFsID0gKGNjLm9wdGlvbmFsIHx8IFtdKS5jb25jYXQoYy5hZHZhbmNlZCk7CiAgICB9CiAgICByZXR1cm4gY2M7CiAgfTsKCiAgZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikgewogICAgaWYgKGNvbnN0cmFpbnRzLmF1ZGlvKSB7CiAgICAgIGNvbnN0cmFpbnRzLmF1ZGlvID0gY29uc3RyYWludHNUb0Nocm9tZShjb25zdHJhaW50cy5hdWRpbyk7CiAgICB9CiAgICBpZiAoY29uc3RyYWludHMudmlkZW8pIHsKICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lKGNvbnN0cmFpbnRzLnZpZGVvKTsKICAgIH0KICAgIHdlYnJ0Y1V0aWxzLmxvZygnY2hyb21lOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTsKICAgIHJldHVybiBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIG9uRXJyb3IpOwogIH07CiAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYTsKCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID0ge2dldFVzZXJNZWRpYTogcmVxdWVzdFVzZXJNZWRpYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYXRlRGV2aWNlczogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgdmFyIGtpbmRzID0ge2F1ZGlvOiAnYXVkaW9pbnB1dCcsIHZpZGVvOiAndmlkZW9pbnB1dCd9OwogICAgICAgIHJldHVybiBNZWRpYVN0cmVhbVRyYWNrLmdldFNvdXJjZXMoZnVuY3Rpb24oZGV2aWNlcykgewogICAgICAgICAgcmVzb2x2ZShkZXZpY2VzLm1hcChmdW5jdGlvbihkZXZpY2UpIHsKICAgICAgICAgICAgcmV0dXJuIHtsYWJlbDogZGV2aWNlLmxhYmVsLAogICAgICAgICAgICAgICAgICAgIGtpbmQ6IGtpbmRzW2RldmljZS5raW5kXSwKICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZDogZGV2aWNlLmlkLAogICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6ICcnfTsKICAgICAgICAgIH0pKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9fTsKICB9CgogIC8vIEEgc2hpbSBmb3IgZ2V0VXNlck1lZGlhIG1ldGhvZCBvbiB0aGUgbWVkaWFEZXZpY2VzIG9iamVjdC4KICAvLyBUT0RPKEthcHRlbkphbnNzb24pIHJlbW92ZSBvbmNlIGltcGxlbWVudGVkIGluIENocm9tZSBzdGFibGUuCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cykgewogICAgICByZXR1cm4gcmVxdWVzdFVzZXJNZWRpYShjb25zdHJhaW50cyk7CiAgICB9OwogIH0gZWxzZSB7CiAgICAvLyBFdmVuIHRob3VnaCBDaHJvbWUgNDUgaGFzIG5hdmlnYXRvci5tZWRpYURldmljZXMgYW5kIGEgZ2V0VXNlck1lZGlhCiAgICAvLyBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgUHJvbWlzZSwgaXQgZG9lcyBub3QgYWNjZXB0IHNwZWMtc3R5bGUKICAgIC8vIGNvbnN0cmFpbnRzLgogICAgdmFyIG9yaWdHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS4KICAgICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpOwogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjKSB7CiAgICAgIHdlYnJ0Y1V0aWxzLmxvZygnc3BlYzogICAnICsgSlNPTi5zdHJpbmdpZnkoYykpOyAvLyB3aGl0ZXNwYWNlIGZvciBhbGlnbm1lbnQKICAgICAgYy5hdWRpbyA9IGNvbnN0cmFpbnRzVG9DaHJvbWUoYy5hdWRpbyk7CiAgICAgIGMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lKGMudmlkZW8pOwogICAgICB3ZWJydGNVdGlscy5sb2coJ2Nocm9tZTogJyArIEpTT04uc3RyaW5naWZ5KGMpKTsKICAgICAgcmV0dXJuIG9yaWdHZXRVc2VyTWVkaWEoYyk7CiAgICB9OwogIH0KCiAgLy8gRHVtbXkgZGV2aWNlY2hhbmdlIGV2ZW50IG1ldGhvZHMuCiAgLy8gVE9ETyhLYXB0ZW5KYW5zc29uKSByZW1vdmUgb25jZSBpbXBsZW1lbnRlZCBpbiBDaHJvbWUgc3RhYmxlLgogIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID09PSAndW5kZWZpbmVkJykgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIHdlYnJ0Y1V0aWxzLmxvZygnRHVtbXkgbWVkaWFEZXZpY2VzLmFkZEV2ZW50TGlzdGVuZXIgY2FsbGVkLicpOwogICAgfTsKICB9CiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPT09ICd1bmRlZmluZWQnKSB7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbigpIHsKICAgICAgd2VicnRjVXRpbHMubG9nKCdEdW1teSBtZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lciBjYWxsZWQuJyk7CiAgICB9OwogIH0KCiAgLy8gQXR0YWNoIGEgbWVkaWEgc3RyZWFtIHRvIGFuIGVsZW1lbnQuCiAgYXR0YWNoTWVkaWFTdHJlYW0gPSBmdW5jdGlvbihlbGVtZW50LCBzdHJlYW0pIHsKICAgIGlmICh3ZWJydGNEZXRlY3RlZFZlcnNpb24gPj0gNDMpIHsKICAgICAgZWxlbWVudC5zcmNPYmplY3QgPSBzdHJlYW07CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbGVtZW50LnNyYyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgZWxlbWVudC5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICB9IGVsc2UgewogICAgICB3ZWJydGNVdGlscy5sb2coJ0Vycm9yIGF0dGFjaGluZyBzdHJlYW0gdG8gZWxlbWVudC4nKTsKICAgIH0KICB9OwogIHJlYXR0YWNoTWVkaWFTdHJlYW0gPSBmdW5jdGlvbih0bywgZnJvbSkgewogICAgaWYgKHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiA+PSA0MykgewogICAgICB0by5zcmNPYmplY3QgPSBmcm9tLnNyY09iamVjdDsKICAgIH0gZWxzZSB7CiAgICAgIHRvLnNyYyA9IGZyb20uc3JjOwogICAgfQogIH07Cgp9IGVsc2UgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgKICAgIC9FZGdlXC8oXGQrKS4oXGQrKSQvKSkgewogIHdlYnJ0Y1V0aWxzLmxvZygnVGhpcyBhcHBlYXJzIHRvIGJlIEVkZ2UnKTsKICB3ZWJydGNEZXRlY3RlZEJyb3dzZXIgPSAnZWRnZSc7CgogIHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiA9IHdlYnJ0Y1V0aWxzLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgIC9FZGdlXC8oXGQrKS4oXGQrKSQvLCAyKTsKCiAgLy8gVGhlIG1pbmltdW0gdmVyc2lvbiBzdGlsbCBzdXBwb3J0ZWQgYnkgYWRhcHRlci4KICAvLyBUaGlzIGlzIHRoZSBidWlsZCBudW1iZXIgZm9yIEVkZ2UuCiAgd2VicnRjTWluaW11bVZlcnNpb24gPSAxMDU0NzsKCiAgaWYgKHdpbmRvdy5SVENJY2VHYXRoZXJlcikgewogICAgLy8gR2VuZXJhdGUgYW4gYWxwaGFudW1lcmljIGlkZW50aWZpZXIgZm9yIGNuYW1lIG9yIG1pZHMuCiAgICAvLyBUT0RPOiB1c2UgVVVJRHMgaW5zdGVhZD8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vamVkLzk4Mjg4MwogICAgdmFyIGdlbmVyYXRlSWRlbnRpZmllciA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDEwKTsKICAgIH07CgogICAgLy8gVGhlIFJUQ1AgQ05BTUUgdXNlZCBieSBhbGwgcGVlcmNvbm5lY3Rpb25zIGZyb20gdGhlIHNhbWUgSlMuCiAgICB2YXIgbG9jYWxDTmFtZSA9IGdlbmVyYXRlSWRlbnRpZmllcigpOwoKICAgIC8vIFNEUCBoZWxwZXJzIC0gdG8gYmUgbW92ZWQgaW50byBzZXBhcmF0ZSBtb2R1bGUuCiAgICB2YXIgU0RQVXRpbHMgPSB7fTsKCiAgICAvLyBTcGxpdHMgU0RQIGludG8gbGluZXMsIGRlYWxpbmcgd2l0aCBib3RoIENSTEYgYW5kIExGLgogICAgU0RQVXRpbHMuc3BsaXRMaW5lcyA9IGZ1bmN0aW9uKGJsb2IpIHsKICAgICAgcmV0dXJuIGJsb2IudHJpbSgpLnNwbGl0KCdcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgcmV0dXJuIGxpbmUudHJpbSgpOwogICAgICB9KTsKICAgIH07CgogICAgLy8gU3BsaXRzIFNEUCBpbnRvIHNlc3Npb25wYXJ0IGFuZCBtZWRpYXNlY3Rpb25zLiBFbnN1cmVzIENSTEYuCiAgICBTRFBVdGlscy5zcGxpdFNlY3Rpb25zID0gZnVuY3Rpb24oYmxvYikgewogICAgICB2YXIgcGFydHMgPSBibG9iLnNwbGl0KCdcclxubT0nKTsKICAgICAgcmV0dXJuIHBhcnRzLm1hcChmdW5jdGlvbihwYXJ0LCBpbmRleCkgewogICAgICAgIHJldHVybiAoaW5kZXggPiAwID8gJ209JyArIHBhcnQgOiBwYXJ0KS50cmltKCkgKyAnXHJcbic7CiAgICAgIH0pOwogICAgfTsKCiAgICAvLyBSZXR1cm5zIGxpbmVzIHRoYXQgc3RhcnQgd2l0aCBhIGNlcnRhaW4gcHJlZml4LgogICAgU0RQVXRpbHMubWF0Y2hQcmVmaXggPSBmdW5jdGlvbihibG9iLCBwcmVmaXgpIHsKICAgICAgcmV0dXJuIFNEUFV0aWxzLnNwbGl0TGluZXMoYmxvYikuZmlsdGVyKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICByZXR1cm4gbGluZS5pbmRleE9mKHByZWZpeCkgPT09IDA7CiAgICAgIH0pOwogICAgfTsKCiAgICAvLyBQYXJzZXMgYW4gSUNFIGNhbmRpZGF0ZSBsaW5lLiBTYW1wbGUgaW5wdXQ6CiAgICAvLyBjYW5kaWRhdGU6NzAyNzg2MzUwIDIgdWRwIDQxODE5OTAyIDguOC44LjggNjA3NjkgdHlwIHJlbGF5IHJhZGRyIDguOC44LjggcnBvcnQgNTU5OTYiCiAgICBTRFBVdGlscy5wYXJzZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgdmFyIHBhcnRzOwogICAgICAvLyBQYXJzZSBib3RoIHZhcmlhbnRzLgogICAgICBpZiAobGluZS5pbmRleE9mKCdhPWNhbmRpZGF0ZTonKSA9PT0gMCkgewogICAgICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTIpLnNwbGl0KCcgJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFydHMgPSBsaW5lLnN1YnN0cmluZygxMCkuc3BsaXQoJyAnKTsKICAgICAgfQoKICAgICAgdmFyIGNhbmRpZGF0ZSA9IHsKICAgICAgICBmb3VuZGF0aW9uOiBwYXJ0c1swXSwKICAgICAgICBjb21wb25lbnQ6IHBhcnRzWzFdLAogICAgICAgIHByb3RvY29sOiBwYXJ0c1syXS50b0xvd2VyQ2FzZSgpLAogICAgICAgIHByaW9yaXR5OiBwYXJzZUludChwYXJ0c1szXSwgMTApLAogICAgICAgIGlwOiBwYXJ0c1s0XSwKICAgICAgICBwb3J0OiBwYXJzZUludChwYXJ0c1s1XSwgMTApLAogICAgICAgIC8vIHNraXAgcGFydHNbNl0gPT0gJ3R5cCcKICAgICAgICB0eXBlOiBwYXJ0c1s3XQogICAgICB9OwoKICAgICAgZm9yICh2YXIgaSA9IDg7IGkgPCBwYXJ0cy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIHN3aXRjaCAocGFydHNbaV0pIHsKICAgICAgICAgIGNhc2UgJ3JhZGRyJzoKICAgICAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzID0gcGFydHNbaSArIDFdOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3Jwb3J0JzoKICAgICAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRQb3J0ID0gcGFyc2VJbnQocGFydHNbaSArIDFdLCAxMCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAndGNwdHlwZSc6CiAgICAgICAgICAgIGNhbmRpZGF0ZS50Y3BUeXBlID0gcGFydHNbaSArIDFdOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6IC8vIFVua25vd24gZXh0ZW5zaW9ucyBhcmUgc2lsZW50bHkgaWdub3JlZC4KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBjYW5kaWRhdGU7CiAgICB9OwoKICAgIC8vIFRyYW5zbGF0ZXMgYSBjYW5kaWRhdGUgb2JqZWN0IGludG8gU0RQIGNhbmRpZGF0ZSBhdHRyaWJ1dGUuCiAgICBTRFBVdGlscy53cml0ZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSkgewogICAgICB2YXIgc2RwID0gW107CiAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5mb3VuZGF0aW9uKTsKICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLmNvbXBvbmVudCk7CiAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5wcm90b2NvbC50b1VwcGVyQ2FzZSgpKTsKICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLnByaW9yaXR5KTsKICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLmlwKTsKICAgICAgc2RwLnB1c2goY2FuZGlkYXRlLnBvcnQpOwoKICAgICAgdmFyIHR5cGUgPSBjYW5kaWRhdGUudHlwZTsKICAgICAgc2RwLnB1c2goJ3R5cCcpOwogICAgICBzZHAucHVzaCh0eXBlKTsKICAgICAgaWYgKHR5cGUgIT09ICdob3N0JyAmJiBjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MgJiYKICAgICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCkgewogICAgICAgIHNkcC5wdXNoKCdyYWRkcicpOwogICAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyk7IC8vIHdhczogcmVsQWRkcgogICAgICAgIHNkcC5wdXNoKCdycG9ydCcpOwogICAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCk7IC8vIHdhczogcmVsUG9ydAogICAgICB9CiAgICAgIGlmIChjYW5kaWRhdGUudGNwVHlwZSAmJiBjYW5kaWRhdGUucHJvdG9jb2wudG9Mb3dlckNhc2UoKSA9PT0gJ3RjcCcpIHsKICAgICAgICBzZHAucHVzaCgndGNwdHlwZScpOwogICAgICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS50Y3BUeXBlKTsKICAgICAgfQogICAgICByZXR1cm4gJ2NhbmRpZGF0ZTonICsgc2RwLmpvaW4oJyAnKTsKICAgIH07CgogICAgLy8gUGFyc2VzIGFuIHJ0cG1hcCBsaW5lLCByZXR1cm5zIFJUQ1J0cENvZGRlY1BhcmFtZXRlcnMuIFNhbXBsZSBpbnB1dDoKICAgIC8vIGE9cnRwbWFwOjExMSBvcHVzLzQ4MDAwLzIKICAgIFNEUFV0aWxzLnBhcnNlUnRwTWFwID0gZnVuY3Rpb24obGluZSkgewogICAgICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cig5KS5zcGxpdCgnICcpOwogICAgICB2YXIgcGFyc2VkID0gewogICAgICAgIHBheWxvYWRUeXBlOiBwYXJzZUludChwYXJ0cy5zaGlmdCgpLCAxMCkgLy8gd2FzOiBpZAogICAgICB9OwoKICAgICAgcGFydHMgPSBwYXJ0c1swXS5zcGxpdCgnLycpOwoKICAgICAgcGFyc2VkLm5hbWUgPSBwYXJ0c1swXTsKICAgICAgcGFyc2VkLmNsb2NrUmF0ZSA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCk7IC8vIHdhczogY2xvY2tyYXRlCiAgICAgIHBhcnNlZC5udW1DaGFubmVscyA9IHBhcnRzLmxlbmd0aCA9PT0gMyA/IHBhcnNlSW50KHBhcnRzWzJdLCAxMCkgOiAxOyAvLyB3YXM6IGNoYW5uZWxzCiAgICAgIHJldHVybiBwYXJzZWQ7CiAgICB9OwoKICAgIC8vIEdlbmVyYXRlIGFuIGE9cnRwbWFwIGxpbmUgZnJvbSBSVENSdHBDb2RlY0NhcGFiaWxpdHkgb3IgUlRDUnRwQ29kZWNQYXJhbWV0ZXJzLgogICAgU0RQVXRpbHMud3JpdGVSdHBNYXAgPSBmdW5jdGlvbihjb2RlYykgewogICAgICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICAgICAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlOwogICAgICB9CiAgICAgIHJldHVybiAnYT1ydHBtYXA6JyArIHB0ICsgJyAnICsgY29kZWMubmFtZSArICcvJyArIGNvZGVjLmNsb2NrUmF0ZSArCiAgICAgICAgICAoY29kZWMubnVtQ2hhbm5lbHMgIT09IDEgPyAnLycgKyBjb2RlYy5udW1DaGFubmVscyA6ICcnKSArICdcclxuJzsKICAgIH07CgogICAgLy8gUGFyc2VzIGFuIGZ0bXAgbGluZSwgcmV0dXJucyBkaWN0aW9uYXJ5LiBTYW1wbGUgaW5wdXQ6CiAgICAvLyBhPWZtdHA6OTYgdmJyPW9uO2NuZz1vbgogICAgLy8gQWxzbyBkZWFscyB3aXRoIHZicj1vbjsgY25nPW9uCiAgICBTRFBVdGlscy5wYXJzZUZtdHAgPSBmdW5jdGlvbihsaW5lKSB7CiAgICAgIHZhciBwYXJzZWQgPSB7fTsKICAgICAgdmFyIGt2OwogICAgICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCc7Jyk7CiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHsKICAgICAgICBrdiA9IHBhcnRzW2pdLnRyaW0oKS5zcGxpdCgnPScpOwogICAgICAgIHBhcnNlZFtrdlswXS50cmltKCldID0ga3ZbMV07CiAgICAgIH0KICAgICAgcmV0dXJuIHBhcnNlZDsKICAgIH07CgogICAgLy8gR2VuZXJhdGVzIGFuIGE9ZnRtcCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy4KICAgIFNEUFV0aWxzLndyaXRlRnRtcCA9IGZ1bmN0aW9uKGNvZGVjKSB7CiAgICAgIHZhciBsaW5lID0gJyc7CiAgICAgIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlOwogICAgICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7CiAgICAgIH0KICAgICAgaWYgKGNvZGVjLnBhcmFtZXRlcnMgJiYgY29kZWMucGFyYW1ldGVycy5sZW5ndGgpIHsKICAgICAgICB2YXIgcGFyYW1zID0gW107CiAgICAgICAgT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycykuZm9yRWFjaChmdW5jdGlvbihwYXJhbSkgewogICAgICAgICAgcGFyYW1zLnB1c2gocGFyYW0gKyAnPScgKyBjb2RlYy5wYXJhbWV0ZXJzW3BhcmFtXSk7CiAgICAgICAgfSk7CiAgICAgICAgbGluZSArPSAnYT1mbXRwOicgKyBwdCArICcgJyArIHBhcmFtcy5qb2luKCc7JykgKyAnXHJcbic7CiAgICAgIH0KICAgICAgcmV0dXJuIGxpbmU7CiAgICB9OwoKICAgIC8vIFBhcnNlcyBhbiBydGNwLWZiIGxpbmUsIHJldHVybnMgUlRDUFJ0Y3BGZWVkYmFjayBvYmplY3QuIFNhbXBsZSBpbnB1dDoKICAgIC8vIGE9cnRjcC1mYjo5OCBuYWNrIHJwc2kKICAgIFNEUFV0aWxzLnBhcnNlUnRjcEZiID0gZnVuY3Rpb24obGluZSkgewogICAgICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogcGFydHMuc2hpZnQoKSwKICAgICAgICBwYXJhbWV0ZXI6IHBhcnRzLmpvaW4oJyAnKQogICAgICB9OwogICAgfTsKICAgIC8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuCiAgICBTRFBVdGlscy53cml0ZVJ0Y3BGYiA9IGZ1bmN0aW9uKGNvZGVjKSB7CiAgICAgIHZhciBsaW5lcyA9ICcnOwogICAgICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICAgICAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlOwogICAgICB9CiAgICAgIGlmIChjb2RlYy5ydGNwRmVlZGJhY2sgJiYgY29kZWMucnRjcEZlZWRiYWNrLmxlbmd0aCkgewogICAgICAgIC8vIEZJWE1FOiBzcGVjaWFsIGhhbmRsaW5nIGZvciB0cnItaW50PwogICAgICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZ1bmN0aW9uKGZiKSB7CiAgICAgICAgICBsaW5lcyArPSAnYT1ydGNwLWZiOicgKyBwdCArICcgJyArIGZiLnR5cGUgKyAnICcgKyBmYi5wYXJhbWV0ZXIgKwogICAgICAgICAgICAgICdcclxuJzsKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gbGluZXM7CiAgICB9OwoKICAgIC8vIFBhcnNlcyBhbiBSRkMgNTU3NiBzc3JjIG1lZGlhIGF0dHJpYnV0ZS4gU2FtcGxlIGlucHV0OgogICAgLy8gYT1zc3JjOjM3MzU5Mjg1NTkgY25hbWU6c29tZXRoaW5nCiAgICBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYSA9IGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgdmFyIHNwID0gbGluZS5pbmRleE9mKCcgJyk7CiAgICAgIHZhciBwYXJ0cyA9IHsKICAgICAgICBzc3JjOiBsaW5lLnN1YnN0cig3LCBzcCAtIDcpLAogICAgICB9OwogICAgICB2YXIgY29sb24gPSBsaW5lLmluZGV4T2YoJzonLCBzcCk7CiAgICAgIGlmIChjb2xvbiA+IC0xKSB7CiAgICAgICAgcGFydHMuYXR0cmlidXRlID0gbGluZS5zdWJzdHIoc3AgKyAxLCBjb2xvbiAtIHNwIC0gMSk7CiAgICAgICAgcGFydHMudmFsdWUgPSBsaW5lLnN1YnN0cihjb2xvbiArIDEpOwogICAgICB9IGVsc2UgewogICAgICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHBhcnRzOwogICAgfTsKCiAgICAvLyBFeHRyYWN0cyBEVExTIHBhcmFtZXRlcnMgZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC4KICAgIC8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seQogICAgLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuCiAgICBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHsKICAgICAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogICAgICBsaW5lcyA9IGxpbmVzLmNvbmNhdChTRFBVdGlscy5zcGxpdExpbmVzKHNlc3Npb25wYXJ0KSk7IC8vIFNlYXJjaCBpbiBzZXNzaW9uIHBhcnQsIHRvby4KICAgICAgdmFyIGZwTGluZSA9IGxpbmVzLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1maW5nZXJwcmludDonKSA9PT0gMDsKICAgICAgfSlbMF0uc3Vic3RyKDE0KTsKICAgICAgLy8gTm90ZTogYT1zZXR1cCBsaW5lIGlzIGlnbm9yZWQgc2luY2Ugd2UgdXNlIHRoZSAnYXV0bycgcm9sZS4KICAgICAgdmFyIGR0bHNQYXJhbWV0ZXJzID0gewogICAgICAgIHJvbGU6ICdhdXRvJywKICAgICAgICBmaW5nZXJwcmludHM6IFt7CiAgICAgICAgICBhbGdvcml0aG06IGZwTGluZS5zcGxpdCgnICcpWzBdLAogICAgICAgICAgdmFsdWU6IGZwTGluZS5zcGxpdCgnICcpWzFdCiAgICAgICAgfV0KICAgICAgfTsKICAgICAgcmV0dXJuIGR0bHNQYXJhbWV0ZXJzOwogICAgfTsKCiAgICAvLyBTZXJpYWxpemVzIERUTFMgcGFyYW1ldGVycyB0byBTRFAuCiAgICBTRFBVdGlscy53cml0ZUR0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24ocGFyYW1zLCBzZXR1cFR5cGUpIHsKICAgICAgdmFyIHNkcCA9ICdhPXNldHVwOicgKyBzZXR1cFR5cGUgKyAnXHJcbic7CiAgICAgIHBhcmFtcy5maW5nZXJwcmludHMuZm9yRWFjaChmdW5jdGlvbihmcCkgewogICAgICAgIHNkcCArPSAnYT1maW5nZXJwcmludDonICsgZnAuYWxnb3JpdGhtICsgJyAnICsgZnAudmFsdWUgKyAnXHJcbic7CiAgICAgIH0pOwogICAgICByZXR1cm4gc2RwOwogICAgfTsKICAgIC8vIFBhcnNlcyBJQ0UgaW5mb3JtYXRpb24gZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC4KICAgIC8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seQogICAgLy8gICBnZXQgdGhlIGljZS11ZnJhZyBhbmQgaWNlLXB3ZCBsaW5lcyBhcyBpbnB1dC4KICAgIFNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7CiAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAgICAgbGluZXMgPSBsaW5lcy5jb25jYXQoU0RQVXRpbHMuc3BsaXRMaW5lcyhzZXNzaW9ucGFydCkpOyAvLyBTZWFyY2ggaW4gc2Vzc2lvbiBwYXJ0LCB0b28uCiAgICAgIHZhciBpY2VQYXJhbWV0ZXJzID0gewogICAgICAgIHVzZXJuYW1lRnJhZ21lbnQ6IGxpbmVzLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgICByZXR1cm4gbGluZS5pbmRleE9mKCdhPWljZS11ZnJhZzonKSA9PT0gMDsKICAgICAgICB9KVswXS5zdWJzdHIoMTIpLAogICAgICAgIHBhc3N3b3JkOiBsaW5lcy5maWx0ZXIoZnVuY3Rpb24obGluZSkgewogICAgICAgICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1pY2UtcHdkOicpID09PSAwOwogICAgICAgIH0pWzBdLnN1YnN0cigxMCkKICAgICAgfTsKICAgICAgcmV0dXJuIGljZVBhcmFtZXRlcnM7CiAgICB9OwoKICAgIC8vIFNlcmlhbGl6ZXMgSUNFIHBhcmFtZXRlcnMgdG8gU0RQLgogICAgU0RQVXRpbHMud3JpdGVJY2VQYXJhbWV0ZXJzID0gZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgIHJldHVybiAnYT1pY2UtdWZyYWc6JyArIHBhcmFtcy51c2VybmFtZUZyYWdtZW50ICsgJ1xyXG4nICsKICAgICAgICAgICdhPWljZS1wd2Q6JyArIHBhcmFtcy5wYXNzd29yZCArICdcclxuJzsKICAgIH07CgogICAgLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLgogICAgU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7CiAgICAgIHZhciBkZXNjcmlwdGlvbiA9IHsKICAgICAgICBjb2RlY3M6IFtdLAogICAgICAgIGhlYWRlckV4dGVuc2lvbnM6IFtdLAogICAgICAgIGZlY01lY2hhbmlzbXM6IFtdLAogICAgICAgIHJ0Y3A6IFtdCiAgICAgIH07CiAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAgICAgdmFyIG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTsKICAgICAgZm9yICh2YXIgaSA9IDM7IGkgPCBtbGluZS5sZW5ndGg7IGkrKykgeyAvLyBmaW5kIGFsbCBjb2RlY3MgZnJvbSBtbGluZVszLi5dCiAgICAgICAgdmFyIHB0ID0gbWxpbmVbaV07CiAgICAgICAgdmFyIHJ0cG1hcGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeCgKICAgICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydHBtYXA6JyArIHB0ICsgJyAnKVswXTsKICAgICAgICBpZiAocnRwbWFwbGluZSkgewogICAgICAgICAgdmFyIGNvZGVjID0gU0RQVXRpbHMucGFyc2VSdHBNYXAocnRwbWFwbGluZSk7CiAgICAgICAgICB2YXIgZm10cHMgPSBTRFBVdGlscy5tYXRjaFByZWZpeCgKICAgICAgICAgICAgICBtZWRpYVNlY3Rpb24sICdhPWZtdHA6JyArIHB0ICsgJyAnKTsKICAgICAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuCiAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzID0gZm10cHMubGVuZ3RoID8gU0RQVXRpbHMucGFyc2VGbXRwKGZtdHBzWzBdKSA6IHt9OwogICAgICAgICAgY29kZWMucnRjcEZlZWRiYWNrID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoCiAgICAgICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOicgKyBwdCArICcgJykKICAgICAgICAgICAgLm1hcChTRFBVdGlscy5wYXJzZVJ0Y3BGYik7CiAgICAgICAgICBkZXNjcmlwdGlvbi5jb2RlY3MucHVzaChjb2RlYyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIEZJWE1FOiBwYXJzZSBoZWFkZXJFeHRlbnNpb25zLCBmZWNNZWNoYW5pc21zIGFuZCBydGNwLgogICAgICByZXR1cm4gZGVzY3JpcHRpb247CiAgICB9OwoKICAgIC8vIEdlbmVyYXRlcyBwYXJ0cyBvZiB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gZGVzY3JpYmluZyB0aGUgY2FwYWJpbGl0aWVzIC8gcGFyYW1ldGVycy4KICAgIFNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24gPSBmdW5jdGlvbihraW5kLCBjYXBzKSB7CiAgICAgIHZhciBzZHAgPSAnJzsKCiAgICAgIC8vIEJ1aWxkIHRoZSBtbGluZS4KICAgICAgc2RwICs9ICdtPScgKyBraW5kICsgJyAnOwogICAgICBzZHAgKz0gY2Fwcy5jb2RlY3MubGVuZ3RoID4gMCA/ICc5JyA6ICcwJzsgLy8gcmVqZWN0IGlmIG5vIGNvZGVjcy4KICAgICAgc2RwICs9ICcgVURQL1RMUy9SVFAvU0FWUEYgJzsKICAgICAgc2RwICs9IGNhcHMuY29kZWNzLm1hcChmdW5jdGlvbihjb2RlYykgewogICAgICAgIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZXR1cm4gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb2RlYy5wYXlsb2FkVHlwZTsKICAgICAgfSkuam9pbignICcpICsgJ1xyXG4nOwoKICAgICAgc2RwICs9ICdjPUlOIElQNCAwLjAuMC4wXHJcbic7CiAgICAgIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcclxuJzsKCiAgICAgIC8vIEFkZCBhPXJ0cG1hcCBsaW5lcyBmb3IgZWFjaCBjb2RlYy4gQWxzbyBmbXRwIGFuZCBydGNwLWZiLgogICAgICBjYXBzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7CiAgICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTsKICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVGdG1wKGNvZGVjKTsKICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVSdGNwRmIoY29kZWMpOwogICAgICB9KTsKICAgICAgLy8gRklYTUU6IGFkZCBoZWFkZXJFeHRlbnNpb25zLCBmZWNNZWNoYW5pc23FnyBhbmQgcnRjcC4KICAgICAgc2RwICs9ICdhPXJ0Y3AtbXV4XHJcbic7CiAgICAgIHJldHVybiBzZHA7CiAgICB9OwoKICAgIFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlID0gZnVuY3Rpb24oKSB7CiAgICAgIC8vIEZJWE1FOiBzZXNzLWlkIHNob3VsZCBiZSBhbiBOVFAgdGltZXN0YW1wLgogICAgICByZXR1cm4gJ3Y9MFxyXG4nICsKICAgICAgICAgICdvPXRoaXNpc2FkYXB0ZXJvcnRjIDgxNjk2Mzk5MTU2NDY5NDMxMzcgMiBJTiBJUDQgMTI3LjAuMC4xXHJcbicgKwogICAgICAgICAgJ3M9LVxyXG4nICsKICAgICAgICAgICd0PTAgMFxyXG4nOwogICAgfTsKCiAgICBTRFBVdGlscy53cml0ZU1lZGlhU2VjdGlvbiA9IGZ1bmN0aW9uKHRyYW5zY2VpdmVyLCBjYXBzLCB0eXBlLCBzdHJlYW0pIHsKICAgICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24odHJhbnNjZWl2ZXIua2luZCwgY2Fwcyk7CgogICAgICAvLyBNYXAgSUNFIHBhcmFtZXRlcnMgKHVmcmFnLCBwd2QpIHRvIFNEUC4KICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycygKICAgICAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKTsKCiAgICAgIC8vIE1hcCBEVExTIHBhcmFtZXRlcnMgdG8gU0RQLgogICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVEdGxzUGFyYW1ldGVycygKICAgICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksCiAgICAgICAgICB0eXBlID09PSAnb2ZmZXInID8gJ2FjdHBhc3MnIDogJ2FjdGl2ZScpOwoKICAgICAgc2RwICs9ICdhPW1pZDonICsgdHJhbnNjZWl2ZXIubWlkICsgJ1xyXG4nOwoKICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikgewogICAgICAgIHNkcCArPSAnYT1zZW5kcmVjdlxyXG4nOwogICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgICAgIHNkcCArPSAnYT1zZW5kb25seVxyXG4nOwogICAgICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICAgICAgc2RwICs9ICdhPXJlY3Zvbmx5XHJcbic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2RwICs9ICdhPWluYWN0aXZlXHJcbic7CiAgICAgIH0KCiAgICAgIC8vIEZJWE1FOiBmb3IgUlRYIHRoZXJlIG1pZ2h0IGJlIG11bHRpcGxlIFNTUkNzLiBOb3QgaW1wbGVtZW50ZWQgaW4gRWRnZSB5ZXQuCiAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHsKICAgICAgICB2YXIgbXNpZCA9ICdtc2lkOicgKyBzdHJlYW0uaWQgKyAnICcgKwogICAgICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIudHJhY2suaWQgKyAnXHJcbic7CiAgICAgICAgc2RwICs9ICdhPScgKyBtc2lkOwogICAgICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kU3NyYyArICcgJyArIG1zaWQ7CiAgICAgIH0KICAgICAgLy8gRklYTUU6IHRoaXMgc2hvdWxkIGJlIHdyaXR0ZW4gYnkgd3JpdGVSdHBEZXNjcmlwdGlvbi4KICAgICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRTc3JjICsgJyBjbmFtZTonICsKICAgICAgICAgIGxvY2FsQ05hbWUgKyAnXHJcbic7CiAgICAgIHJldHVybiBzZHA7CiAgICB9OwoKICAgIC8vIEdldHMgdGhlIGRpcmVjdGlvbiBmcm9tIHRoZSBtZWRpYVNlY3Rpb24gb3IgdGhlIHNlc3Npb25wYXJ0LgogICAgU0RQVXRpbHMuZ2V0RGlyZWN0aW9uID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkgewogICAgICAvLyBMb29rIGZvciBzZW5kcmVjdiwgc2VuZG9ubHksIHJlY3Zvbmx5LCBpbmFjdGl2ZSwgZGVmYXVsdCB0byBzZW5kcmVjdi4KICAgICAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc3dpdGNoIChsaW5lc1tpXSkgewogICAgICAgICAgY2FzZSAnYT1zZW5kcmVjdic6CiAgICAgICAgICBjYXNlICdhPXNlbmRvbmx5JzoKICAgICAgICAgIGNhc2UgJ2E9cmVjdm9ubHknOgogICAgICAgICAgY2FzZSAnYT1pbmFjdGl2ZSc6CiAgICAgICAgICAgIHJldHVybiBsaW5lc1tpXS5zdWJzdHIoMik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChzZXNzaW9ucGFydCkgewogICAgICAgIHJldHVybiBTRFBVdGlscy5nZXREaXJlY3Rpb24oc2Vzc2lvbnBhcnQpOwogICAgICB9CiAgICAgIHJldHVybiAnc2VuZHJlY3YnOwogICAgfTsKCiAgICAvLyBPUlRDIGRlZmluZXMgYW4gUlRDSWNlQ2FuZGlkYXRlIG9iamVjdCBidXQgbm8gY29uc3RydWN0b3IuCiAgICAvLyBOb3QgaW1wbGVtZW50ZWQgaW4gRWRnZS4KICAgIGlmICghd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSkgewogICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oYXJncykgewogICAgICAgIHJldHVybiBhcmdzOwogICAgICB9OwogICAgfQogICAgLy8gT1JUQyBkb2VzIG5vdCBoYXZlIGEgc2Vzc2lvbiBkZXNjcmlwdGlvbiBvYmplY3QgYnV0CiAgICAvLyBvdGhlciBicm93c2VycyAoaS5lLiBDaHJvbWUpIHRoYXQgd2lsbCBzdXBwb3J0IGJvdGggUEMgYW5kIE9SVEMKICAgIC8vIGluIHRoZSBmdXR1cmUgbWlnaHQgaGF2ZSB0aGlzIGRlZmluZWQgYWxyZWFkeS4KICAgIGlmICghd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikgewogICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gZnVuY3Rpb24oYXJncykgewogICAgICAgIHJldHVybiBhcmdzOwogICAgICB9OwogICAgfQoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uKGNvbmZpZykgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICB0aGlzLm9uaWNlY2FuZGlkYXRlID0gbnVsbDsKICAgICAgdGhpcy5vbmFkZHN0cmVhbSA9IG51bGw7CiAgICAgIHRoaXMub25yZW1vdmVzdHJlYW0gPSBudWxsOwogICAgICB0aGlzLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UgPSBudWxsOwogICAgICB0aGlzLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gbnVsbDsKICAgICAgdGhpcy5vbm5lZ290aWF0aW9ubmVlZGVkID0gbnVsbDsKICAgICAgdGhpcy5vbmRhdGFjaGFubmVsID0gbnVsbDsKCiAgICAgIHRoaXMubG9jYWxTdHJlYW1zID0gW107CiAgICAgIHRoaXMucmVtb3RlU3RyZWFtcyA9IFtdOwogICAgICB0aGlzLmdldExvY2FsU3RyZWFtcyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gc2VsZi5sb2NhbFN0cmVhbXM7IH07CiAgICAgIHRoaXMuZ2V0UmVtb3RlU3RyZWFtcyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gc2VsZi5yZW1vdGVTdHJlYW1zOyB9OwoKICAgICAgdGhpcy5sb2NhbERlc2NyaXB0aW9uID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgdHlwZTogJycsCiAgICAgICAgc2RwOiAnJwogICAgICB9KTsKICAgICAgdGhpcy5yZW1vdGVEZXNjcmlwdGlvbiA9IG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oewogICAgICAgIHR5cGU6ICcnLAogICAgICAgIHNkcDogJycKICAgICAgfSk7CiAgICAgIHRoaXMuc2lnbmFsaW5nU3RhdGUgPSAnc3RhYmxlJzsKICAgICAgdGhpcy5pY2VDb25uZWN0aW9uU3RhdGUgPSAnbmV3JzsKCiAgICAgIHRoaXMuaWNlT3B0aW9ucyA9IHsKICAgICAgICBnYXRoZXJQb2xpY3k6ICdhbGwnLAogICAgICAgIGljZVNlcnZlcnM6IFtdCiAgICAgIH07CiAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeSkgewogICAgICAgIHN3aXRjaCAoY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeSkgewogICAgICAgICAgY2FzZSAnYWxsJzoKICAgICAgICAgIGNhc2UgJ3JlbGF5JzoKICAgICAgICAgICAgdGhpcy5pY2VPcHRpb25zLmdhdGhlclBvbGljeSA9IGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3k7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnbm9uZSc6CiAgICAgICAgICAgIC8vIEZJWE1FOiByZW1vdmUgb25jZSBpbXBsZW1lbnRhdGlvbiBhbmQgc3BlYyBoYXZlIGFkZGVkIHRoaXMuCiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ljZVRyYW5zcG9ydFBvbGljeSAibm9uZSIgbm90IHN1cHBvcnRlZCcpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5pY2VTZXJ2ZXJzKSB7CiAgICAgICAgLy8gRWRnZSBkb2VzIG5vdCBsaWtlCiAgICAgICAgLy8gMSkgc3R1bjoKICAgICAgICAvLyAyKSB0dXJuOiB0aGF0IGRvZXMgbm90IGhhdmUgYWxsIG9mIHR1cm46aG9zdDpwb3J0P3RyYW5zcG9ydD11ZHAKICAgICAgICAvLyAzKSBhbiBhcnJheSBvZiB1cmxzCiAgICAgICAgY29uZmlnLmljZVNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbihzZXJ2ZXIpIHsKICAgICAgICAgIGlmIChzZXJ2ZXIudXJscykgewogICAgICAgICAgICB2YXIgdXJsOwogICAgICAgICAgICBpZiAodHlwZW9mKHNlcnZlci51cmxzKSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICB1cmwgPSBzZXJ2ZXIudXJsczsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB1cmwgPSBzZXJ2ZXIudXJsc1swXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3RyYW5zcG9ydD11ZHAnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICBzZWxmLmljZVNlcnZlcnMucHVzaCh7CiAgICAgICAgICAgICAgICB1c2VybmFtZTogc2VydmVyLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgY3JlZGVudGlhbDogc2VydmVyLmNyZWRlbnRpYWwsCiAgICAgICAgICAgICAgICB1cmxzOiB1cmwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICAvLyBwZXItdHJhY2sgaWNlR2F0aGVycywgaWNlVHJhbnNwb3J0cywgZHRsc1RyYW5zcG9ydHMsIHJ0cFNlbmRlcnMsIC4uLgogICAgICAvLyBldmVyeXRoaW5nIHRoYXQgaXMgbmVlZGVkIHRvIGRlc2NyaWJlIGEgU0RQIG0tbGluZS4KICAgICAgdGhpcy50cmFuc2NlaXZlcnMgPSBbXTsKCiAgICAgIC8vIHNpbmNlIHRoZSBpY2VHYXRoZXJlciBpcyBjdXJyZW50bHkgY3JlYXRlZCBpbiBjcmVhdGVPZmZlciBidXQgd2UKICAgICAgLy8gbXVzdCBub3QgZW1pdCBjYW5kaWRhdGVzIHVudGlsIGFmdGVyIHNldExvY2FsRGVzY3JpcHRpb24gd2UgYnVmZmVyCiAgICAgIC8vIHRoZW0gaW4gdGhpcyBhcnJheS4KICAgICAgdGhpcy5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyID0gW107CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2VtaXRCdWZmZXJlZENhbmRpZGF0ZXMgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAvLyBGSVhNRTogbmVlZCB0byBhcHBseSBpY2UgY2FuZGlkYXRlcyBpbiBhIHdheSB3aGljaCBpcyBhc3luYyBidXQgaW4tb3JkZXIKICAgICAgdGhpcy5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICBpZiAoc2VsZi5vbmljZWNhbmRpZGF0ZSAhPT0gbnVsbCkgewogICAgICAgICAgc2VsZi5vbmljZWNhbmRpZGF0ZShldmVudCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyID0gW107CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgIC8vIENsb25lIGlzIG5lY2Vzc2FyeSBmb3IgbG9jYWwgZGVtb3MgbW9zdGx5LCBhdHRhY2hpbmcgZGlyZWN0bHkKICAgICAgLy8gdG8gdHdvIGRpZmZlcmVudCBzZW5kZXJzIGRvZXMgbm90IHdvcmsgKGJ1aWxkIDEwNTQ3KS4KICAgICAgdGhpcy5sb2NhbFN0cmVhbXMucHVzaChzdHJlYW0uY2xvbmUoKSk7CiAgICAgIHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgIHZhciBpZHggPSB0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHN0cmVhbSk7CiAgICAgIGlmIChpZHggPiAtMSkgewogICAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnNwbGljZShpZHgsIDEpOwogICAgICAgIHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCk7CiAgICAgIH0KICAgIH07CgogICAgLy8gRGV0ZXJtaW5lcyB0aGUgaW50ZXJzZWN0aW9uIG9mIGxvY2FsIGFuZCByZW1vdGUgY2FwYWJpbGl0aWVzLgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzID0KICAgICAgICBmdW5jdGlvbihsb2NhbENhcGFiaWxpdGllcywgcmVtb3RlQ2FwYWJpbGl0aWVzKSB7CiAgICAgIHZhciBjb21tb25DYXBhYmlsaXRpZXMgPSB7CiAgICAgICAgY29kZWNzOiBbXSwKICAgICAgICBoZWFkZXJFeHRlbnNpb25zOiBbXSwKICAgICAgICBmZWNNZWNoYW5pc21zOiBbXQogICAgICB9OwogICAgICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihsQ29kZWMpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciByQ29kZWMgPSByZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzW2ldOwogICAgICAgICAgaWYgKGxDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IHJDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgJiYKICAgICAgICAgICAgICBsQ29kZWMuY2xvY2tSYXRlID09PSByQ29kZWMuY2xvY2tSYXRlICYmCiAgICAgICAgICAgICAgbENvZGVjLm51bUNoYW5uZWxzID09PSByQ29kZWMubnVtQ2hhbm5lbHMpIHsKICAgICAgICAgICAgLy8gcHVzaCByQ29kZWMgc28gd2UgcmVwbHkgd2l0aCBvZmZlcmVyIHBheWxvYWQgdHlwZQogICAgICAgICAgICBjb21tb25DYXBhYmlsaXRpZXMuY29kZWNzLnB1c2gockNvZGVjKTsKCiAgICAgICAgICAgIC8vIEZJWE1FOiBhbHNvIG5lZWQgdG8gZGV0ZXJtaW5lIGludGVyc2VjdGlvbiBiZXR3ZWVuCiAgICAgICAgICAgIC8vIC5ydGNwRmVlZGJhY2sgYW5kIC5wYXJhbWV0ZXJzCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CgogICAgICBsb2NhbENhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24obEhlYWRlckV4dGVuc2lvbikgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciBySGVhZGVyRXh0ZW5zaW9uID0gcmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnNbaV07CiAgICAgICAgICBpZiAobEhlYWRlckV4dGVuc2lvbi51cmkgPT09IHJIZWFkZXJFeHRlbnNpb24udXJpKSB7CiAgICAgICAgICAgIGNvbW1vbkNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zLnB1c2gockhlYWRlckV4dGVuc2lvbik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvLyBGSVhNRTogZmVjTWVjaGFuaXNtcwogICAgICByZXR1cm4gY29tbW9uQ2FwYWJpbGl0aWVzOwogICAgfTsKCiAgICAvLyBDcmVhdGUgSUNFIGdhdGhlcmVyLCBJQ0UgdHJhbnNwb3J0IGFuZCBEVExTIHRyYW5zcG9ydC4KICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2NyZWF0ZUljZUFuZER0bHNUcmFuc3BvcnRzID0KICAgICAgICBmdW5jdGlvbihtaWQsIHNkcE1MaW5lSW5kZXgpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgaWNlR2F0aGVyZXIgPSBuZXcgUlRDSWNlR2F0aGVyZXIoc2VsZi5pY2VPcHRpb25zKTsKICAgICAgdmFyIGljZVRyYW5zcG9ydCA9IG5ldyBSVENJY2VUcmFuc3BvcnQoaWNlR2F0aGVyZXIpOwogICAgICBpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlID0gZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgdmFyIGV2ZW50ID0ge307CiAgICAgICAgZXZlbnQuY2FuZGlkYXRlID0ge3NkcE1pZDogbWlkLCBzZHBNTGluZUluZGV4OiBzZHBNTGluZUluZGV4fTsKCiAgICAgICAgdmFyIGNhbmQgPSBldnQuY2FuZGlkYXRlOwogICAgICAgIC8vIEVkZ2UgZW1pdHMgYW4gZW1wdHkgb2JqZWN0IGZvciBSVENJY2VDYW5kaWRhdGVDb21wbGV0ZeKApQogICAgICAgIGlmICghY2FuZCB8fCBPYmplY3Qua2V5cyhjYW5kKS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIC8vIHBvbHlmaWxsIHNpbmNlIFJUQ0ljZUdhdGhlcmVyLnN0YXRlIGlzIG5vdCBpbXBsZW1lbnRlZCBpbiBFZGdlIDEwNTQ3IHlldC4KICAgICAgICAgIGlmIChpY2VHYXRoZXJlci5zdGF0ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGljZUdhdGhlcmVyLnN0YXRlID0gJ2NvbXBsZXRlZCc7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gRW1pdCBhIGNhbmRpZGF0ZSB3aXRoIHR5cGUgZW5kT2ZDYW5kaWRhdGVzIHRvIG1ha2UgdGhlIHNhbXBsZXMgd29yay4KICAgICAgICAgIC8vIEVkZ2UgcmVxdWlyZXMgYWRkSWNlQ2FuZGlkYXRlIHdpdGggdGhpcyBlbXB0eSBjYW5kaWRhdGUgdG8gc3RhcnQgY2hlY2tpbmcuCiAgICAgICAgICAvLyBUaGUgcmVhbCBzb2x1dGlvbiBpcyB0byBzaWduYWwgZW5kLW9mLWNhbmRpZGF0ZXMgdG8gdGhlIG90aGVyIHNpZGUgd2hlbgogICAgICAgICAgLy8gZ2V0dGluZyB0aGUgbnVsbCBjYW5kaWRhdGUgYnV0IHNvbWUgYXBwcyAobGlrZSB0aGUgc2FtcGxlcykgZG9uJ3QgZG8gdGhhdC4KICAgICAgICAgIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgPQogICAgICAgICAgICAgICdjYW5kaWRhdGU6MSAxIHVkcCAxIDAuMC4wLjAgOSB0eXAgZW5kT2ZDYW5kaWRhdGVzJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gUlRDSWNlQ2FuZGlkYXRlIGRvZXNuJ3QgaGF2ZSBhIGNvbXBvbmVudCwgbmVlZHMgdG8gYmUgYWRkZWQKICAgICAgICAgIGNhbmQuY29tcG9uZW50ID0gaWNlVHJhbnNwb3J0LmNvbXBvbmVudCA9PT0gJ1JUQ1AnID8gMiA6IDE7CiAgICAgICAgICBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlID0gU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUoY2FuZCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgY29tcGxldGUgPSBzZWxmLnRyYW5zY2VpdmVycy5ldmVyeShmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmCiAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuc3RhdGUgPT09ICdjb21wbGV0ZWQnOwogICAgICAgIH0pOwogICAgICAgIC8vIEZJWE1FOiB1cGRhdGUgLmxvY2FsRGVzY3JpcHRpb24gd2l0aCBjYW5kaWRhdGUgYW5kIChwb3RlbnRpYWxseSkgZW5kLW9mLWNhbmRpZGF0ZXMuCiAgICAgICAgLy8gICAgIFRvIG1ha2UgdGhpcyBoYXJkZXIsIHRoZSBnYXRoZXJlciBtaWdodCBlbWl0IGNhbmRpZGF0ZXMgYmVmb3JlIGxvY2FsZGVzY3JpcHRpb24KICAgICAgICAvLyAgICAgaXMgc2V0LiBUbyBtYWtlIHRoaW5ncyB3b3JzZSwgZ2F0aGVyLmdldExvY2FsQ2FuZGlkYXRlcyBzdGlsbCBlcnJvcnMgaW4KICAgICAgICAvLyAgICAgRWRnZSAxMDU0NyB3aGVuIG5vIGNhbmRpZGF0ZXMgaGF2ZSBiZWVuIGdhdGhlcmVkIHlldC4KCiAgICAgICAgaWYgKHNlbGYub25pY2VjYW5kaWRhdGUgIT09IG51bGwpIHsKICAgICAgICAgIC8vIEVtaXQgY2FuZGlkYXRlIGlmIGxvY2FsRGVzY3JpcHRpb24gaXMgc2V0LgogICAgICAgICAgLy8gQWxzbyBlbWl0cyBudWxsIGNhbmRpZGF0ZSB3aGVuIGFsbCBnYXRoZXJlcnMgYXJlIGNvbXBsZXRlLgogICAgICAgICAgaWYgKHNlbGYubG9jYWxEZXNjcmlwdGlvbiAmJiBzZWxmLmxvY2FsRGVzY3JpcHRpb24udHlwZSA9PT0gJycpIHsKICAgICAgICAgICAgc2VsZi5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyLnB1c2goZXZlbnQpOwogICAgICAgICAgICBpZiAoY29tcGxldGUpIHsKICAgICAgICAgICAgICBzZWxmLl9sb2NhbEljZUNhbmRpZGF0ZXNCdWZmZXIucHVzaCh7fSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlbGYub25pY2VjYW5kaWRhdGUoZXZlbnQpOwogICAgICAgICAgICBpZiAoY29tcGxldGUpIHsKICAgICAgICAgICAgICBzZWxmLm9uaWNlY2FuZGlkYXRlKHt9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWNlVHJhbnNwb3J0Lm9uaWNlc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICBzZWxmLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTsKICAgICAgfTsKCiAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gbmV3IFJUQ0R0bHNUcmFuc3BvcnQoaWNlVHJhbnNwb3J0KTsKICAgICAgZHRsc1RyYW5zcG9ydC5vbmR0bHNzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHNlbGYuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSgpOwogICAgICB9OwogICAgICBkdGxzVHJhbnNwb3J0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICAvLyBvbmVycm9yIGRvZXMgbm90IHNldCBzdGF0ZSB0byBmYWlsZWQgYnkgaXRzZWxmLgogICAgICAgIGR0bHNUcmFuc3BvcnQuc3RhdGUgPSAnZmFpbGVkJzsKICAgICAgICBzZWxmLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTsKICAgICAgfTsKCiAgICAgIHJldHVybiB7CiAgICAgICAgaWNlR2F0aGVyZXI6IGljZUdhdGhlcmVyLAogICAgICAgIGljZVRyYW5zcG9ydDogaWNlVHJhbnNwb3J0LAogICAgICAgIGR0bHNUcmFuc3BvcnQ6IGR0bHNUcmFuc3BvcnQKICAgICAgfTsKICAgIH07CgogICAgLy8gU3RhcnQgdGhlIFJUUCBTZW5kZXIgYW5kIFJlY2VpdmVyIGZvciBhIHRyYW5zY2VpdmVyLgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fdHJhbnNjZWl2ZSA9IGZ1bmN0aW9uKHRyYW5zY2VpdmVyLAogICAgICAgIHNlbmQsIHJlY3YpIHsKICAgICAgdmFyIHBhcmFtcyA9IHRoaXMuX2dldENvbW1vbkNhcGFiaWxpdGllcyh0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcywKICAgICAgICAgIHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyk7CiAgICAgIGlmIChzZW5kICYmIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgICAgIHBhcmFtcy5lbmNvZGluZ3MgPSBbewogICAgICAgICAgc3NyYzogdHJhbnNjZWl2ZXIuc2VuZFNzcmMKICAgICAgICB9XTsKICAgICAgICBwYXJhbXMucnRjcCA9IHsKICAgICAgICAgIGNuYW1lOiBsb2NhbENOYW1lLAogICAgICAgICAgc3NyYzogdHJhbnNjZWl2ZXIucmVjdlNzcmMKICAgICAgICB9OwogICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci5zZW5kKHBhcmFtcyk7CiAgICAgIH0KICAgICAgaWYgKHJlY3YgJiYgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHsKICAgICAgICBwYXJhbXMuZW5jb2RpbmdzID0gW3sKICAgICAgICAgIHNzcmM6IHRyYW5zY2VpdmVyLnJlY3ZTc3JjCiAgICAgICAgfV07CiAgICAgICAgcGFyYW1zLnJ0Y3AgPSB7CiAgICAgICAgICBjbmFtZTogdHJhbnNjZWl2ZXIuY25hbWUsCiAgICAgICAgICBzc3JjOiB0cmFuc2NlaXZlci5zZW5kU3NyYwogICAgICAgIH07CiAgICAgICAgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIucmVjZWl2ZShwYXJhbXMpOwogICAgICB9CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbiA9CiAgICAgICAgZnVuY3Rpb24oZGVzY3JpcHRpb24pIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJykgewogICAgICAgIGlmICghdGhpcy5fcGVuZGluZ09mZmVyKSB7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudHJhbnNjZWl2ZXJzID0gdGhpcy5fcGVuZGluZ09mZmVyOwogICAgICAgICAgZGVsZXRlIHRoaXMuX3BlbmRpbmdPZmZlcjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ2Fuc3dlcicpIHsKICAgICAgICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKHNlbGYucmVtb3RlRGVzY3JpcHRpb24uc2RwKTsKICAgICAgICB2YXIgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpOwogICAgICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTsKICAgICAgICAgIHZhciBpY2VHYXRoZXJlciA9IHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyOwogICAgICAgICAgdmFyIGljZVRyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydDsKICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydDsKICAgICAgICAgIHZhciBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzOwogICAgICAgICAgdmFyIHJlbW90ZUNhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllczsKICAgICAgICAgIHZhciByZWplY3RlZCA9IG1lZGlhU2VjdGlvbi5zcGxpdCgnXG4nLCAxKVswXQogICAgICAgICAgICAgIC5zcGxpdCgnICcsIDIpWzFdID09PSAnMCc7CgogICAgICAgICAgaWYgKCFyZWplY3RlZCkgewogICAgICAgICAgICB2YXIgcmVtb3RlSWNlUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMobWVkaWFTZWN0aW9uLAogICAgICAgICAgICAgICAgc2Vzc2lvbnBhcnQpOwogICAgICAgICAgICBpY2VUcmFuc3BvcnQuc3RhcnQoaWNlR2F0aGVyZXIsIHJlbW90ZUljZVBhcmFtZXRlcnMsICdjb250cm9sbGVkJyk7CgogICAgICAgICAgICB2YXIgcmVtb3RlRHRsc1BhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sCiAgICAgICAgICAgICAgc2Vzc2lvbnBhcnQpOwogICAgICAgICAgICBkdGxzVHJhbnNwb3J0LnN0YXJ0KHJlbW90ZUR0bHNQYXJhbWV0ZXJzKTsKCiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb24gb2YgY2FwYWJpbGl0aWVzLgogICAgICAgICAgICB2YXIgcGFyYW1zID0gc2VsZi5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKGxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzKTsKCiAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBSVENSdHBTZW5kZXIuIFRoZSBSVENSdHBSZWNlaXZlciBmb3IgdGhpcyB0cmFuc2NlaXZlcgogICAgICAgICAgICAvLyBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgaW4gc2V0UmVtb3RlRGVzY3JpcHRpb24uCiAgICAgICAgICAgIHNlbGYuX3RyYW5zY2VpdmUodHJhbnNjZWl2ZXIsCiAgICAgICAgICAgICAgICBwYXJhbXMuY29kZWNzLmxlbmd0aCA+IDAsCiAgICAgICAgICAgICAgICBmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMubG9jYWxEZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uOwogICAgICBzd2l0Y2ggKGRlc2NyaXB0aW9uLnR5cGUpIHsKICAgICAgICBjYXNlICdvZmZlcic6CiAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1sb2NhbC1vZmZlcicpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnYW5zd2VyJzoKICAgICAgICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdzdGFibGUnKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd1bnN1cHBvcnRlZCB0eXBlICInICsgZGVzY3JpcHRpb24udHlwZSArICciJyk7CiAgICAgIH0KCiAgICAgIC8vIElmIGEgc3VjY2VzcyBjYWxsYmFjayB3YXMgcHJvdmlkZWQsIGVtaXQgSUNFIGNhbmRpZGF0ZXMgYWZ0ZXIgaXQgaGFzIGJlZW4KICAgICAgLy8gZXhlY3V0ZWQuIE90aGVyd2lzZSwgZW1pdCBjYWxsYmFjayBhZnRlciB0aGUgUHJvbWlzZSBpcyByZXNvbHZlZC4KICAgICAgdmFyIGhhc0NhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYKICAgICAgICB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nOwogICAgICBpZiAoaGFzQ2FsbGJhY2spIHsKICAgICAgICB2YXIgY2IgPSBhcmd1bWVudHNbMV07CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBjYigpOwogICAgICAgICAgc2VsZi5fZW1pdEJ1ZmZlcmVkQ2FuZGlkYXRlcygpOwogICAgICAgIH0sIDApOwogICAgICB9CiAgICAgIHZhciBwID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgIHAudGhlbihmdW5jdGlvbigpIHsKICAgICAgICBpZiAoIWhhc0NhbGxiYWNrKSB7CiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChzZWxmLl9lbWl0QnVmZmVyZWRDYW5kaWRhdGVzLmJpbmQoc2VsZiksIDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBwOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID0KICAgICAgICBmdW5jdGlvbihkZXNjcmlwdGlvbikgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBzdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTsKICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhkZXNjcmlwdGlvbi5zZHApOwogICAgICB2YXIgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpOwogICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkgewogICAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAgICAgICB2YXIgbWxpbmUgPSBsaW5lc1swXS5zdWJzdHIoMikuc3BsaXQoJyAnKTsKICAgICAgICB2YXIga2luZCA9IG1saW5lWzBdOwogICAgICAgIHZhciByZWplY3RlZCA9IG1saW5lWzFdID09PSAnMCc7CiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IFNEUFV0aWxzLmdldERpcmVjdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTsKCiAgICAgICAgdmFyIHRyYW5zY2VpdmVyOwogICAgICAgIHZhciBpY2VHYXRoZXJlcjsKICAgICAgICB2YXIgaWNlVHJhbnNwb3J0OwogICAgICAgIHZhciBkdGxzVHJhbnNwb3J0OwogICAgICAgIHZhciBydHBTZW5kZXI7CiAgICAgICAgdmFyIHJ0cFJlY2VpdmVyOwogICAgICAgIHZhciBzZW5kU3NyYzsKICAgICAgICB2YXIgcmVjdlNzcmM7CiAgICAgICAgdmFyIGxvY2FsQ2FwYWJpbGl0aWVzOwoKICAgICAgICAvLyBGSVhNRTogZW5zdXJlIHRoZSBtZWRpYVNlY3Rpb24gaGFzIHJ0Y3AtbXV4IHNldC4KICAgICAgICB2YXIgcmVtb3RlQ2FwYWJpbGl0aWVzID0gU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7CiAgICAgICAgdmFyIHJlbW90ZUljZVBhcmFtZXRlcnM7CiAgICAgICAgdmFyIHJlbW90ZUR0bHNQYXJhbWV0ZXJzOwogICAgICAgIGlmICghcmVqZWN0ZWQpIHsKICAgICAgICAgIHJlbW90ZUljZVBhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbiwKICAgICAgICAgICAgICBzZXNzaW9ucGFydCk7CiAgICAgICAgICByZW1vdGVEdGxzUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbiwKICAgICAgICAgICAgICBzZXNzaW9ucGFydCk7CiAgICAgICAgfQogICAgICAgIHZhciBtaWQgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1pZDonKVswXS5zdWJzdHIoNik7CgogICAgICAgIHZhciBjbmFtZTsKICAgICAgICAvLyBHZXRzIHRoZSBmaXJzdCBTU1JDLiBOb3RlIHRoYXQgd2l0aCBSVFggdGhlcmUgbWlnaHQgYmUgbXVsdGlwbGUgU1NSQ3MuCiAgICAgICAgdmFyIHJlbW90ZVNzcmMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JykKICAgICAgICAgICAgLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKG9iaikgewogICAgICAgICAgICAgIHJldHVybiBvYmouYXR0cmlidXRlID09PSAnY25hbWUnOwogICAgICAgICAgICB9KVswXTsKICAgICAgICBpZiAocmVtb3RlU3NyYykgewogICAgICAgICAgcmVjdlNzcmMgPSBwYXJzZUludChyZW1vdGVTc3JjLnNzcmMsIDEwKTsKICAgICAgICAgIGNuYW1lID0gcmVtb3RlU3NyYy52YWx1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnb2ZmZXInKSB7CiAgICAgICAgICB2YXIgdHJhbnNwb3J0cyA9IHNlbGYuX2NyZWF0ZUljZUFuZER0bHNUcmFuc3BvcnRzKG1pZCwgc2RwTUxpbmVJbmRleCk7CgogICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMgPSBSVENSdHBSZWNlaXZlci5nZXRDYXBhYmlsaXRpZXMoa2luZCk7CiAgICAgICAgICBzZW5kU3NyYyA9ICgyICogc2RwTUxpbmVJbmRleCArIDIpICogMTAwMTsKCiAgICAgICAgICBydHBSZWNlaXZlciA9IG5ldyBSVENSdHBSZWNlaXZlcih0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsIGtpbmQpOwoKICAgICAgICAgIC8vIEZJWE1FOiBub3QgY29ycmVjdCB3aGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBzdHJlYW1zIGJ1dCB0aGF0IGlzCiAgICAgICAgICAvLyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbiB0aGlzIHNoaW0uCiAgICAgICAgICBzdHJlYW0uYWRkVHJhY2socnRwUmVjZWl2ZXIudHJhY2spOwoKICAgICAgICAgIC8vIEZJWE1FOiBsb29rIGF0IGRpcmVjdGlvbi4KICAgICAgICAgIGlmIChzZWxmLmxvY2FsU3RyZWFtcy5sZW5ndGggPiAwICYmCiAgICAgICAgICAgICAgc2VsZi5sb2NhbFN0cmVhbXNbMF0uZ2V0VHJhY2tzKCkubGVuZ3RoID49IHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAgICAgLy8gRklYTUU6IGFjdHVhbGx5IG1vcmUgY29tcGxpY2F0ZWQsIG5lZWRzIHRvIG1hdGNoIHR5cGVzIGV0YwogICAgICAgICAgICB2YXIgbG9jYWx0cmFjayA9IHNlbGYubG9jYWxTdHJlYW1zWzBdLmdldFRyYWNrcygpW3NkcE1MaW5lSW5kZXhdOwogICAgICAgICAgICBydHBTZW5kZXIgPSBuZXcgUlRDUnRwU2VuZGVyKGxvY2FsdHJhY2ssIHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCk7CiAgICAgICAgICB9CgogICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7CiAgICAgICAgICAgIGljZUdhdGhlcmVyOiB0cmFuc3BvcnRzLmljZUdhdGhlcmVyLAogICAgICAgICAgICBpY2VUcmFuc3BvcnQ6IHRyYW5zcG9ydHMuaWNlVHJhbnNwb3J0LAogICAgICAgICAgICBkdGxzVHJhbnNwb3J0OiB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsCiAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzOiBsb2NhbENhcGFiaWxpdGllcywKICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzOiByZW1vdGVDYXBhYmlsaXRpZXMsCiAgICAgICAgICAgIHJ0cFNlbmRlcjogcnRwU2VuZGVyLAogICAgICAgICAgICBydHBSZWNlaXZlcjogcnRwUmVjZWl2ZXIsCiAgICAgICAgICAgIGtpbmQ6IGtpbmQsCiAgICAgICAgICAgIG1pZDogbWlkLAogICAgICAgICAgICBjbmFtZTogY25hbWUsCiAgICAgICAgICAgIHNlbmRTc3JjOiBzZW5kU3NyYywKICAgICAgICAgICAgcmVjdlNzcmM6IHJlY3ZTc3JjCiAgICAgICAgICB9OwogICAgICAgICAgLy8gU3RhcnQgdGhlIFJUQ1J0cFJlY2VpdmVyIG5vdy4gVGhlIFJUUFNlbmRlciBpcyBzdGFydGVkIGluIHNldExvY2FsRGVzY3JpcHRpb24uCiAgICAgICAgICBzZWxmLl90cmFuc2NlaXZlKHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLAogICAgICAgICAgICAgIGZhbHNlLAogICAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpOwogICAgICAgIH0gZWxzZSBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ2Fuc3dlcicgJiYgIXJlamVjdGVkKSB7CiAgICAgICAgICB0cmFuc2NlaXZlciA9IHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdOwogICAgICAgICAgaWNlR2F0aGVyZXIgPSB0cmFuc2NlaXZlci5pY2VHYXRoZXJlcjsKICAgICAgICAgIGljZVRyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydDsKICAgICAgICAgIGR0bHNUcmFuc3BvcnQgPSB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0OwogICAgICAgICAgcnRwU2VuZGVyID0gdHJhbnNjZWl2ZXIucnRwU2VuZGVyOwogICAgICAgICAgcnRwUmVjZWl2ZXIgPSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgICAgIHNlbmRTc3JjID0gdHJhbnNjZWl2ZXIuc2VuZFNzcmM7CiAgICAgICAgICAvL3JlY3ZTc3JjID0gdHJhbnNjZWl2ZXIucmVjdlNzcmM7CiAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzOwoKICAgICAgICAgIHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLnJlY3ZTc3JjID0gcmVjdlNzcmM7CiAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZW1vdGVDYXBhYmlsaXRpZXMgPQogICAgICAgICAgICAgIHJlbW90ZUNhcGFiaWxpdGllczsKICAgICAgICAgIHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmNuYW1lID0gY25hbWU7CgogICAgICAgICAgaWNlVHJhbnNwb3J0LnN0YXJ0KGljZUdhdGhlcmVyLCByZW1vdGVJY2VQYXJhbWV0ZXJzLCAnY29udHJvbGxpbmcnKTsKICAgICAgICAgIGR0bHNUcmFuc3BvcnQuc3RhcnQocmVtb3RlRHRsc1BhcmFtZXRlcnMpOwoKICAgICAgICAgIHNlbGYuX3RyYW5zY2VpdmUodHJhbnNjZWl2ZXIsCiAgICAgICAgICAgICAgZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3JlY3Zvbmx5JywKICAgICAgICAgICAgICBkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAnc2VuZG9ubHknKTsKCiAgICAgICAgICBpZiAocnRwUmVjZWl2ZXIgJiYKICAgICAgICAgICAgICAoZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5JykpIHsKICAgICAgICAgICAgc3RyZWFtLmFkZFRyYWNrKHJ0cFJlY2VpdmVyLnRyYWNrKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEZJWE1FOiBhY3R1YWxseSB0aGUgcmVjZWl2ZXIgc2hvdWxkIGJlIGNyZWF0ZWQgbGF0ZXIuCiAgICAgICAgICAgIGRlbGV0ZSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdGhpcy5yZW1vdGVEZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uOwogICAgICBzd2l0Y2ggKGRlc2NyaXB0aW9uLnR5cGUpIHsKICAgICAgICBjYXNlICdvZmZlcic6CiAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1yZW1vdGUtb2ZmZXInKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2Fuc3dlcic6CiAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnc3RhYmxlJyk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndW5zdXBwb3J0ZWQgdHlwZSAiJyArIGRlc2NyaXB0aW9uLnR5cGUgKyAnIicpOwogICAgICB9CiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChzZWxmLm9uYWRkc3RyZWFtICE9PSBudWxsICYmIHN0cmVhbS5nZXRUcmFja3MoKS5sZW5ndGgpIHsKICAgICAgICAgIHNlbGYucmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7CiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5vbmFkZHN0cmVhbSh7c3RyZWFtOiBzdHJlYW19KTsKICAgICAgICAgIH0sIDApOwogICAgICAgIH0KICAgICAgfSwgMCk7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzFdLCAwKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHsKICAgICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIC8qIG5vdCB5ZXQKICAgICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmNsb3NlKCk7CiAgICAgICAgfQogICAgICAgICovCiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCkgewogICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0b3AoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuc3RvcCgpOwogICAgICAgIH0KICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuc3RvcCgpOwogICAgICAgIH0KICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvLyBGSVhNRTogY2xlYW4gdXAgdHJhY2tzLCBsb2NhbCBzdHJlYW1zLCByZW1vdGUgc3RyZWFtcywgZXRjCiAgICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdjbG9zZWQnKTsKICAgIH07CgogICAgLy8gVXBkYXRlIHRoZSBzaWduYWxpbmcgc3RhdGUuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVTaWduYWxpbmdTdGF0ZSA9CiAgICAgICAgZnVuY3Rpb24obmV3U3RhdGUpIHsKICAgICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9IG5ld1N0YXRlOwogICAgICBpZiAodGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlICE9PSBudWxsKSB7CiAgICAgICAgdGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlKCk7CiAgICAgIH0KICAgIH07CgogICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdG8gZmlyZSB0aGUgbmVnb3RpYXRpb25uZWVkZWQgZXZlbnQuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCA9CiAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgIC8vIEZpcmUgYXdheSAoZm9yIG5vdykuCiAgICAgIGlmICh0aGlzLm9ubmVnb3RpYXRpb25uZWVkZWQgIT09IG51bGwpIHsKICAgICAgICB0aGlzLm9ubmVnb3RpYXRpb25uZWVkZWQoKTsKICAgICAgfQogICAgfTsKCiAgICAvLyBVcGRhdGUgdGhlIGNvbm5lY3Rpb24gc3RhdGUuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVDb25uZWN0aW9uU3RhdGUgPQogICAgICAgIGZ1bmN0aW9uKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBuZXdTdGF0ZTsKICAgICAgdmFyIHN0YXRlcyA9IHsKICAgICAgICAnbmV3JzogMCwKICAgICAgICBjbG9zZWQ6IDAsCiAgICAgICAgY29ubmVjdGluZzogMCwKICAgICAgICBjaGVja2luZzogMCwKICAgICAgICBjb25uZWN0ZWQ6IDAsCiAgICAgICAgY29tcGxldGVkOiAwLAogICAgICAgIGZhaWxlZDogMAogICAgICB9OwogICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgc3RhdGVzW3RyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZV0rKzsKICAgICAgICBzdGF0ZXNbdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5zdGF0ZV0rKzsKICAgICAgfSk7CiAgICAgIC8vIElDRVRyYW5zcG9ydC5jb21wbGV0ZWQgYW5kIGNvbm5lY3RlZCBhcmUgdGhlIHNhbWUgZm9yIHRoaXMgcHVycG9zZS4KICAgICAgc3RhdGVzLmNvbm5lY3RlZCArPSBzdGF0ZXMuY29tcGxldGVkOwoKICAgICAgbmV3U3RhdGUgPSAnbmV3JzsKICAgICAgaWYgKHN0YXRlcy5mYWlsZWQgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnZmFpbGVkJzsKICAgICAgfSBlbHNlIGlmIChzdGF0ZXMuY29ubmVjdGluZyA+IDAgfHwgc3RhdGVzLmNoZWNraW5nID4gMCkgewogICAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RpbmcnOwogICAgICB9IGVsc2UgaWYgKHN0YXRlcy5kaXNjb25uZWN0ZWQgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnZGlzY29ubmVjdGVkJzsKICAgICAgfSBlbHNlIGlmIChzdGF0ZXMubmV3ID4gMCkgewogICAgICAgIG5ld1N0YXRlID0gJ25ldyc7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbm5lY3RpbmcgPiAwIHx8IHN0YXRlcy5jb21wbGV0ZWQgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnY29ubmVjdGVkJzsKICAgICAgfQoKICAgICAgaWYgKG5ld1N0YXRlICE9PSBzZWxmLmljZUNvbm5lY3Rpb25TdGF0ZSkgewogICAgICAgIHNlbGYuaWNlQ29ubmVjdGlvblN0YXRlID0gbmV3U3RhdGU7CiAgICAgICAgaWYgKHRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgIT09IG51bGwpIHsKICAgICAgICAgIHRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlciA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIGlmICh0aGlzLl9wZW5kaW5nT2ZmZXIpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyZWF0ZU9mZmVyIGNhbGxlZCB3aGlsZSB0aGVyZSBpcyBhIHBlbmRpbmcgb2ZmZXIuJyk7CiAgICAgIH0KICAgICAgdmFyIG9mZmVyT3B0aW9uczsKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1swXSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIG9mZmVyT3B0aW9ucyA9IGFyZ3VtZW50c1swXTsKICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7CiAgICAgICAgb2ZmZXJPcHRpb25zID0gYXJndW1lbnRzWzJdOwogICAgICB9CgogICAgICB2YXIgdHJhY2tzID0gW107CiAgICAgIHZhciBudW1BdWRpb1RyYWNrcyA9IDA7CiAgICAgIHZhciBudW1WaWRlb1RyYWNrcyA9IDA7CiAgICAgIC8vIERlZmF1bHQgdG8gc2VuZHJlY3YuCiAgICAgIGlmICh0aGlzLmxvY2FsU3RyZWFtcy5sZW5ndGgpIHsKICAgICAgICBudW1BdWRpb1RyYWNrcyA9IHRoaXMubG9jYWxTdHJlYW1zWzBdLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoOwogICAgICAgIG51bVZpZGVvVHJhY2tzID0gdGhpcy5sb2NhbFN0cmVhbXNbMF0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGg7CiAgICAgIH0KICAgICAgLy8gRGV0ZXJtaW5lIG51bWJlciBvZiBhdWRpbyBhbmQgdmlkZW8gdHJhY2tzIHdlIG5lZWQgdG8gc2VuZC9yZWN2LgogICAgICBpZiAob2ZmZXJPcHRpb25zKSB7CiAgICAgICAgLy8gUmVqZWN0IENocm9tZSBsZWdhY3kgY29uc3RyYWludHMuCiAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5tYW5kYXRvcnkgfHwgb2ZmZXJPcHRpb25zLm9wdGlvbmFsKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgICAgICdMZWdhY3kgbWFuZGF0b3J5L29wdGlvbmFsIGNvbnN0cmFpbnRzIG5vdCBzdXBwb3J0ZWQuJyk7CiAgICAgICAgfQogICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBudW1BdWRpb1RyYWNrcyA9IG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvOwogICAgICAgIH0KICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgbnVtVmlkZW9UcmFja3MgPSBvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVWaWRlbzsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMubG9jYWxTdHJlYW1zLmxlbmd0aCkgewogICAgICAgIC8vIFB1c2ggbG9jYWwgc3RyZWFtcy4KICAgICAgICB0aGlzLmxvY2FsU3RyZWFtc1swXS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7CiAgICAgICAgICB0cmFja3MucHVzaCh7CiAgICAgICAgICAgIGtpbmQ6IHRyYWNrLmtpbmQsCiAgICAgICAgICAgIHRyYWNrOiB0cmFjaywKICAgICAgICAgICAgd2FudFJlY2VpdmU6IHRyYWNrLmtpbmQgPT09ICdhdWRpbycgPwogICAgICAgICAgICAgICAgbnVtQXVkaW9UcmFja3MgPiAwIDogbnVtVmlkZW9UcmFja3MgPiAwCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICh0cmFjay5raW5kID09PSAnYXVkaW8nKSB7CiAgICAgICAgICAgIG51bUF1ZGlvVHJhY2tzLS07CiAgICAgICAgICB9IGVsc2UgaWYgKHRyYWNrLmtpbmQgPT09ICd2aWRlbycpIHsKICAgICAgICAgICAgbnVtVmlkZW9UcmFja3MtLTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICAvLyBDcmVhdGUgTS1saW5lcyBmb3IgcmVjdm9ubHkgc3RyZWFtcy4KICAgICAgd2hpbGUgKG51bUF1ZGlvVHJhY2tzID4gMCB8fCBudW1WaWRlb1RyYWNrcyA+IDApIHsKICAgICAgICBpZiAobnVtQXVkaW9UcmFja3MgPiAwKSB7CiAgICAgICAgICB0cmFja3MucHVzaCh7CiAgICAgICAgICAgIGtpbmQ6ICdhdWRpbycsCiAgICAgICAgICAgIHdhbnRSZWNlaXZlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICAgIG51bUF1ZGlvVHJhY2tzLS07CiAgICAgICAgfQogICAgICAgIGlmIChudW1WaWRlb1RyYWNrcyA+IDApIHsKICAgICAgICAgIHRyYWNrcy5wdXNoKHsKICAgICAgICAgICAga2luZDogJ3ZpZGVvJywKICAgICAgICAgICAgd2FudFJlY2VpdmU6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgbnVtVmlkZW9UcmFja3MtLTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZSgpOwogICAgICB2YXIgdHJhbnNjZWl2ZXJzID0gW107CiAgICAgIHRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKG1saW5lLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgLy8gRm9yIGVhY2ggdHJhY2ssIGNyZWF0ZSBhbiBpY2UgZ2F0aGVyZXIsIGljZSB0cmFuc3BvcnQsIGR0bHMgdHJhbnNwb3J0LAogICAgICAgIC8vIHBvdGVudGlhbGx5IHJ0cHNlbmRlciBhbmQgcnRwcmVjZWl2ZXIuCiAgICAgICAgdmFyIHRyYWNrID0gbWxpbmUudHJhY2s7CiAgICAgICAgdmFyIGtpbmQgPSBtbGluZS5raW5kOwogICAgICAgIHZhciBtaWQgPSBnZW5lcmF0ZUlkZW50aWZpZXIoKTsKCiAgICAgICAgdmFyIHRyYW5zcG9ydHMgPSBzZWxmLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cyhtaWQsIHNkcE1MaW5lSW5kZXgpOwoKICAgICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXMgPSBSVENSdHBTZW5kZXIuZ2V0Q2FwYWJpbGl0aWVzKGtpbmQpOwogICAgICAgIHZhciBydHBTZW5kZXI7CiAgICAgICAgdmFyIHJ0cFJlY2VpdmVyOwoKICAgICAgICAvLyBnZW5lcmF0ZSBhbiBzc3JjIG5vdywgdG8gYmUgdXNlZCBsYXRlciBpbiBydHBTZW5kZXIuc2VuZAogICAgICAgIHZhciBzZW5kU3NyYyA9ICgyICogc2RwTUxpbmVJbmRleCArIDEpICogMTAwMTsKICAgICAgICBpZiAodHJhY2spIHsKICAgICAgICAgIHJ0cFNlbmRlciA9IG5ldyBSVENSdHBTZW5kZXIodHJhY2ssIHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCk7CiAgICAgICAgfQoKICAgICAgICBpZiAobWxpbmUud2FudFJlY2VpdmUpIHsKICAgICAgICAgIHJ0cFJlY2VpdmVyID0gbmV3IFJUQ1J0cFJlY2VpdmVyKHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCwga2luZCk7CiAgICAgICAgfQoKICAgICAgICB0cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7CiAgICAgICAgICBpY2VHYXRoZXJlcjogdHJhbnNwb3J0cy5pY2VHYXRoZXJlciwKICAgICAgICAgIGljZVRyYW5zcG9ydDogdHJhbnNwb3J0cy5pY2VUcmFuc3BvcnQsCiAgICAgICAgICBkdGxzVHJhbnNwb3J0OiB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsCiAgICAgICAgICBsb2NhbENhcGFiaWxpdGllczogbG9jYWxDYXBhYmlsaXRpZXMsCiAgICAgICAgICByZW1vdGVDYXBhYmlsaXRpZXM6IG51bGwsCiAgICAgICAgICBydHBTZW5kZXI6IHJ0cFNlbmRlciwKICAgICAgICAgIHJ0cFJlY2VpdmVyOiBydHBSZWNlaXZlciwKICAgICAgICAgIGtpbmQ6IGtpbmQsCiAgICAgICAgICBtaWQ6IG1pZCwKICAgICAgICAgIHNlbmRTc3JjOiBzZW5kU3NyYywKICAgICAgICAgIHJlY3ZTc3JjOiBudWxsCiAgICAgICAgfTsKICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSB0cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF07CiAgICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlTWVkaWFTZWN0aW9uKHRyYW5zY2VpdmVyLAogICAgICAgICAgICB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcywgJ29mZmVyJywgc2VsZi5sb2NhbFN0cmVhbXNbMF0pOwogICAgICB9KTsKCiAgICAgIHRoaXMuX3BlbmRpbmdPZmZlciA9IHRyYW5zY2VpdmVyczsKICAgICAgdmFyIGRlc2MgPSBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHsKICAgICAgICB0eXBlOiAnb2ZmZXInLAogICAgICAgIHNkcDogc2RwCiAgICAgIH0pOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAmJiB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzBdLCAwLCBkZXNjKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRlc2MpOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlciA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBhbnN3ZXJPcHRpb25zOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzBdICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgYW5zd2VyT3B0aW9ucyA9IGFyZ3VtZW50c1swXTsKICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7CiAgICAgICAgYW5zd2VyT3B0aW9ucyA9IGFyZ3VtZW50c1syXTsKICAgICAgfQoKICAgICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKCk7CiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICAvLyBDYWxjdWxhdGUgaW50ZXJzZWN0aW9uIG9mIGNhcGFiaWxpdGllcy4KICAgICAgICB2YXIgY29tbW9uQ2FwYWJpbGl0aWVzID0gc2VsZi5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKAogICAgICAgICAgICB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcywKICAgICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzKTsKCiAgICAgICAgc2RwICs9IFNEUFV0aWxzLndyaXRlTWVkaWFTZWN0aW9uKHRyYW5zY2VpdmVyLCBjb21tb25DYXBhYmlsaXRpZXMsCiAgICAgICAgICAgICdhbnN3ZXInLCBzZWxmLmxvY2FsU3RyZWFtc1swXSk7CiAgICAgIH0pOwoKICAgICAgdmFyIGRlc2MgPSBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHsKICAgICAgICB0eXBlOiAnYW5zd2VyJywKICAgICAgICBzZHA6IHNkcAogICAgICB9KTsKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggJiYgdHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1swXSwgMCwgZGVzYyk7CiAgICAgIH0KICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZXNjKTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUpIHsKICAgICAgdmFyIG1MaW5lSW5kZXggPSBjYW5kaWRhdGUuc2RwTUxpbmVJbmRleDsKICAgICAgaWYgKGNhbmRpZGF0ZS5zZHBNaWQpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy50cmFuc2NlaXZlcnNbaV0ubWlkID09PSBjYW5kaWRhdGUuc2RwTWlkKSB7CiAgICAgICAgICAgIG1MaW5lSW5kZXggPSBpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIHRyYW5zY2VpdmVyID0gdGhpcy50cmFuc2NlaXZlcnNbbUxpbmVJbmRleF07CiAgICAgIGlmICh0cmFuc2NlaXZlcikgewogICAgICAgIHZhciBjYW5kID0gT2JqZWN0LmtleXMoY2FuZGlkYXRlLmNhbmRpZGF0ZSkubGVuZ3RoID4gMCA/CiAgICAgICAgICAgIFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGNhbmRpZGF0ZS5jYW5kaWRhdGUpIDoge307CiAgICAgICAgLy8gSWdub3JlIENocm9tZSdzIGludmFsaWQgY2FuZGlkYXRlcyBzaW5jZSBFZGdlIGRvZXMgbm90IGxpa2UgdGhlbS4KICAgICAgICBpZiAoY2FuZC5wcm90b2NvbCA9PT0gJ3RjcCcgJiYgY2FuZC5wb3J0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIElnbm9yZSBSVENQIGNhbmRpZGF0ZXMsIHdlIGFzc3VtZSBSVENQLU1VWC4KICAgICAgICBpZiAoY2FuZC5jb21wb25lbnQgIT09ICcxJykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAvLyBBIGRpcnR5IGhhY2sgdG8gbWFrZSBzYW1wbGVzIHdvcmsuCiAgICAgICAgaWYgKGNhbmQudHlwZSA9PT0gJ2VuZE9mQ2FuZGlkYXRlcycpIHsKICAgICAgICAgIGNhbmQgPSB7fTsKICAgICAgICB9CiAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZShjYW5kKTsKICAgICAgfQogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1sxXSwgMCk7CiAgICAgIH0KICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBwcm9taXNlcyA9IFtdOwogICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgWydydHBTZW5kZXInLCAncnRwUmVjZWl2ZXInLCAnaWNlR2F0aGVyZXInLCAnaWNlVHJhbnNwb3J0JywKICAgICAgICAgICAgJ2R0bHNUcmFuc3BvcnQnXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgICAgICAgaWYgKHRyYW5zY2VpdmVyW21ldGhvZF0pIHsKICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0cmFuc2NlaXZlclttZXRob2RdLmdldFN0YXRzKCkpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgICAgICAgYXJndW1lbnRzWzFdOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICAgIHZhciByZXN1bHRzID0ge307CiAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24ocmVzKSB7CiAgICAgICAgICByZXMuZm9yRWFjaChmdW5jdGlvbihyZXN1bHQpIHsKICAgICAgICAgICAgT2JqZWN0LmtleXMocmVzdWx0KS5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICAgICAgICAgICAgcmVzdWx0c1tpZF0gPSByZXN1bHRbaWRdOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNiLCAwLCByZXN1bHRzKTsKICAgICAgICAgIH0KICAgICAgICAgIHJlc29sdmUocmVzdWx0cyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfTsKICB9Cn0gZWxzZSB7CiAgd2VicnRjVXRpbHMubG9nKCdCcm93c2VyIGRvZXMgbm90IGFwcGVhciB0byBiZSBXZWJSVEMtY2FwYWJsZScpOwp9CgovLyBQb2x5ZmlsbCBvbnRyYWNrIG9uIGJyb3dzZXJzIHRoYXQgZG9uJ3QgeWV0IGhhdmUgaXQKaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiAhKCdvbnRyYWNrJyBpbgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ29udHJhY2snLCB7CiAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5fb250cmFjazsgfSwKICAgIHNldDogZnVuY3Rpb24oZikgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIGlmICh0aGlzLl9vbnRyYWNrKSB7CiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2spOwogICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb250cmFja3BvbHkpOwogICAgICB9CiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrID0gZik7CiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb250cmFja3BvbHkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKHdlYnJ0Y0RldGVjdGVkQnJvd3NlciA9PT0gJ2Nocm9tZScpIHsKICAgICAgICAgIC8vIG9uYWRkc3RyZWFtIGRvZXMgbm90IGZpcmUgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIHRvIGFuIGV4aXN0aW5nIHN0cmVhbS4KICAgICAgICAgIC8vIGJ1dCBzdHJlYW0ub25hZGR0cmFjayBpcyBpbXBsZW1lbnRlZCBzbyB3ZSB1c2UgdGjjgZ90CiAgICAgICAgICBlLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKCdhZGR0cmFjaycsIGZ1bmN0aW9uKHRlKSB7CiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0ZS50cmFjazsKICAgICAgICAgICAgZXZlbnQucmVjZWl2ZXIgPSB7dHJhY2s6IHRlLnRyYWNrfTsKICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07CiAgICAgICAgICAgIHNlbGYuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZS5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgewogICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCd0cmFjaycpOwogICAgICAgICAgZXZlbnQudHJhY2sgPSB0cmFjazsKICAgICAgICAgIGV2ZW50LnJlY2VpdmVyID0ge3RyYWNrOiB0cmFja307CiAgICAgICAgICBldmVudC5zdHJlYW1zID0gW2Uuc3RyZWFtXTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgfS5iaW5kKHRoaXMpKTsKICAgICAgfS5iaW5kKHRoaXMpKTsKICAgIH0KICB9KTsKfQoKLy8gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGdldFVzZXJNZWRpYSBhcyBhIFByb21pc2UuCmZ1bmN0aW9uIHJlcXVlc3RVc2VyTWVkaWEoY29uc3RyYWludHMpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBnZXRVc2VyTWVkaWEoY29uc3RyYWludHMsIHJlc29sdmUsIHJlamVjdCk7CiAgfSk7Cn0KCnZhciB3ZWJydGNUZXN0aW5nID0ge307CnRyeSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdlYnJ0Y1Rlc3RpbmcsICd2ZXJzaW9uJywgewogICAgc2V0OiBmdW5jdGlvbih2ZXJzaW9uKSB7CiAgICAgIHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiA9IHZlcnNpb247CiAgICB9CiAgfSk7Cn0gY2F0Y2ggKGUpIHt9CgppZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICB2YXIgUlRDUGVlckNvbm5lY3Rpb247CiAgdmFyIFJUQ0ljZUNhbmRpZGF0ZTsKICB2YXIgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uOwogIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgewogICAgUlRDUGVlckNvbm5lY3Rpb24gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb247CiAgICBSVENJY2VDYW5kaWRhdGUgPSB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlOwogICAgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbjsKICB9CiAgbW9kdWxlLmV4cG9ydHMgPSB7CiAgICBSVENQZWVyQ29ubmVjdGlvbjogUlRDUGVlckNvbm5lY3Rpb24sCiAgICBSVENJY2VDYW5kaWRhdGU6IFJUQ0ljZUNhbmRpZGF0ZSwKICAgIFJUQ1Nlc3Npb25EZXNjcmlwdGlvbjogUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLAogICAgZ2V0VXNlck1lZGlhOiBnZXRVc2VyTWVkaWEsCiAgICBhdHRhY2hNZWRpYVN0cmVhbTogYXR0YWNoTWVkaWFTdHJlYW0sCiAgICByZWF0dGFjaE1lZGlhU3RyZWFtOiByZWF0dGFjaE1lZGlhU3RyZWFtLAogICAgd2VicnRjRGV0ZWN0ZWRCcm93c2VyOiB3ZWJydGNEZXRlY3RlZEJyb3dzZXIsCiAgICB3ZWJydGNEZXRlY3RlZFZlcnNpb246IHdlYnJ0Y0RldGVjdGVkVmVyc2lvbiwKICAgIHdlYnJ0Y01pbmltdW1WZXJzaW9uOiB3ZWJydGNNaW5pbXVtVmVyc2lvbiwKICAgIHdlYnJ0Y1Rlc3Rpbmc6IHdlYnJ0Y1Rlc3RpbmcsCiAgICB3ZWJydGNVdGlsczogd2VicnRjVXRpbHMKICAgIC8vcmVxdWVzdFVzZXJNZWRpYTogbm90IGV4cG9zZWQgb24gcHVycG9zZS4KICAgIC8vdHJhY2U6IG5vdCBleHBvc2VkIG9uIHB1cnBvc2UuCiAgfTsKfSBlbHNlIGlmICgodHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpICYmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nKSkgewogIC8vIEV4cG9zZSBvYmplY3RzIGFuZCBmdW5jdGlvbnMgd2hlbiBSZXF1aXJlSlMgaXMgZG9pbmcgdGhlIGxvYWRpbmcuCiAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIFJUQ1BlZXJDb25uZWN0aW9uOiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sCiAgICAgIFJUQ0ljZUNhbmRpZGF0ZTogd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSwKICAgICAgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uOiB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLAogICAgICBnZXRVc2VyTWVkaWE6IGdldFVzZXJNZWRpYSwKICAgICAgYXR0YWNoTWVkaWFTdHJlYW06IGF0dGFjaE1lZGlhU3RyZWFtLAogICAgICByZWF0dGFjaE1lZGlhU3RyZWFtOiByZWF0dGFjaE1lZGlhU3RyZWFtLAogICAgICB3ZWJydGNEZXRlY3RlZEJyb3dzZXI6IHdlYnJ0Y0RldGVjdGVkQnJvd3NlciwKICAgICAgd2VicnRjRGV0ZWN0ZWRWZXJzaW9uOiB3ZWJydGNEZXRlY3RlZFZlcnNpb24sCiAgICAgIHdlYnJ0Y01pbmltdW1WZXJzaW9uOiB3ZWJydGNNaW5pbXVtVmVyc2lvbiwKICAgICAgd2VicnRjVGVzdGluZzogd2VicnRjVGVzdGluZywKICAgICAgd2VicnRjVXRpbHM6IHdlYnJ0Y1V0aWxzCiAgICAgIC8vcmVxdWVzdFVzZXJNZWRpYTogbm90IGV4cG9zZWQgb24gcHVycG9zZS4KICAgICAgLy90cmFjZTogbm90IGV4cG9zZWQgb24gcHVycG9zZS4KICAgIH07CiAgfSk7Cn0KCn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTp0cnVlfSk7dmFyIF9jcmVhdGVDbGFzcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlIiBpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319cmV0dXJuIGZ1bmN0aW9uKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO307fSgpO3JlcXVpcmUoJ3dlYnJ0Yy1hZGFwdGVyLXRlc3QnKTt2YXIgX0V2ZW50RW1pdHRlcjI9cmVxdWlyZSgnLi4vdXRpbHMvRXZlbnRFbWl0dGVyJyk7dmFyIF9FdmVudEVtaXR0ZXIzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0V2ZW50RW1pdHRlcjIpO3ZhciBfY29ubmVjdGlvbj1yZXF1aXJlKCcuL2Nvbm5lY3Rpb24nKTt2YXIgX2Nvbm5lY3Rpb24yPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Nvbm5lY3Rpb24pO3ZhciBfcGVlcj1yZXF1aXJlKCcuL3BlZXInKTt2YXIgX3BlZXIyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BlZXIpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTt9fWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsY2FsbCl7aWYoIXNlbGYpe3Rocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7fXJldHVybiBjYWxsJiYodHlwZW9mIGNhbGw9PT0ib2JqZWN0Inx8dHlwZW9mIGNhbGw9PT0iZnVuY3Rpb24iKT9jYWxsOnNlbGY7fWZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcyxzdXBlckNsYXNzKXtpZih0eXBlb2Ygc3VwZXJDbGFzcyE9PSJmdW5jdGlvbiImJnN1cGVyQ2xhc3MhPT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHN1cGVyQ2xhc3MpO31zdWJDbGFzcy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzJiZzdXBlckNsYXNzLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnN1YkNsYXNzLGVudW1lcmFibGU6ZmFsc2Usd3JpdGFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZX19KTtpZihzdXBlckNsYXNzKU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3Msc3VwZXJDbGFzcyk6c3ViQ2xhc3MuX19wcm90b19fPXN1cGVyQ2xhc3M7fSAvKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8gLyoganNoaW50IHVuZGVmOiB0cnVlICovIC8qIGdsb2JhbHMgUlRDUGVlckNvbm5lY3Rpb24gKi8gLyogZ2xvYmFscyBSVENTZXNzaW9uRGVzY3JpcHRpb24gKi8gLyogZ2xvYmFscyBSVENJY2VDYW5kaWRhdGUgKi92YXIgQ29ubmVjdGlvbkNvbnRyb2xsZXI9ZnVuY3Rpb24oX0V2ZW50RW1pdHRlcil7X2luaGVyaXRzKENvbm5lY3Rpb25Db250cm9sbGVyLF9FdmVudEVtaXR0ZXIpO2Z1bmN0aW9uIENvbm5lY3Rpb25Db250cm9sbGVyKHN5bmNoZXIsZG9tYWluLGNvbmZpZ3VyYXRpb24pe19jbGFzc0NhbGxDaGVjayh0aGlzLENvbm5lY3Rpb25Db250cm9sbGVyKTtpZighc3luY2hlcil0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzeW5jaGVyIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpO2lmKCFkb21haW4pdGhyb3cgbmV3IEVycm9yKCdUaGUgZG9tYWluIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpO2lmKCFjb25maWd1cmF0aW9uKXRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7dmFyIF90aGlzMj1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLE9iamVjdC5nZXRQcm90b3R5cGVPZihDb25uZWN0aW9uQ29udHJvbGxlcikuY2FsbCh0aGlzKSk7dmFyIF90aGlzPV90aGlzMjtfdGhpcy5zeW5jaGVyPXN5bmNoZXI7X3RoaXMubW9kZT0nb2ZmZXInO190aGlzLl9vYmplY3REZXNjVVJMPSdoeXBlcnR5LWNhdGFsb2d1ZTovLycrZG9tYWluKycvLndlbGwta25vd24vZGF0YXNjaGVtYXMvRmFrZURhdGFTY2hlbWEnO2NvbnNvbGUuaW5mbyhjb25maWd1cmF0aW9uKTtjb25zb2xlLmluZm8oY29uZmlndXJhdGlvbik7X3RoaXMubWVkaWFDb25zdHJhaW50cz1jb25maWd1cmF0aW9uLm1lZGlhQ29uc3RyYWludHM7X3RoaXMuY29uZmlndXJhdGlvbj1jb25maWd1cmF0aW9uLndlYnJ0YzsgLy8gUHJlcGFyZSB0aGUgUGVlckNvbm5lY3Rpb24KdmFyIHBlZXJDb25uZWN0aW9uPW5ldyBSVENQZWVyQ29ubmVjdGlvbihfdGhpcy5jb25maWd1cmF0aW9uKTtwZWVyQ29ubmVjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdzaWduYWxpbmdzdGF0ZWNoYW5nZScsZnVuY3Rpb24oZXZlbnQpe2NvbnNvbGUuaW5mbygnc2lnbmFsaW5nc3RhdGVjaGFuZ2UnLGV2ZW50LmN1cnJlbnRUYXJnZXQuc2lnbmFsaW5nU3RhdGUpO2lmKGV2ZW50LmN1cnJlbnRUYXJnZXQuc2lnbmFsaW5nU3RhdGU9PT0naGF2ZS1sb2NhbC1vZmZlcicpe190aGlzLnRyaWdnZXIoJ2NvbnRyb2xsZXI6c3RhdGU6Y2hhbmdlJyxfdGhpcy5tb2RlKTt9aWYoZXZlbnQuY3VycmVudFRhcmdldC5zaWduYWxpbmdTdGF0ZT09PSdoYXZlLXJlbW90ZS1vZmZlcicpe190aGlzLm1vZGU9J2Fuc3dlcic7X3RoaXMudHJpZ2dlcignY29udHJvbGxlcjpzdGF0ZTpjaGFuZ2UnLF90aGlzLm1vZGUpO319KTtwZWVyQ29ubmVjdGlvbi5hZGRFdmVudExpc3RlbmVyKCdpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLGZ1bmN0aW9uKGV2ZW50KXtjb25zb2xlLmluZm8oJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsZXZlbnQuY3VycmVudFRhcmdldC5pY2VDb25uZWN0aW9uU3RhdGUpO3ZhciBkYXRhPV90aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXIuZGF0YTtpZihkYXRhLmhhc093blByb3BlcnR5KCdjb25uZWN0aW9uJykpe2RhdGEuY29ubmVjdGlvbi5zdGF0dXM9ZXZlbnQuY3VycmVudFRhcmdldC5pY2VDb25uZWN0aW9uU3RhdGU7fX0pO3BlZXJDb25uZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNhbmRpZGF0ZScsZnVuY3Rpb24oZXZlbnQpe2lmKCFldmVudC5jYW5kaWRhdGUpcmV0dXJuO3ZhciBpY2VjYW5kaWRhdGU9e3R5cGU6J2NhbmRpZGF0ZScsY2FuZGlkYXRlOmV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUsc2RwTWlkOmV2ZW50LmNhbmRpZGF0ZS5zZHBNaWQsc2RwTUxpbmVJbmRleDpldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleH07dmFyIGRhdGE9X3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlci5kYXRhO2lmKF90aGlzLm1vZGU9PT0nb2ZmZXInKXtkYXRhLmNvbm5lY3Rpb24ub3duZXJQZWVyLmljZUNhbmRpZGF0ZXMucHVzaChpY2VjYW5kaWRhdGUpO31lbHNlIHtkYXRhLnBlZXIuaWNlQ2FuZGlkYXRlcy5wdXNoKGljZWNhbmRpZGF0ZSk7fX0pOyAvLyBBZGQgc3RyZWFtIHRvIFBlZXJDb25uZWN0aW9uCnBlZXJDb25uZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsZnVuY3Rpb24oZXZlbnQpe2NvbnNvbGUuaW5mbygnQWRkIFN0cmVhbTogJyxldmVudCk7X3RoaXMudHJpZ2dlcignc3RyZWFtOmFkZGVkJyxldmVudCk7fSk7X3RoaXMucGVlckNvbm5lY3Rpb249cGVlckNvbm5lY3Rpb247cmV0dXJuIF90aGlzMjt9X2NyZWF0ZUNsYXNzKENvbm5lY3Rpb25Db250cm9sbGVyLFt7a2V5OidjaGFuZ2VQZWVySW5mb3JtYXRpb24nLHZhbHVlOmZ1bmN0aW9uIGNoYW5nZVBlZXJJbmZvcm1hdGlvbihkYXRhT2JqZWN0T2JzZXJ2ZXIpe3ZhciBfdGhpcz10aGlzO3ZhciBkYXRhPWRhdGFPYmplY3RPYnNlcnZlci5kYXRhO3ZhciBpc093bmVyPWRhdGEuaGFzT3duUHJvcGVydHkoJ2Nvbm5lY3Rpb24nKTt2YXIgcGVlckRhdGE9aXNPd25lcj9kYXRhLmNvbm5lY3Rpb24ub3duZXJQZWVyOmRhdGEucGVlcjtjb25zb2xlLmluZm8oJ1BlZXIgRGF0YTonLEpTT04uc3RyaW5naWZ5KHBlZXJEYXRhKSk7aWYocGVlckRhdGEuaGFzT3duUHJvcGVydHkoJ2Nvbm5lY3Rpb25EZXNjcmlwdGlvbicpKXtfdGhpcy5wcm9jZXNzUGVlckluZm9ybWF0aW9uKHBlZXJEYXRhLmNvbm5lY3Rpb25EZXNjcmlwdGlvbik7fWlmKHBlZXJEYXRhLmhhc093blByb3BlcnR5KCdpY2VDYW5kaWRhdGVzJykpe3BlZXJEYXRhLmljZUNhbmRpZGF0ZXMuZm9yRWFjaChmdW5jdGlvbihpY2Upe190aGlzLnByb2Nlc3NQZWVySW5mb3JtYXRpb24oaWNlKTt9KTt9ZGF0YU9iamVjdE9ic2VydmVyLm9uQ2hhbmdlKCcqJyxmdW5jdGlvbihldmVudCl7Y29uc29sZS5pbmZvKCdPYnNlcnZlciBvbiBjaGFuZ2UgbWVzc2FnZTogJyxldmVudCk7X3RoaXMucHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihldmVudC5kYXRhKTt9KTt9fSx7a2V5Oidwcm9jZXNzUGVlckluZm9ybWF0aW9uJyx2YWx1ZTpmdW5jdGlvbiBwcm9jZXNzUGVlckluZm9ybWF0aW9uKGRhdGEpe3ZhciBfdGhpcz10aGlzO2NvbnNvbGUuaW5mbyhKU09OLnN0cmluZ2lmeShkYXRhKSk7aWYoZGF0YS50eXBlPT09J29mZmVyJ3x8ZGF0YS50eXBlPT09J2Fuc3dlcicpe2NvbnNvbGUuaW5mbygnUHJvY2VzcyBDb25uZWN0aW9uIERlc2NyaXB0aW9uOiAnLGRhdGEuc2RwKTtfdGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKGRhdGEpLF90aGlzLnJlbW90ZURlc2NyaXB0aW9uU3VjY2VzcyxfdGhpcy5yZW1vdGVEZXNjcmlwdGlvbkVycm9yKTt9aWYoZGF0YS50eXBlPT09J2NhbmRpZGF0ZScpe2NvbnNvbGUuaW5mbygnUHJvY2VzcyBJY2UgQ2FuZGlkYXRlOiAnLGRhdGEpO190aGlzLnBlZXJDb25uZWN0aW9uLmFkZEljZUNhbmRpZGF0ZShuZXcgUlRDSWNlQ2FuZGlkYXRlKHtjYW5kaWRhdGU6ZGF0YS5jYW5kaWRhdGV9KSxfdGhpcy5yZW1vdGVEZXNjcmlwdGlvblN1Y2Nlc3MsX3RoaXMucmVtb3RlRGVzY3JpcHRpb25FcnJvcik7fX19LHtrZXk6J3JlbW90ZURlc2NyaXB0aW9uU3VjY2VzcycsdmFsdWU6ZnVuY3Rpb24gcmVtb3RlRGVzY3JpcHRpb25TdWNjZXNzKCl7Y29uc29sZS5pbmZvKCdyZW1vdGUgc3VjY2VzcycpO319LHtrZXk6J3JlbW90ZURlc2NyaXB0aW9uRXJyb3InLHZhbHVlOmZ1bmN0aW9uIHJlbW90ZURlc2NyaXB0aW9uRXJyb3IoZXJyb3Ipe2NvbnNvbGUuZXJyb3IoJ2Vycm9yOiAnLGVycm9yKTt9fSx7a2V5OidjcmVhdGVPZmZlcicsdmFsdWU6ZnVuY3Rpb24gY3JlYXRlT2ZmZXIoKXt2YXIgX3RoaXM9dGhpcztfdGhpcy5wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcihmdW5jdGlvbihkZXNjcmlwdGlvbil7X3RoaXMub25Mb2NhbFNlc3Npb25DcmVhdGVkKGRlc2NyaXB0aW9uKTt9LF90aGlzLmluZm9FcnJvcixfdGhpcy5tZWRpYUNvbnN0cmFpbnRzKTt9fSx7a2V5OidjcmVhdGVBbnN3ZXInLHZhbHVlOmZ1bmN0aW9uIGNyZWF0ZUFuc3dlcigpe3ZhciBfdGhpcz10aGlzO190aGlzLnBlZXJDb25uZWN0aW9uLmNyZWF0ZUFuc3dlcihmdW5jdGlvbihkZXNjcmlwdGlvbil7X3RoaXMub25Mb2NhbFNlc3Npb25DcmVhdGVkKGRlc2NyaXB0aW9uKTt9LF90aGlzLmluZm9FcnJvcik7fX0se2tleTonb25Mb2NhbFNlc3Npb25DcmVhdGVkJyx2YWx1ZTpmdW5jdGlvbiBvbkxvY2FsU2Vzc2lvbkNyZWF0ZWQoZGVzY3JpcHRpb24pe3ZhciBfdGhpcz10aGlzO190aGlzLnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sZnVuY3Rpb24oKXt2YXIgZGF0YT1fdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyLmRhdGE7dmFyIHNkcENvbm5lY3Rpb249e3NkcDpkZXNjcmlwdGlvbi5zZHAsdHlwZTpkZXNjcmlwdGlvbi50eXBlfTtpZihfdGhpcy5tb2RlPT09J29mZmVyJyl7ZGF0YS5jb25uZWN0aW9uLm93bmVyUGVlci5jb25uZWN0aW9uRGVzY3JpcHRpb249c2RwQ29ubmVjdGlvbjt9ZWxzZSB7ZGF0YS5wZWVyLmNvbm5lY3Rpb25EZXNjcmlwdGlvbj1zZHBDb25uZWN0aW9uO319LF90aGlzLmluZm9FcnJvcik7fX0se2tleTonaW5mb0Vycm9yJyx2YWx1ZTpmdW5jdGlvbiBpbmZvRXJyb3IoZXJyKXtjb25zb2xlLmVycm9yKGVyci50b1N0cmluZygpLGVycik7fSAvKioKICAgKiBVc2VkIHRvIGFjY2VwdCBhbiBpbmNvbWluZyBjb25uZWN0aW9uIHJlcXVlc3QuCiAgICogQG1ldGhvZCBhY2NlcHQKICAgKiBAcmV0dXJuIHtQcm9taXNlfQogICAqL30se2tleTonYWNjZXB0Jyx2YWx1ZTpmdW5jdGlvbiBhY2NlcHQoc3RyZWFtKXsgLy8gVE9ETzogUGFzcyBhcmd1bWVudCBvcHRpb25zIGFzIGEgc3RyZWFtLCBiZWNhdXNlIGlzIHNwZWNpZmljIG9mIGltcGxlbWVudGF0aW9uOwp2YXIgX3RoaXM9dGhpczt2YXIgc3luY2hlcj1fdGhpcy5zeW5jaGVyO2NvbnNvbGUubG9nKCdSZW1vdGUgUGVlciBJbmZvcm1hdGlvbjogJyxfdGhpcy5fcmVtb3RlUGVlckluZm9ybWF0aW9uKTt2YXIgcmVtb3RlUGVlcj1fdGhpcy5fcmVtb3RlUGVlckluZm9ybWF0aW9uLmZyb207cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXt0cnl7Y29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gU3luY2hlciBDcmVhdGUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBcbicpO3N5bmNoZXIuY3JlYXRlKF90aGlzLl9vYmplY3REZXNjVVJMLFtyZW1vdGVQZWVyXSx7fSkudGhlbihmdW5jdGlvbihkYXRhT2JqZWN0UmVwb3J0ZXIpe2NvbnNvbGUuaW5mbygnMi4gUmV0dXJuIHRoZSBEYXRhIE9iamVjdCBSZXBvcnRlciAnLGRhdGFPYmplY3RSZXBvcnRlcik7X3RoaXMuc3RyZWFtPXN0cmVhbTtfdGhpcy5kYXRhT2JqZWN0UmVwb3J0ZXI9ZGF0YU9iamVjdFJlcG9ydGVyO3Jlc29sdmUoJ2FjY2VwdGVkJyk7fSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtyZWplY3QocmVhc29uKTt9KTt9Y2F0Y2goZSl7cmVqZWN0KCdlcnJvciBhY2NlcHRpbmcgY29ubmVjdGlvbicpO319KTt9IC8qKgogICogVXNlZCB0byBkZWNsaW5lIGFuIGluY29taW5nIGNvbm5lY3Rpb24gcmVxdWVzdC4KICAqIEBtZXRob2QgZGVjbGluZQogICogQHJldHVybiB7UHJvbWlzZX0KICAqL30se2tleTonZGVjbGluZScsdmFsdWU6ZnVuY3Rpb24gZGVjbGluZSgpe3ZhciBfdGhpcz10aGlzO3ZhciBzeW5jaGVyPV90aGlzLnN5bmNoZXI7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXt0cnl7Y29uc29sZS5sb2coJ3N5bmNoZXI6ICcsc3luY2hlcik7cmVzb2x2ZSgnRGVjbGluZWQnKTt9Y2F0Y2goZSl7cmVqZWN0KGUpO319KTt9IC8qKgogICAqIFVzZWQgdG8gY2xvc2UgYW4gZXhpc3RpbmcgY29ubmVjdGlvbiBpbnN0YW5jZS4KICAgKiBAbWV0aG9kIGRpc2Nvbm5lY3QKICAgKiBAcmV0dXJuIHtQcm9taXNlfQogICAqL30se2tleTonZGlzY29ubmVjdCcsdmFsdWU6ZnVuY3Rpb24gZGlzY29ubmVjdCgpeyAvLyBUT0RPOiBvcHRpbWl6ZSB0aGUgZGlzY29ubmVjdCBmdW5jdGlvbgp2YXIgX3RoaXM9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3RyeXtfdGhpcy5wZWVyQ29ubmVjdGlvbi5jbG9zZSgpO3Jlc29sdmUodHJ1ZSk7fWNhdGNoKGUpe3JlamVjdCgnZXJyb3IgZGlzY29ubmVjdGluZyBjb25uZWN0aW9uJyk7fX0pO30gLyoqCiAgICogVXNlZCB0byBhZGQvaW52aXRlIG5ldyBwZWVycyBvbiBhbiBleGlzdGluZyBjb25uZWN0aW9uIGluc3RhbmNlIChmb3IgbXVsdGlwYXJ0eSBjb25uZWN0aW9ucykuCiAgICogQG1ldGhvZCBhZGRQZWVyCiAgICogQHJldHVybiB7UHJvbWlzZX0KICAgKi99LHtrZXk6J2FkZFBlZXInLHZhbHVlOmZ1bmN0aW9uIGFkZFBlZXIoKXt9IC8qKgogICAqIFVzZWQgdG8gcmVtb3ZlIGEgcGVlciBmcm9tIGFuIGV4aXN0aW5nIGNvbm5lY3Rpb24gaW5zdGFuY2UuCiAgICogQG1ldGhvZCByZW1vdmVQZWVyCiAgICogQHJldHVybiB7UHJvbWlzZX0KICAgKi99LHtrZXk6J3JlbW92ZVBlZXInLHZhbHVlOmZ1bmN0aW9uIHJlbW92ZVBlZXIoKXt9IC8vIFBlZXIgQWN0aW9ucwp9LHtrZXk6J2Rpc2FibGVNaWMnLHZhbHVlOmZ1bmN0aW9uIGRpc2FibGVNaWMoKXt2YXIgX3RoaXM9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3RyeXt2YXIgbG9jYWxTdHJlYW09X3RoaXMucGVlckNvbm5lY3Rpb24uZ2V0TG9jYWxTdHJlYW1zKClbMF07dmFyIGF1ZGlvVHJhY2s9bG9jYWxTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTthdWRpb1RyYWNrLmVuYWJsZWQ9YXVkaW9UcmFjay5lbmFibGVkP2ZhbHNlOnRydWU7cmVzb2x2ZShhdWRpb1RyYWNrLmVuYWJsZWQpO31jYXRjaChlKXtyZWplY3QoZSk7fX0pO319LHtrZXk6J2Rpc2FibGVDYW0nLHZhbHVlOmZ1bmN0aW9uIGRpc2FibGVDYW0oKXt2YXIgX3RoaXM9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3RyeXt2YXIgbG9jYWxTdHJlYW09X3RoaXMucGVlckNvbm5lY3Rpb24uZ2V0TG9jYWxTdHJlYW1zKClbMF07dmFyIHZpZGVvVHJhY2s9bG9jYWxTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTt2aWRlb1RyYWNrLmVuYWJsZWQ9dmlkZW9UcmFjay5lbmFibGVkP2ZhbHNlOnRydWU7cmVzb2x2ZSh2aWRlb1RyYWNrLmVuYWJsZWQpO31jYXRjaChlKXtyZWplY3QoZSk7fX0pO319LHtrZXk6J211dGUnLHZhbHVlOmZ1bmN0aW9uIG11dGUoKXt2YXIgX3RoaXM9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3RyeXt2YXIgcmVtb3RlU3RyZWFtPV90aGlzLnBlZXJDb25uZWN0aW9uLmdldFJlbW90ZVN0cmVhbXMoKVswXTt2YXIgYXVkaW9UcmFjaz1yZW1vdGVTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTthdWRpb1RyYWNrLmVuYWJsZWQ9YXVkaW9UcmFjay5lbmFibGVkP2ZhbHNlOnRydWU7cmVzb2x2ZShhdWRpb1RyYWNrLmVuYWJsZWQpO31jYXRjaChlKXtyZWplY3QoZSk7fX0pO319LHtrZXk6J3N0cmVhbScsc2V0OmZ1bmN0aW9uIHNldChtZWRpYVN0cmVhbSl7aWYoIW1lZGlhU3RyZWFtKXRocm93IG5ldyBFcnJvcignVGhlIG1lZGlhU3RyZWFtIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpO3ZhciBfdGhpcz10aGlzO2NvbnNvbGUuaW5mbygnc2V0IHN0cmVhbTogJyxtZWRpYVN0cmVhbSk7X3RoaXMucGVlckNvbm5lY3Rpb24uYWRkU3RyZWFtKG1lZGlhU3RyZWFtKTt9fSx7a2V5OidnZXRMb2NhbFN0cmVhbXMnLGdldDpmdW5jdGlvbiBnZXQoKXt2YXIgX3RoaXM9dGhpcztyZXR1cm4gX3RoaXMucGVlckNvbm5lY3Rpb24uZ2V0TG9jYWxTdHJlYW1zKCk7fX0se2tleTonZ2V0UmVtb3RlU3RyZWFtcycsZ2V0OmZ1bmN0aW9uIGdldCgpe3ZhciBfdGhpcz10aGlzO3JldHVybiBfdGhpcy5wZWVyQ29ubmVjdGlvbi5nZXRSZW1vdGVTdHJlYW1zKCk7fSAvKioKICAgKiBTZXQgUmVtb3RlIHBlZXIgaW5mb3JtYXRpb24sIGxpa2UgSHlwZXJ0eS4KICAgKiBAcGFyYW0gIHtPYmplY3R9IHJlbW90ZVBlZXJJbmZvcm1hdGlvbiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcGVlcjsKICAgKi99LHtrZXk6J3JlbW90ZVBlZXJJbmZvcm1hdGlvbicsc2V0OmZ1bmN0aW9uIHNldChyZW1vdGVQZWVySW5mb3JtYXRpb24pe3ZhciBfdGhpcz10aGlzO190aGlzLl9yZW1vdGVQZWVySW5mb3JtYXRpb249cmVtb3RlUGVlckluZm9ybWF0aW9uO30gLyoqCiAgICogR2V0IGluZm9ybWF0aW9uIHJlbGF0aXZlIHRvIHRoZSBSZW1vdGUgUGVlcjsKICAgKiBAcmV0dXJuIHtPYmplY3R9IHJlbW90ZVBlZXJJbmZvcm1hdGlvbjsKICAgKi8sZ2V0OmZ1bmN0aW9uIGdldCgpe3ZhciBfdGhpcz10aGlzO3JldHVybiBfdGhpcy5fcmVtb3RlUGVlckluZm9ybWF0aW9uO30gLyoqCiAgKiBTZXQgdGhlIGRhdGFPYmplY3QgaW4gdGhlIGNvbnRyb2xsZXIKICAqIEBwYXJhbSB7Q29ubmVjdGlvbkRhdGFPYmplY3R9IGRhdGFPYmplY3QgLSBoYXZlIGFsbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc3luY2hlciBvYmplY3Q7CiAgKi99LHtrZXk6J2RhdGFPYmplY3RSZXBvcnRlcicsc2V0OmZ1bmN0aW9uIHNldChkYXRhT2JqZWN0UmVwb3J0ZXIpe2lmKCFkYXRhT2JqZWN0UmVwb3J0ZXIpdGhyb3cgbmV3IEVycm9yKCdUaGUgRGF0YSBPYmplY3QgUmVwb3J0ZXIgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7dmFyIF90aGlzPXRoaXM7X3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlcj1kYXRhT2JqZWN0UmVwb3J0ZXI7dmFyIGRhdGE9X3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlci5kYXRhO2RhdGFPYmplY3RSZXBvcnRlci5vblN1YnNjcmlwdGlvbihmdW5jdGlvbihldmVudCl7ZXZlbnQuYWNjZXB0KCk7fSk7aWYoX3RoaXMubW9kZT09PSdvZmZlcicpe2RhdGEuY29ubmVjdGlvbj1fY29ubmVjdGlvbjIuZGVmYXVsdDtfdGhpcy5jcmVhdGVPZmZlcigpO31lbHNlIHtkYXRhLnBlZXI9X3BlZXIyLmRlZmF1bHQ7X3RoaXMuY3JlYXRlQW5zd2VyKCk7fWNvbnNvbGUuZGVidWcoX3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlcik7fSAvKioKICAqIHJldHVybiB0aGUgZGF0YU9iamVjdCBpbiB0aGUgY29udHJvbGxlcgogICogQHJldHVybiB7Q29ubmVjdGlvbkRhdGFPYmplY3R9IGRhdGFPYmplY3QKICAqLyxnZXQ6ZnVuY3Rpb24gZ2V0KCl7dmFyIF90aGlzPXRoaXM7cmV0dXJuIF90aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXI7fSAvKioKICAqIFNldCB0aGUgZGF0YU9iamVjdCBpbiB0aGUgY29udHJvbGxlcgogICogQHBhcmFtIHtDb25uZWN0aW9uRGF0YU9iamVjdH0gZGF0YU9iamVjdCAtIGhhdmUgYWxsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzeW5jaGVyIG9iamVjdDsKICAqL30se2tleTonZGF0YU9iamVjdE9ic2VydmVyJyxzZXQ6ZnVuY3Rpb24gc2V0KGRhdGFPYmplY3RPYnNlcnZlcil7aWYoIWRhdGFPYmplY3RPYnNlcnZlcil0aHJvdyBuZXcgRXJyb3IoJ1RoZSBEYXRhIE9iamVjdCBPYnNlcnZlciBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTt2YXIgX3RoaXM9dGhpcztfdGhpcy5fZGF0YU9iamVjdE9ic2VydmVyPWRhdGFPYmplY3RPYnNlcnZlcjtfdGhpcy5jaGFuZ2VQZWVySW5mb3JtYXRpb24oZGF0YU9iamVjdE9ic2VydmVyKTt9IC8qKgogICogcmV0dXJuIHRoZSBkYXRhT2JqZWN0IGluIHRoZSBjb250cm9sbGVyCiAgKiBAcmV0dXJuIHtDb25uZWN0aW9uRGF0YU9iamVjdH0gZGF0YU9iamVjdAogICovLGdldDpmdW5jdGlvbiBnZXQoKXt2YXIgX3RoaXM9dGhpcztyZXR1cm4gX3RoaXMuX2RhdGFPYmplY3RPYnNlcnZlcjt9fV0pO3JldHVybiBDb25uZWN0aW9uQ29udHJvbGxlcjt9KF9FdmVudEVtaXR0ZXIzLmRlZmF1bHQpO2V4cG9ydHMuZGVmYXVsdD1Db25uZWN0aW9uQ29udHJvbGxlcjttb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvRXZlbnRFbWl0dGVyIjo2LCIuL2Nvbm5lY3Rpb24iOjQsIi4vcGVlciI6NSwid2VicnRjLWFkYXB0ZXItdGVzdCI6MX1dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTp0cnVlfSk7dmFyIF9jcmVhdGVDbGFzcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlIiBpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319cmV0dXJuIGZ1bmN0aW9uKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO307fSgpO2V4cG9ydHMuZGVmYXVsdD1hY3RpdmF0ZTt2YXIgX0h5cGVydHlEaXNjb3Zlcnk9cmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9IeXBlcnR5RGlzY292ZXJ5Jyk7dmFyIF9IeXBlcnR5RGlzY292ZXJ5Mj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9IeXBlcnR5RGlzY292ZXJ5KTt2YXIgX1N5bmNoZXI9cmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9TeW5jaGVyJyk7dmFyIF9FdmVudEVtaXR0ZXIyPXJlcXVpcmUoJy4uL3V0aWxzL0V2ZW50RW1pdHRlcicpO3ZhciBfRXZlbnRFbWl0dGVyMz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FdmVudEVtaXR0ZXIyKTt2YXIgX3V0aWxzPXJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzJyk7dmFyIF9Db25uZWN0aW9uQ29udHJvbGxlcj1yZXF1aXJlKCcuL0Nvbm5lY3Rpb25Db250cm9sbGVyJyk7dmFyIF9Db25uZWN0aW9uQ29udHJvbGxlcjI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29ubmVjdGlvbkNvbnRyb2xsZXIpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTt9fWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsY2FsbCl7aWYoIXNlbGYpe3Rocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7fXJldHVybiBjYWxsJiYodHlwZW9mIGNhbGw9PT0ib2JqZWN0Inx8dHlwZW9mIGNhbGw9PT0iZnVuY3Rpb24iKT9jYWxsOnNlbGY7fWZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcyxzdXBlckNsYXNzKXtpZih0eXBlb2Ygc3VwZXJDbGFzcyE9PSJmdW5jdGlvbiImJnN1cGVyQ2xhc3MhPT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHN1cGVyQ2xhc3MpO31zdWJDbGFzcy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzJiZzdXBlckNsYXNzLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnN1YkNsYXNzLGVudW1lcmFibGU6ZmFsc2Usd3JpdGFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZX19KTtpZihzdXBlckNsYXNzKU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3Msc3VwZXJDbGFzcyk6c3ViQ2xhc3MuX19wcm90b19fPXN1cGVyQ2xhc3M7fSAvKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8gLyoganNoaW50IHVuZGVmOiB0cnVlICovIC8vIFNlcnZpY2UgRnJhbWV3b3JrCi8vIFV0aWxzCi8vIEludGVybmFscwovKioKKiBIeXBlcnR5IENvbm5lY3RvcjsKKiBAYXV0aG9yIFZpdG9yIFNpbHZhIFt2aXRvci10LXNpbHZhQHRlbGVjb20ucHRdCiogQHZlcnNpb24gMC4xLjAKKi92YXIgSHlwZXJ0eUNvbm5lY3Rvcj1mdW5jdGlvbihfRXZlbnRFbWl0dGVyKXtfaW5oZXJpdHMoSHlwZXJ0eUNvbm5lY3RvcixfRXZlbnRFbWl0dGVyKTsgLyoqCiAgKiBDcmVhdGUgYSBuZXcgSHlwZXJ0eSBDb25uZWN0b3IKICAqIEBwYXJhbSAge1N5bmNoZXJ9IHN5bmNoZXIgLSBTeW5jaGVyIHByb3ZpZGVkIGZyb20gdGhlIHJ1bnRpbWUgY29yZQogICovZnVuY3Rpb24gSHlwZXJ0eUNvbm5lY3RvcihoeXBlcnR5VVJMLGJ1cyxjb25maWd1cmF0aW9uKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyxIeXBlcnR5Q29ubmVjdG9yKTtpZighaHlwZXJ0eVVSTCl0aHJvdyBuZXcgRXJyb3IoJ1RoZSBoeXBlcnR5VVJMIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpO2lmKCFidXMpdGhyb3cgbmV3IEVycm9yKCdUaGUgTWluaUJ1cyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTtpZighY29uZmlndXJhdGlvbil0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWd1cmF0aW9uIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpO3ZhciBfdGhpczI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcyxPYmplY3QuZ2V0UHJvdG90eXBlT2YoSHlwZXJ0eUNvbm5lY3RvcikuY2FsbCh0aGlzLGh5cGVydHlVUkwsYnVzLGNvbmZpZ3VyYXRpb24pKTt2YXIgX3RoaXM9X3RoaXMyO190aGlzLl9oeXBlcnR5VVJMPWh5cGVydHlVUkw7X3RoaXMuX2J1cz1idXM7X3RoaXMuX2NvbmZpZ3VyYXRpb249Y29uZmlndXJhdGlvbjtfdGhpcy5fZG9tYWluPSgwLF91dGlscy5kaXZpZGVVUkwpKGh5cGVydHlVUkwpLmRvbWFpbjtfdGhpcy5fb2JqZWN0RGVzY1VSTD0naHlwZXJ0eS1jYXRhbG9ndWU6Ly8nK190aGlzLl9kb21haW4rJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hcy9GYWtlRGF0YVNjaGVtYSc7X3RoaXMuX2NvbnRyb2xsZXJzPXt9O190aGlzLmh5cGVydHlEaXNjb3Zlcnk9bmV3IF9IeXBlcnR5RGlzY292ZXJ5Mi5kZWZhdWx0KGh5cGVydHlVUkwsYnVzKTt2YXIgc3luY2hlcj1uZXcgX1N5bmNoZXIuU3luY2hlcihoeXBlcnR5VVJMLGJ1cyxjb25maWd1cmF0aW9uKTtzeW5jaGVyLm9uTm90aWZpY2F0aW9uKGZ1bmN0aW9uKGV2ZW50KXtfdGhpcy5fb25Ob3RpZmljYXRpb24oZXZlbnQpO30pO190aGlzLl9zeW5jaGVyPXN5bmNoZXI7cmV0dXJuIF90aGlzMjt9X2NyZWF0ZUNsYXNzKEh5cGVydHlDb25uZWN0b3IsW3trZXk6J19vbk5vdGlmaWNhdGlvbicsdmFsdWU6ZnVuY3Rpb24gX29uTm90aWZpY2F0aW9uKGV2ZW50KXt2YXIgX3RoaXM9dGhpcztjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLSBBY2tub3dsZWRnZXMgdGhlIFJlcG9ydGVyIC0tLS0tLS0tLS0tLSBcbicpO2V2ZW50LmFjaygpO2NvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEVORCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFxuJyk7aWYoX3RoaXMuX2NvbnRyb2xsZXJzW2V2ZW50LmZyb21dKXtfdGhpcy5fYXV0b1N1YnNjcmliZShldmVudCk7fWVsc2Uge190aGlzLl9hdXRvQWNjZXB0KGV2ZW50KTt9fX0se2tleTonX2F1dG9TdWJzY3JpYmUnLHZhbHVlOmZ1bmN0aW9uIF9hdXRvU3Vic2NyaWJlKGV2ZW50KXt2YXIgX3RoaXM9dGhpczt2YXIgc3luY2hlcj1fdGhpcy5fc3luY2hlcjtjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0gU3luY2hlciBBdXRvIFN1YnNjcmliZSAtLS0tLS0tLS0tLS0tLS0tIFxuJyk7Y29uc29sZS5pbmZvKCdTdWJzY3JpYmUgVVJMIE9iamVjdCAnLGV2ZW50LHN5bmNoZXIpO3N5bmNoZXIuc3Vic2NyaWJlKF90aGlzLl9vYmplY3REZXNjVVJMLGV2ZW50LnVybCkudGhlbihmdW5jdGlvbihkYXRhT2JqZWN0T2JzZXJ2ZXIpe2NvbnNvbGUuaW5mbygnMS4gUmV0dXJuIFN1YnNjcmliZSBEYXRhIE9iamVjdCBPYnNlcnZlcicsZGF0YU9iamVjdE9ic2VydmVyKTtjb25zb2xlLmxvZyhfdGhpcy5fY29udHJvbGxlcnMpO190aGlzLl9jb250cm9sbGVyc1tldmVudC5mcm9tXS5kYXRhT2JqZWN0T2JzZXJ2ZXI9ZGF0YU9iamVjdE9ic2VydmVyO30pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7Y29uc29sZS5lcnJvcihyZWFzb24pO30pO319LHtrZXk6J19hdXRvQWNjZXB0Jyx2YWx1ZTpmdW5jdGlvbiBfYXV0b0FjY2VwdChldmVudCl7dmFyIF90aGlzPXRoaXM7dmFyIHN5bmNoZXI9X3RoaXMuX3N5bmNoZXI7Y29uc29sZS5pbmZvKCctLS0tLS0tLS0tLSBTeW5jaGVyIFN1YnNjcmliZSAoQXV0byBBY2NlcHQpIC0tLS0tLS0tLS0tLS0gXG4nKTtjb25zb2xlLmluZm8oJ1N1YnNjcmliZSBVUkwgT2JqZWN0ICcsZXZlbnQsc3luY2hlcik7c3luY2hlci5zdWJzY3JpYmUoX3RoaXMuX29iamVjdERlc2NVUkwsZXZlbnQudXJsKS50aGVuKGZ1bmN0aW9uKGRhdGFPYmplY3RPYnNlcnZlcil7Y29uc29sZS5pbmZvKCcxLiBSZXR1cm4gU3Vic2NyaWJlIERhdGEgT2JqZWN0IE9ic2VydmVyJyxkYXRhT2JqZWN0T2JzZXJ2ZXIpO3ZhciBjb25uZWN0aW9uQ29udHJvbGxlcj1uZXcgX0Nvbm5lY3Rpb25Db250cm9sbGVyMi5kZWZhdWx0KHN5bmNoZXIsX3RoaXMuX2RvbWFpbixfdGhpcy5fY29uZmlndXJhdGlvbik7Y29ubmVjdGlvbkNvbnRyb2xsZXIucmVtb3RlUGVlckluZm9ybWF0aW9uPWV2ZW50O2Nvbm5lY3Rpb25Db250cm9sbGVyLmRhdGFPYmplY3RPYnNlcnZlcj1kYXRhT2JqZWN0T2JzZXJ2ZXI7X3RoaXMudHJpZ2dlcignY29ubmVjdG9yOmNvbm5lY3RlZCcsY29ubmVjdGlvbkNvbnRyb2xsZXIpO190aGlzLnRyaWdnZXIoJ2hhdmU6bm90aWZpY2F0aW9uJyxldmVudCk7Y29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gXG4nKTt9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe2NvbnNvbGUuZXJyb3IocmVhc29uKTt9KTt9IC8qKgogICogRXN0YWJsaXNoIGNvbm5lY3Rpb24gd2l0aCBvdGhlciBjbGllbnQgaWRlbnRpZmllcgogICogQHBhcmFtICB7SHlwZXJ0eVVSTH0gSHlwZXJ0eVVSTCAtIERlZmluZSB0aGUgaWRlbnRpZmllciBvZiB0aGUgb3RoZXIgY29tcG9uZW50CiAgKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnMgLSBPYmplY3Qgd2l0aCBvcHRpb25zIHRvIGltcHJvdmUgdGhlIGNvbm5lY3QKICAqL30se2tleTonY29ubmVjdCcsdmFsdWU6ZnVuY3Rpb24gY29ubmVjdChoeXBlcnR5VVJMLHN0cmVhbSl7IC8vIFRPRE86IFBhc3MgYXJndW1lbnQgb3B0aW9ucyBhcyBhIHN0cmVhbSwgYmVjYXVzZSBpcyBzcGVjaWZpYyBvZiBpbXBsZW1lbnRhdGlvbjsKLy8gVE9ETzogQ0hhbmdlIHRoZSBoeXBlcnR5VVJMIGZvciBhIGxpc3Qgb2YgVVJMUwp2YXIgX3RoaXM9dGhpczt2YXIgc3luY2hlcj1fdGhpcy5fc3luY2hlcjtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3ZhciBjb25uZWN0aW9uQ29udHJvbGxlcj12b2lkIDA7Y29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gU3luY2hlciBDcmVhdGUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBcbicpO3N5bmNoZXIuY3JlYXRlKF90aGlzLl9vYmplY3REZXNjVVJMLFtoeXBlcnR5VVJMXSx7fSkudGhlbihmdW5jdGlvbihkYXRhT2JqZWN0UmVwb3J0ZXIpe2NvbnNvbGUuaW5mbygnMS4gUmV0dXJuIENyZWF0ZSBEYXRhIE9iamVjdCBSZXBvcnRlcicsZGF0YU9iamVjdFJlcG9ydGVyKTtjb25uZWN0aW9uQ29udHJvbGxlcj1uZXcgX0Nvbm5lY3Rpb25Db250cm9sbGVyMi5kZWZhdWx0KHN5bmNoZXIsX3RoaXMuX2RvbWFpbixfdGhpcy5fY29uZmlndXJhdGlvbik7Y29ubmVjdGlvbkNvbnRyb2xsZXIuc3RyZWFtPXN0cmVhbTtjb25uZWN0aW9uQ29udHJvbGxlci5kYXRhT2JqZWN0UmVwb3J0ZXI9ZGF0YU9iamVjdFJlcG9ydGVyO190aGlzLl9jb250cm9sbGVyc1toeXBlcnR5VVJMXT1jb25uZWN0aW9uQ29udHJvbGxlcjtyZXNvbHZlKGNvbm5lY3Rpb25Db250cm9sbGVyKTtjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFxuJyk7fSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtjb25zb2xlLmVycm9yKHJlYXNvbik7cmVqZWN0KHJlYXNvbik7fSk7fSk7fX1dKTtyZXR1cm4gSHlwZXJ0eUNvbm5lY3Rvcjt9KF9FdmVudEVtaXR0ZXIzLmRlZmF1bHQpO2Z1bmN0aW9uIGFjdGl2YXRlKGh5cGVydHlVUkwsYnVzLGNvbmZpZ3VyYXRpb24pe3JldHVybiB7bmFtZTonSHlwZXJ0eUNvbm5lY3RvcicsaW5zdGFuY2U6bmV3IEh5cGVydHlDb25uZWN0b3IoaHlwZXJ0eVVSTCxidXMsY29uZmlndXJhdGlvbil9O31tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvRXZlbnRFbWl0dGVyIjo2LCIuLi91dGlscy91dGlscyI6NywiLi9Db25uZWN0aW9uQ29udHJvbGxlciI6Miwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9IeXBlcnR5RGlzY292ZXJ5Ijo4LCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXIiOjl9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCJfX2VzTW9kdWxlIix7dmFsdWU6dHJ1ZX0pOyAvKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8gLy8gZGF0YU9iamVjdFJlcG9ydGVyLmRhdGEgPSB7Ci8vICAgIHN0YXR1cyA6ICJjb25uZWN0ZWQiLAovLyAgICBvd25lciA6ICJoeXBlcnR5Oi8vZXhhbXBsZS5jb20vYWxpY2VoeSIsCi8vICAgIHBlZXIgOiAiY29ubmVjdGlvbjovL2V4YW1wbGUuY29tL2FsaWNlL2JvYjI3MDEyMDE2IiwKLy8gICAgb3duZXJQZWVyIDogewovLyAgICAgICAgICBjb25uZWN0aW9uRGVzY3JpcHRpb246IHsKLy8gICAgICAgICAgICAgc2RwOiAnczRkZmFmMXNhM2YxYXNkNWY0c2RhZmEnLAovLyAgICAgICAgICAgICB0eXBlOiAnb2ZmZXInCi8vICAgICAgICAgIH0sCi8vICAgICAgICAgIGljZUNhbmRpZGF0ZXM6IFt7Ci8vICAgICAgICAgICAgICB0eXBlOiAnY2FuZGlkYXRlJywKLy8gICAgICAgICAgICAgIGNhbmRpZGF0ZTogZXZlbnQuY2FuZGlkYXRlLmNhbmRpZGF0ZSwKLy8gICAgICAgICAgICAgIHNkcE1pZDogZXZlbnQuY2FuZGlkYXRlLnNkcE1pZCwKLy8gICAgICAgICAgICAgIHNkcE1MaW5lSW5kZXg6IGV2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4Ci8vICAgICAgICAgICAgfSwKLy8gICAgICAgICAgICB7Ci8vICAgICAgICAgICAgICB0eXBlOiAnY2FuZGlkYXRlJywKLy8gICAgICAgICAgICAgIGNhbmRpZGF0ZTogZXZlbnQuY2FuZGlkYXRlLmNhbmRpZGF0ZSwKLy8gICAgICAgICAgICAgIHNkcE1pZDogZXZlbnQuY2FuZGlkYXRlLnNkcE1pZCwKLy8gICAgICAgICAgICAgIHNkcE1MaW5lSW5kZXg6IGV2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4Ci8vICAgICAgICAgICAgfSwKLy8gICAgICAgICAgICAuLi4uLgovLyAgICAgICAgXQovLyAgICAgIH0KLy8gIH0KdmFyIGNvbm5lY3Rpb249e25hbWU6Jycsc3RhdHVzOiJjb25uZWN0ZWQiLG93bmVyOiJoeXBlcnR5Oi8vZXhhbXBsZS5jb20vYWxpY2VoeSIscGVlcjoiY29ubmVjdGlvbjovL2V4YW1wbGUuY29tL2FsaWNlL2JvYjI3MDEyMDE2Iixvd25lclBlZXI6e2Nvbm5lY3Rpb25EZXNjcmlwdGlvbjp7fSxpY2VDYW5kaWRhdGVzOltdfX07ZXhwb3J0cy5kZWZhdWx0PWNvbm5lY3Rpb247bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOnRydWV9KTsgLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovdmFyIHBlZXI9e25hbWU6JycsY29ubmVjdGlvbkRlc2NyaXB0aW9uOnt9LGljZUNhbmRpZGF0ZXM6W119O2V4cG9ydHMuZGVmYXVsdD1wZWVyO21vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTp0cnVlfSk7dmFyIF9jcmVhdGVDbGFzcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LHByb3BzKXtmb3IodmFyIGk9MDtpPHByb3BzLmxlbmd0aDtpKyspe3ZhciBkZXNjcmlwdG9yPXByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZT1kZXNjcmlwdG9yLmVudW1lcmFibGV8fGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlPXRydWU7aWYoInZhbHVlIiBpbiBkZXNjcmlwdG9yKWRlc2NyaXB0b3Iud3JpdGFibGU9dHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGRlc2NyaXB0b3Iua2V5LGRlc2NyaXB0b3IpO319cmV0dXJuIGZ1bmN0aW9uKENvbnN0cnVjdG9yLHByb3RvUHJvcHMsc3RhdGljUHJvcHMpe2lmKHByb3RvUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUscHJvdG9Qcm9wcyk7aWYoc3RhdGljUHJvcHMpZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO307fSgpO2Z1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSxDb25zdHJ1Y3Rvcil7aWYoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7fX0gLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovIC8qKgogKiBFdmVudEVtaXR0ZXIKICogQWxsIGNsYXNzZXMgd2hpY2ggZXh0ZW5kcyB0aGlzLCBjYW4gaGF2ZSBhZGRFdmVudExpc3RlbmVyIGFuZCB0cmlnZ2VyIGV2ZW50czsKICovdmFyIEV2ZW50RW1pdHRlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIEV2ZW50RW1pdHRlcigpe19jbGFzc0NhbGxDaGVjayh0aGlzLEV2ZW50RW1pdHRlcik7fV9jcmVhdGVDbGFzcyhFdmVudEVtaXR0ZXIsW3trZXk6ImFkZEV2ZW50TGlzdGVuZXIiLCAvKioKICAgKiBhZGRFdmVudExpc3RlbmVyIGxpc3RlbiBmb3IgYW4gZXZlbnRUeXBlCiAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgIGV2ZW50VHlwZSAtIGxpc3RlbmluZyBmb3IgdGhpcyB0eXBlIG9mIGV2ZW50CiAgICogQHBhcmFtICB7RnVuY3Rpb259ICAgICAgIGNiICAgICAgICAtIGNhbGxiYWNrIGZ1bmN0aW9uIHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB0aGUgZXZlbnQgaXQgaXMgaW52b2tlZAogICAqL3ZhbHVlOmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLGNiKXt2YXIgX3RoaXM9dGhpcztfdGhpc1tldmVudFR5cGVdPWNiO30gLyoqCiAgICogSW52b2tlIHRoZSBldmVudFR5cGUKICAgKiBAcGFyYW0gIHtzdHJpbmd9IGV2ZW50VHlwZSAtIGV2ZW50IHdpbGwgYmUgaW52b2tlZAogICAqIEBwYXJhbSAge29iamVjdH0gcGFyYW1zIC0gcGFyYW1ldGVycyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgYWRkRXZlbnRMaXN0ZW5lcgogICAqL30se2tleToidHJpZ2dlciIsdmFsdWU6ZnVuY3Rpb24gdHJpZ2dlcihldmVudFR5cGUscGFyYW1zKXt2YXIgX3RoaXM9dGhpcztpZihfdGhpc1tldmVudFR5cGVdKXtfdGhpc1tldmVudFR5cGVdKHBhcmFtcyk7fX19XSk7cmV0dXJuIEV2ZW50RW1pdHRlcjt9KCk7ZXhwb3J0cy5kZWZhdWx0PUV2ZW50RW1pdHRlcjttb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCJfX2VzTW9kdWxlIix7dmFsdWU6dHJ1ZX0pO2V4cG9ydHMuZGl2aWRlVVJMPWRpdmlkZVVSTDtleHBvcnRzLmRlZXBDbG9uZT1kZWVwQ2xvbmU7ZXhwb3J0cy5nZXRDb25maWc9Z2V0Q29uZmlnO2V4cG9ydHMuZ2V0VXNlck1lZGlhPWdldFVzZXJNZWRpYTtleHBvcnRzLnNlcmlhbGl6ZT1zZXJpYWxpemU7ZXhwb3J0cy5nZXRUZW1wbGF0ZT1nZXRUZW1wbGF0ZTsgLyoqCiAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiovIC8vIGpzaGludCBicm93c2VyOnRydWUsIGpxdWVyeTogdHJ1ZQovLyBqc2hpbnQgdmFyc3RtdDogdHJ1ZQovKiBnbG9iYWwgSGFuZGxlYmFycyAqLyAvKioKICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bAogKiBAbW9kdWxlIHV0aWxzCiAqLyAvKioKICogQHR5cGVkZWYgZGl2aWRlVVJMCiAqIEB0eXBlIE9iamVjdAogKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gaWRlbnRpdHkgVGhlIGlkZW50aXR5IG9mIFVSTAogKi8gLyoqCiAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQogKiBAcGFyYW0gIHtVUkwuVVJMfSB1cmwgLSB1cmwgYWRkcmVzcwogKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMCiAqL2Z1bmN0aW9uIGRpdmlkZVVSTCh1cmwpeyAvLyBsZXQgcmUgPSAvKFthLXpBLVotXSopPzpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fVwuW2Etel17Miw2fVxiKSooXC9bXC9cZFx3XC4tXSopKig/OltcP10pKiguKykqL2dpOwp2YXIgcmU9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2k7dmFyIHN1YnN0PSckMSwkMiwkMyc7dmFyIHBhcnRzPXVybC5yZXBsYWNlKHJlLHN1YnN0KS5zcGxpdCgnLCcpOyAvLyBJZiB0aGUgdXJsIGhhcyBubyBwcm90b2NvbCwgdGhlIGRlZmF1bHQgcHJvdG9jb2wgc2V0IGlzIGh0dHBzCmlmKHBhcnRzWzBdPT09dXJsKXtwYXJ0c1swXT0naHR0cHMnO3BhcnRzWzFdPXVybDt9dmFyIHJlc3VsdD17dHlwZTpwYXJ0c1swXSxkb21haW46cGFydHNbMV0saWRlbnRpdHk6cGFydHNbMl19O3JldHVybiByZXN1bHQ7fSAvKioKICogTWFrZSBhIENPUFkgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICogQHBhcmFtICB7T2JqZWN0fSAgb2JqIC0gb2JqZWN0IHRvIGJlIGNsb25lZAogKiBAcmV0dXJuIHtPYmplY3R9CiAqL2Z1bmN0aW9uIGRlZXBDbG9uZShvYmopeyAvL1RPRE86IHNpbXBsZSBidXQgaW5lZmZpY2llbnQgSlNPTiBkZWVwIGNsb25lLi4uCmlmKG9iailyZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTt9IC8qKgogKiBHZXQgdGhlIGNvbmZpZ3VyYXRpb24gZnJvbSBhbiBqc29uIGZpbGU7CiAqIEBwYXJhbSAge0pTT05PYmplY3R9IGpzb25GaWxlCiAqIEByZXR1cm4ge29iamVjdH0KICovZnVuY3Rpb24gZ2V0Q29uZmlnKEpTT05PYmplY3Qpe2NvbnNvbGUubG9nKCdkZXZlbG9wbWVudCcpO3JldHVybiBKU09OT2JqZWN0WydkZXZlbG9wbWVudCddO30gLyoqCiAqIEdldCBXZWJSVEMgQVBJIHJlc291cmNlcwogKiBAcGFyYW0gIHtPYmplY3R9ICAgICBvcHRpb25zIE9iamVjdCBjb250YWluaW5nIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHJlc291cmNlcyB3aWxsIGJlIHVzZWQgKGNhbWVyYSwgbWljLCByZXNvbHV0aW9uLCBldGMpOwogKiBAcmV0dXJuIHtQcm9taXNlfQogKi9mdW5jdGlvbiBnZXRVc2VyTWVkaWEoY29uc3RyYWludHMpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4oZnVuY3Rpb24obWVkaWFTdHJlYW0pe3Jlc29sdmUobWVkaWFTdHJlYW0pO30pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7cmVqZWN0KHJlYXNvbik7fSk7fSk7fWZ1bmN0aW9uIHNlcmlhbGl6ZSgpeyQuZm4uc2VyaWFsaXplT2JqZWN0PWZ1bmN0aW9uKCl7dmFyIG89e307dmFyIGE9dGhpcy5zZXJpYWxpemVBcnJheSgpOyQuZWFjaChhLGZ1bmN0aW9uKCl7aWYob1t0aGlzLm5hbWVdIT09dW5kZWZpbmVkKXtpZighb1t0aGlzLm5hbWVdLnB1c2gpe29bdGhpcy5uYW1lXT1bb1t0aGlzLm5hbWVdXTt9b1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZXx8JycpO31lbHNlIHtvW3RoaXMubmFtZV09dGhpcy52YWx1ZXx8Jyc7fX0pO3JldHVybiBvO307JC5mbi5zZXJpYWxpemVPYmplY3RBcnJheT1mdW5jdGlvbigpe3ZhciBvPXt9O3ZhciBhPXRoaXMuc2VyaWFsaXplQXJyYXkoKTskLmVhY2goYSxmdW5jdGlvbigpe2lmKG9bdGhpcy5uYW1lXSE9PXVuZGVmaW5lZCl7aWYoIW9bdGhpcy5uYW1lXS5wdXNoKXtvW3RoaXMubmFtZV09W29bdGhpcy5uYW1lXV07fW9bdGhpcy5uYW1lXS5wdXNoKHRoaXMudmFsdWV8fCcnKTt9ZWxzZSB7aWYoIW9bdGhpcy5uYW1lXSlvW3RoaXMubmFtZV09W107b1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZXx8JycpO319KTtyZXR1cm4gbzt9O31mdW5jdGlvbiBnZXRUZW1wbGF0ZShwYXRoLHNjcmlwdCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtpZihIYW5kbGViYXJzLnRlbXBsYXRlcz09PXVuZGVmaW5lZHx8SGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV09PT11bmRlZmluZWQpe0hhbmRsZWJhcnMudGVtcGxhdGVzPXt9O31lbHNlIHtyZXNvbHZlKEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdKTt9dmFyIHRlbXBsYXRlRmlsZT0kLmFqYXgoe3VybDpwYXRoKycuaGJzJyxzdWNjZXNzOmZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSl7SGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV09SGFuZGxlYmFycy5jb21waWxlKGRhdGEpO30sZmFpbDpmdW5jdGlvbiBmYWlsKHJlYXNvbil7cmV0dXJuIHJlYXNvbjt9fSk7dmFyIHNjcmlwdEZpbGU9JC5nZXRTY3JpcHQoc2NyaXB0KTt2YXIgcmVxdWVzdHM9W107aWYocGF0aClyZXF1ZXN0cy5wdXNoKHRlbXBsYXRlRmlsZSk7aWYoc2NyaXB0KXJlcXVlc3RzLnB1c2goc2NyaXB0RmlsZSk7UHJvbWlzZS5hbGwocmVxdWVzdHMpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtyZXNvbHZlKEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdKTt9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe3JlamVjdChyZWFzb24pO30pO30pO30KCn0se31dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKGdsb2JhbCl7Ci8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKLy8gRGlzdHJpYnV0aW9uIGZpbGUgZm9yIEh5cGVydHlEaXNjb3ZlcnkuanMgCi8vIHZlcnNpb246IDAuMi4wCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciByO3I9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHIuSHlwZXJ0eURpc2NvdmVyeT1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHIsdCxvKXtmdW5jdGlvbiBuKHMsdSl7aWYoIXRbc10pe2lmKCFyW3NdKXt2YXIgYT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciBkPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyBkLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGR9dmFyIGY9dFtzXT17ZXhwb3J0czp7fX07cltzXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgdD1yW3NdWzFdW2VdO3JldHVybiBuKHQ/dDplKX0sZixmLmV4cG9ydHMsZSxyLHQsbyl9cmV0dXJuIHRbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8by5sZW5ndGg7cysrKW4ob1tzXSk7cmV0dXJuIG59KHsxOltmdW5jdGlvbihlLHIsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG8oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPWUoIi4vaHlwZXJ0eS1kaXNjb3ZlcnkvSHlwZXJ0eURpc2NvdmVyeSIpLGk9byhuKTt0WyJkZWZhdWx0Il09aVsiZGVmYXVsdCJdLHIuZXhwb3J0cz10WyJkZWZhdWx0Il19LHsiLi9oeXBlcnR5LWRpc2NvdmVyeS9IeXBlcnR5RGlzY292ZXJ5IjoyfV0sMjpbZnVuY3Rpb24oZSxyLHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBvKGUscil7aWYoIShlIGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIpe2Zvcih2YXIgdD0wO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbz1yW3RdO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsby5rZXksbyl9fXJldHVybiBmdW5jdGlvbihyLHQsbyl7cmV0dXJuIHQmJmUoci5wcm90b3R5cGUsdCksbyYmZShyLG8pLHJ9fSgpLGk9ZSgiLi4vdXRpbHMvdXRpbHMiKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShyLHQpe28odGhpcyxlKTt2YXIgbj10aGlzO24ubWVzc2FnZUJ1cz10LG4uZG9tYWluPSgwLGkuZGl2aWRlVVJMKShyKS5kb21haW4sbi5kaXNjb3ZlcnlVUkw9cn1yZXR1cm4gbihlLFt7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RQZXJOYW1lIix2YWx1ZTpmdW5jdGlvbihlLHIpe3ZhciB0PXRoaXMsbz12b2lkIDA7bz1yP3I6dC5kb21haW47dmFyIG49e3R5cGU6InJlYWQiLGZyb206dC5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbysiLyIsYm9keTp7cmVzb3VyY2U6ImRhdGFPYmplY3Q6Ly8iK2V9fTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSxyKXt0Lm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobixmdW5jdGlvbih0KXt2YXIgbz10LmJvZHkudmFsdWUudXJsO28/ZShvKTpyKCJEYXRhT2JqZWN0IG5hbWUgZG9lcyBub3QgZXhpc3QiKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydHlQZXJVc2VyIix2YWx1ZTpmdW5jdGlvbihlLHIpe3ZhciB0PXRoaXMsbz12b2lkIDA7bz1yP3I6dC5kb21haW47dmFyIG49InVzZXI6Ly8iK2Uuc3Vic3RyaW5nKGUuaW5kZXhPZigiQCIpKzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLGUuaW5kZXhPZigiQCIpKSxpPXt0eXBlOiJyZWFkIixmcm9tOnQuZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK28rIi8iLGJvZHk6e3Jlc291cmNlOm59fTtyZXR1cm4gY29uc29sZS5sb2coIk1lc3NhZ2U6ICIsaSxvLG4pLG5ldyBQcm9taXNlKGZ1bmN0aW9uKHIsbyl7dC5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGksZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIm1lc3NhZ2UgcmVwbHkiLHQpO3ZhciBuPXZvaWQgMCxpPXZvaWQgMCxzPXZvaWQgMCx1PXQuYm9keS52YWx1ZTtmb3IobiBpbiB1KWlmKHZvaWQgMCE9PXVbbl0ubGFzdE1vZGlmaWVkKWlmKHZvaWQgMD09PWkpaT1uZXcgRGF0ZSh1W25dLmxhc3RNb2RpZmllZCkscz1uO2Vsc2V7dmFyIGE9bmV3IERhdGUodVtuXS5sYXN0TW9kaWZpZWQpO2kuZ2V0VGltZSgpPGEuZ2V0VGltZSgpJiYoaT1hLHM9bil9Y29uc29sZS5sb2coIkxhc3QgSHlwZXJ0eTogIixzLGkpO3ZhciBkPXM7aWYodm9pZCAwPT09ZClyZXR1cm4gbygiVXNlciBIeXBlcnR5IG5vdCBmb3VuZCIpO3ZhciBmPXtpZDplLGRlc2NyaXB0b3I6dVtkXS5kZXNjcmlwdG9yLGh5cGVydHlVUkw6ZH07Y29uc29sZS5sb2coIj09PT4gaHlwZXJ0eURpc2NvdmVyeSBtZXNzYWdlQnVuZGxlOiAiLGYpLHIoZil9KX0pfX1dKSxlfSgpO3RbImRlZmF1bHQiXT1zLHIuZXhwb3J0cz10WyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMiOjN9XSwzOltmdW5jdGlvbihlLHIsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG8oZSl7dmFyIHI9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2ksdD0iJDEsJDIsJDMiLG89ZS5yZXBsYWNlKHIsdCkuc3BsaXQoIiwiKTtvWzBdPT09ZSYmKG9bMF09Imh0dHBzIixvWzFdPWUpO3ZhciBuPXt0eXBlOm9bMF0sZG9tYWluOm9bMV0saWRlbnRpdHk6b1syXX07cmV0dXJuIG59ZnVuY3Rpb24gbihlKXtyZXR1cm4gZT9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTp2b2lkIDB9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZGl2aWRlVVJMPW8sdC5kZWVwQ2xvbmU9bn0se31dfSx7fSxbMV0pKDEpfSk7Cn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBTeW5jaGVyLmpzIAovLyB2ZXJzaW9uOiAwLjIuMAoKIWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyx0LlN5bmNoZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gbyhzLGEpe2lmKCFuW3NdKXtpZighdFtzXSl7dmFyIHU9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWEmJnUpcmV0dXJuIHUocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgYz1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgYy5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixjfXZhciBsPW5bc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtzXVsxXVtlXTtyZXR1cm4gbyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPHIubGVuZ3RoO3MrKylvKHJbc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LG4pe09iamVjdC5vYnNlcnZlJiYhQXJyYXkub2JzZXJ2ZSYmZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7dmFyIG49ZS5nZXROb3RpZmllcixyPSJwZXJmb3JtQ2hhbmdlIixvPSJfb3JpZ2luYWwiLGk9InNwbGljZSIscz17cHVzaDpmdW5jdGlvbiB1KGUpe3ZhciB0PWFyZ3VtZW50cyxzPXVbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gbih0aGlzKVtyXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnMtdC5sZW5ndGgsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHVuc2hpZnQ6ZnVuY3Rpb24gYyhlKXt2YXIgdD1hcmd1bWVudHMscz1jW29dLmFwcGx5KHRoaXMsdCk7cmV0dXJuIG4odGhpcylbcl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDowLGFkZGVkQ291bnQ6dC5sZW5ndGgscmVtb3ZlZDpbXX19KSxzfSxwb3A6ZnVuY3Rpb24gbCgpe3ZhciBlPXRoaXMubGVuZ3RoLHQ9bFtvXS5jYWxsKHRoaXMpO3JldHVybiB0aGlzLmxlbmd0aCE9PWUmJm4odGhpcylbcl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDp0aGlzLmxlbmd0aCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzaGlmdDpmdW5jdGlvbiBmKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1mW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmbih0aGlzKVtyXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDowLHJlbW92ZWQ6W3RdfX0sdGhpcyksdH0sc3BsaWNlOmZ1bmN0aW9uIGQoZSx0KXt2YXIgcz1hcmd1bWVudHMsYT1kW29dLmFwcGx5KHRoaXMscyk7cmV0dXJuKGEubGVuZ3RofHxzLmxlbmd0aD4yKSYmbih0aGlzKVtyXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OmUsYWRkZWRDb3VudDpzLmxlbmd0aC0yLHJlbW92ZWQ6YX19LHRoaXMpLGF9fTtmb3IodmFyIGEgaW4gcylzW2FdW29dPXQucHJvdG90eXBlW2FdLHQucHJvdG90eXBlW2FdPXNbYV07dC5vYnNlcnZlPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGUub2JzZXJ2ZSh0LG4sWyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLGldKX0sdC51bm9ic2VydmU9ZS51bm9ic2VydmV9KE9iamVjdCxBcnJheSl9LHt9XSwyOltmdW5jdGlvbihlLHQsbil7d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMuZz1bXSx0aGlzLms9ZX1mdW5jdGlvbiBuKGUpeyFmdW5jdGlvbiBuKCl7dmFyIHI9ZS50YWtlUmVjb3JkcygpO3IubGVuZ3RoJiZlLmsocixlKSxlLmY9c2V0VGltZW91dChuLHQuX3BlcmlvZCl9KCl9ZnVuY3Rpb24gcih0KXt2YXIgbixyPXt0eXBlOm51bGwsdGFyZ2V0Om51bGwsYWRkZWROb2RlczpbXSxyZW1vdmVkTm9kZXM6W10scHJldmlvdXNTaWJsaW5nOm51bGwsbmV4dFNpYmxpbmc6bnVsbCxhdHRyaWJ1dGVOYW1lOm51bGwsYXR0cmlidXRlTmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6bnVsbH07Zm9yKG4gaW4gdClyW25dIT09ZSYmdFtuXSE9PWUmJihyW25dPXRbbl0pO3JldHVybiByfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj1hKGUsdCk7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvLHU9ci5sZW5ndGg7dC5hJiZuLmEmJmkocixlLG4uYSx0LmQpLCh0LmJ8fHQuZSkmJihvPXMocixlLG4sdCkpLChvfHxyLmxlbmd0aCE9PXUpJiYobj1hKGUsdCkpfX1mdW5jdGlvbiBpKHQsbixvLGkpe2Zvcih2YXIgcyxhLHU9e30sYz1uLmF0dHJpYnV0ZXMsbD1jLmxlbmd0aDtsLS07KXM9Y1tsXSxhPXMubmFtZSxpJiZpW2FdPT09ZXx8KHMudmFsdWUhPT1vW2FdJiZ0LnB1c2gocih7dHlwZToiYXR0cmlidXRlcyIsdGFyZ2V0Om4sYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV0sYXR0cmlidXRlTmFtZXNwYWNlOnMubmFtZXNwYWNlVVJJfSkpLHVbYV09ITApO2ZvcihhIGluIG8pdVthXXx8dC5wdXNoKHIoe3RhcmdldDpuLHR5cGU6ImF0dHJpYnV0ZXMiLGF0dHJpYnV0ZU5hbWU6YSxvbGRWYWx1ZTpvW2FdfSkpfWZ1bmN0aW9uIHModCxuLG8scyl7ZnVuY3Rpb24gYShlLG4sbyxhLHUpe3ZhciBsPWUubGVuZ3RoLTE7dT0tfigobC11KS8yKTtmb3IodmFyIGYsZCxwO3A9ZS5wb3AoKTspZj1vW3AuaF0sZD1hW3AuaV0scy5iJiZ1JiZNYXRoLmFicyhwLmgtcC5pKT49bCYmKHQucHVzaChyKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpuLGFkZGVkTm9kZXM6W2ZdLHJlbW92ZWROb2RlczpbZl0sbmV4dFNpYmxpbmc6Zi5uZXh0U2libGluZyxwcmV2aW91c1NpYmxpbmc6Zi5wcmV2aW91c1NpYmxpbmd9KSksdS0tKSxzLmEmJmQuYSYmaSh0LGYsZC5hLHMuZCkscy5jJiYzPT09Zi5ub2RlVHlwZSYmZi5ub2RlVmFsdWUhPT1kLmMmJnQucHVzaChyKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6Zn0pKSxzLmUmJmMoZixkKX1mdW5jdGlvbiBjKG4sbyl7Zm9yKHZhciBkLHAsYixoLHYseT1uLmNoaWxkTm9kZXMsXz1vLmIsZz15Lmxlbmd0aCxPPV8/Xy5sZW5ndGg6MCxqPTAsbT0wLHc9MDtnPm18fE8+dzspaD15W21dLHY9KGI9X1t3XSkmJmIuaixoPT09dj8ocy5hJiZiLmEmJmkodCxoLGIuYSxzLmQpLHMuYyYmYi5jIT09ZSYmaC5ub2RlVmFsdWUhPT1iLmMmJnQucHVzaChyKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6aH0pKSxwJiZhKHAsbix5LF8saikscy5lJiYoaC5jaGlsZE5vZGVzLmxlbmd0aHx8Yi5iJiZiLmIubGVuZ3RoKSYmYyhoLGIpLG0rKyx3KyspOihsPSEwLGR8fChkPXt9LHA9W10pLGgmJihkW2I9dShoKV18fChkW2JdPSEwLC0xPT09KGI9ZihfLGgsdywiaiIpKT9zLmImJih0LnB1c2gocih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6bixhZGRlZE5vZGVzOltoXSxuZXh0U2libGluZzpoLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpoLnByZXZpb3VzU2libGluZ30pKSxqKyspOnAucHVzaCh7aDptLGk6Yn0pKSxtKyspLHYmJnYhPT15W21dJiYoZFtiPXUodildfHwoZFtiXT0hMCwtMT09PShiPWYoeSx2LG0pKT9zLmImJih0LnB1c2gocih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6by5qLHJlbW92ZWROb2Rlczpbdl0sbmV4dFNpYmxpbmc6X1t3KzFdLHByZXZpb3VzU2libGluZzpfW3ctMV19KSksai0tKTpwLnB1c2goe2g6YixpOnd9KSksdysrKSk7cCYmYShwLG4seSxfLGopfXZhciBsO3JldHVybiBjKG4sbyksbH1mdW5jdGlvbiBhKGUsdCl7dmFyIG49ITA7cmV0dXJuIGZ1bmN0aW9uIHIoZSl7dmFyIG89e2o6ZX07cmV0dXJuIXQuY3x8MyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlPyh0LmEmJm4mJjE9PT1lLm5vZGVUeXBlJiYoby5hPWwoZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuZCYmIXQuZFtuLm5hbWVdfHwoZVtuLm5hbWVdPW4udmFsdWUpLGV9KSksbiYmKHQuYnx8dC5jfHx0LmEmJnQuZSkmJihvLmI9YyhlLmNoaWxkTm9kZXMscikpLG49dC5lKTpvLmM9ZS5ub2RlVmFsdWUsb30oZSl9ZnVuY3Rpb24gdShlKXt0cnl7cmV0dXJuIGUuaWR8fChlLm1vX2lkPWUubW9faWR8fGQrKyl9Y2F0Y2godCl7dHJ5e3JldHVybiBlLm5vZGVWYWx1ZX1jYXRjaChuKXtyZXR1cm4gZCsrfX19ZnVuY3Rpb24gYyhlLHQpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspbltyXT10KGVbcl0scixlKTtyZXR1cm4gbn1mdW5jdGlvbiBsKGUsdCl7Zm9yKHZhciBuPXt9LHI9MDtyPGUubGVuZ3RoO3IrKyluPXQobixlW3JdLHIsZSk7cmV0dXJuIG59ZnVuY3Rpb24gZihlLHQsbixyKXtmb3IoO248ZS5sZW5ndGg7bisrKWlmKChyP2Vbbl1bcl06ZVtuXSk9PT10KXJldHVybiBuO3JldHVybi0xfXQuX3BlcmlvZD0zMCx0LnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj17YTohISh0LmF0dHJpYnV0ZXN8fHQuYXR0cmlidXRlRmlsdGVyfHx0LmF0dHJpYnV0ZU9sZFZhbHVlKSxiOiEhdC5jaGlsZExpc3QsZTohIXQuc3VidHJlZSxjOiEoIXQuY2hhcmFjdGVyRGF0YSYmIXQuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKX0saT10aGlzLmcscz0wO3M8aS5sZW5ndGg7cysrKWlbc10ubT09PWUmJmkuc3BsaWNlKHMsMSk7dC5hdHRyaWJ1dGVGaWx0ZXImJihyLmQ9bCh0LmF0dHJpYnV0ZUZpbHRlcixmdW5jdGlvbihlLHQpe3JldHVybiBlW3RdPSEwLGV9KSksaS5wdXNoKHttOmUsbDpvKGUscil9KSx0aGlzLmZ8fG4odGhpcyl9LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9dGhpcy5nLG49MDtuPHQubGVuZ3RoO24rKyl0W25dLmwoZSk7cmV0dXJuIGV9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLmc9W10sY2xlYXJUaW1lb3V0KHRoaXMuZiksdGhpcy5mPW51bGx9fTt2YXIgZD0xO3JldHVybiB0fSh2b2lkIDApfSx7fV0sMzpbZnVuY3Rpb24oZSx0LG4pe09iamVjdC5vYnNlcnZlfHxmdW5jdGlvbihlLHQsbixyKXsidXNlIHN0cmljdCI7dmFyIG8saSxzPVsiYWRkIiwidXBkYXRlIiwiZGVsZXRlIiwicmVjb25maWd1cmUiLCJzZXRQcm90b3R5cGUiLCJwcmV2ZW50RXh0ZW5zaW9ucyJdLGE9dC5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PWUuY2FsbCh0KX19KGUucHJvdG90eXBlLnRvU3RyaW5nKSx1PXQucHJvdG90eXBlLmluZGV4T2Y/dC5pbmRleE9mfHxmdW5jdGlvbihlLG4scil7cmV0dXJuIHQucHJvdG90eXBlLmluZGV4T2YuY2FsbChlLG4scil9OmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bnx8MDtyPGUubGVuZ3RoO3IrKylpZihlW3JdPT09dClyZXR1cm4gcjtyZXR1cm4tMX0sYz1uLk1hcCE9PXImJk1hcC5wcm90b3R5cGUuZm9yRWFjaD9mdW5jdGlvbigpe3JldHVybiBuZXcgTWFwfTpmdW5jdGlvbigpe3ZhciBlPVtdLHQ9W107cmV0dXJue3NpemU6MCxoYXM6ZnVuY3Rpb24odCl7cmV0dXJuIHUoZSx0KT4tMX0sZ2V0OmZ1bmN0aW9uKG4pe3JldHVybiB0W3UoZSxuKV19LHNldDpmdW5jdGlvbihuLHIpe3ZhciBvPXUoZSxuKTstMT09PW8/KGUucHVzaChuKSx0LnB1c2gociksdGhpcy5zaXplKyspOnRbb109cn0sImRlbGV0ZSI6ZnVuY3Rpb24obil7dmFyIHI9dShlLG4pO3I+LTEmJihlLnNwbGljZShyLDEpLHQuc3BsaWNlKHIsMSksdGhpcy5zaXplLS0pfSxmb3JFYWNoOmZ1bmN0aW9uKG4pe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKW4uY2FsbChhcmd1bWVudHNbMV0sdFtyXSxlW3JdLHRoaXMpfX19LGw9ZS5nZXRPd25Qcm9wZXJ0eU5hbWVzP2Z1bmN0aW9uKCl7dmFyIHQ9ZS5nZXRPd25Qcm9wZXJ0eU5hbWVzO3RyeXthcmd1bWVudHMuY2FsbGVlfWNhdGNoKG4pe3ZhciByPSh0KHUpLmpvaW4oIiAiKSsiICIpLnJlcGxhY2UoL3Byb3RvdHlwZSB8bGVuZ3RoIHxuYW1lIC9nLCIiKS5zbGljZSgwLC0xKS5zcGxpdCgiICIpO3IubGVuZ3RoJiYodD1mdW5jdGlvbih0KXt2YXIgbj1lLmdldE93blByb3BlcnR5TmFtZXModCk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQpZm9yKHZhciBvLGk9MDtpPHIubGVuZ3RoOykobz11KG4scltpKytdKSk+LTEmJm4uc3BsaWNlKG8sMSk7cmV0dXJuIG59KX1yZXR1cm4gdH0oKTpmdW5jdGlvbih0KXt2YXIgbixyLG89W107aWYoImhhc093blByb3BlcnR5ImluIHQpZm9yKG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiZvLnB1c2gobik7ZWxzZXtyPWUuaGFzT3duUHJvcGVydHk7Zm9yKG4gaW4gdClyLmNhbGwodCxuKSYmby5wdXNoKG4pfXJldHVybiBhKHQpJiZvLnB1c2goImxlbmd0aCIpLG99LGY9ZS5nZXRQcm90b3R5cGVPZixkPWUuZGVmaW5lUHJvcGVydGllcyYmZS5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IscD1uLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8bi53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKCl7dmFyIGU9K25ldyBEYXRlLHQ9ZTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtuKCh0PStuZXcgRGF0ZSktZSl9LDE3KX19KCksYj1mdW5jdGlvbihlLHQsbil7dmFyIHI9by5nZXQoZSk7cj8odihyLGUpLE8oZSxyLHQsbikpOihyPWgoZSksTyhlLHIsdCxuKSwxPT09by5zaXplJiZwKHkpKX0saD1mdW5jdGlvbih0LG4pe3ZhciByLGk9bCh0KSxzPVtdLGE9MCxuPXtoYW5kbGVyczpjKCksZnJvemVuOmUuaXNGcm96ZW4/ZS5pc0Zyb3plbih0KTohMSxleHRlbnNpYmxlOmUuaXNFeHRlbnNpYmxlP2UuaXNFeHRlbnNpYmxlKHQpOiEwLHByb3RvOmYmJmYodCkscHJvcGVydGllczppLHZhbHVlczpzLG5vdGlmaWVyOmcodCxuKX07aWYoZClmb3Iocj1uLmRlc2NyaXB0b3JzPVtdO2E8aS5sZW5ndGg7KXJbYV09ZCh0LGlbYV0pLHNbYV09dFtpW2ErK11dO2Vsc2UgZm9yKDthPGkubGVuZ3RoOylzW2FdPXRbaVthKytdXTtyZXR1cm4gby5zZXQodCxuKSxufSx2PWZ1bmN0aW9uKCl7dmFyIHQ9ZD9mdW5jdGlvbihlLHQsbixyLG8pe3ZhciBpPXQucHJvcGVydGllc1tuXSxzPWVbaV0sYT10LnZhbHVlc1tuXSx1PXQuZGVzY3JpcHRvcnNbbl07InZhbHVlImluIG8mJihhPT09cz8wPT09YSYmMS9hIT09MS9zOmE9PT1hfHxzPT09cykmJihqKGUsdCx7bmFtZTppLHR5cGU6InVwZGF0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6YX0sciksdC52YWx1ZXNbbl09cyksIXUuY29uZmlndXJhYmxlfHxvLmNvbmZpZ3VyYWJsZSYmby53cml0YWJsZT09PXUud3JpdGFibGUmJm8uZW51bWVyYWJsZT09PXUuZW51bWVyYWJsZSYmby5nZXQ9PT11LmdldCYmby5zZXQ9PT11LnNldHx8KGooZSx0LHtuYW1lOmksdHlwZToicmVjb25maWd1cmUiLG9iamVjdDplLG9sZFZhbHVlOmF9LHIpLHQuZGVzY3JpcHRvcnNbbl09byl9OmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBvPXQucHJvcGVydGllc1tuXSxpPWVbb10scz10LnZhbHVlc1tuXTsocz09PWk/MD09PXMmJjEvcyE9PTEvaTpzPT09c3x8aT09PWkpJiYoaihlLHQse25hbWU6byx0eXBlOiJ1cGRhdGUiLG9iamVjdDplLG9sZFZhbHVlOnN9LHIpLHQudmFsdWVzW25dPWkpfSxuPWQ/ZnVuY3Rpb24oZSxuLHIsbyxpKXtmb3IodmFyIHMsYT1uLmxlbmd0aDtyJiZhLS07KW51bGwhPT1uW2FdJiYocz1kKGUsblthXSksci0tLHM/dChlLG8sYSxpLHMpOihqKGUsbyx7bmFtZTpuW2FdLHR5cGU6ImRlbGV0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6by52YWx1ZXNbYV19LGkpLG8ucHJvcGVydGllcy5zcGxpY2UoYSwxKSxvLnZhbHVlcy5zcGxpY2UoYSwxKSxvLmRlc2NyaXB0b3JzLnNwbGljZShhLDEpKSl9OmZ1bmN0aW9uKGUsdCxuLHIsbyl7Zm9yKHZhciBpPXQubGVuZ3RoO24mJmktLTspbnVsbCE9PXRbaV0mJihqKGUscix7bmFtZTp0W2ldLHR5cGU6ImRlbGV0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6ci52YWx1ZXNbaV19LG8pLHIucHJvcGVydGllcy5zcGxpY2UoaSwxKSxyLnZhbHVlcy5zcGxpY2UoaSwxKSxuLS0pfTtyZXR1cm4gZnVuY3Rpb24ocixvLGkpe2lmKHIuaGFuZGxlcnMuc2l6ZSYmIXIuZnJvemVuKXt2YXIgcyxhLGMscCxiLGgsdix5LF89ci52YWx1ZXMsZz1yLmRlc2NyaXB0b3JzLE89MDtpZihyLmV4dGVuc2libGUpaWYocz1yLnByb3BlcnRpZXMuc2xpY2UoKSxhPXMubGVuZ3RoLGM9bChvKSxnKXtmb3IoO088Yy5sZW5ndGg7KWI9Y1tPKytdLHA9dShzLGIpLHk9ZChvLGIpLC0xPT09cD8oaihvLHIse25hbWU6Yix0eXBlOiJhZGQiLG9iamVjdDpvfSxpKSxyLnByb3BlcnRpZXMucHVzaChiKSxfLnB1c2gob1tiXSksZy5wdXNoKHkpKTooc1twXT1udWxsLGEtLSx0KG8scixwLGkseSkpO24obyxzLGEscixpKSxlLmlzRXh0ZW5zaWJsZShvKXx8KHIuZXh0ZW5zaWJsZT0hMSxqKG8scix7dHlwZToicHJldmVudEV4dGVuc2lvbnMiLG9iamVjdDpvfSxpKSxyLmZyb3plbj1lLmlzRnJvemVuKG8pKX1lbHNle2Zvcig7TzxjLmxlbmd0aDspYj1jW08rK10scD11KHMsYiksaD1vW2JdLC0xPT09cD8oaihvLHIse25hbWU6Yix0eXBlOiJhZGQiLG9iamVjdDpvfSxpKSxyLnByb3BlcnRpZXMucHVzaChiKSxfLnB1c2goaCkpOihzW3BdPW51bGwsYS0tLHQobyxyLHAsaSkpO24obyxzLGEscixpKX1lbHNlIGlmKCFyLmZyb3plbil7Zm9yKDtPPHMubGVuZ3RoO08rKyliPXNbT10sdChvLHIsTyxpLGQobyxiKSk7ZS5pc0Zyb3plbihvKSYmKHIuZnJvemVuPSEwKX1mJiYodj1mKG8pLHYhPT1yLnByb3RvJiYoaihvLHIse3R5cGU6InNldFByb3RvdHlwZSIsbmFtZToiX19wcm90b19fIixvYmplY3Q6byxvbGRWYWx1ZTpyLnByb3RvfSksci5wcm90bz12KSl9fX0oKSx5PWZ1bmN0aW9uKCl7by5zaXplJiYoby5mb3JFYWNoKHYpLGkuZm9yRWFjaChfKSxwKHkpKX0sXz1mdW5jdGlvbihlLHQpe3ZhciBuPWUuY2hhbmdlUmVjb3JkcztuLmxlbmd0aCYmKGUuY2hhbmdlUmVjb3Jkcz1bXSx0KG4pKX0sZz1mdW5jdGlvbihlLHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDImJih0PW8uZ2V0KGUpKSx0JiZ0Lm5vdGlmaWVyfHx7bm90aWZ5OmZ1bmN0aW9uKHQpe3QudHlwZTt2YXIgbj1vLmdldChlKTtpZihuKXt2YXIgcixpPXtvYmplY3Q6ZX07Zm9yKHIgaW4gdCkib2JqZWN0IiE9PXImJihpW3JdPXRbcl0pO2ooZSxuLGkpfX0scGVyZm9ybUNoYW5nZTpmdW5jdGlvbih0LG4pe2lmKCJzdHJpbmciIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIG5vbi1zdHJpbmcgY2hhbmdlVHlwZSIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBuKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBwZXJmb3JtIG5vbi1mdW5jdGlvbiIpO3ZhciBpLHMsYT1vLmdldChlKSx1PWFyZ3VtZW50c1syXSxjPXU9PT1yP24oKTpuLmNhbGwodSk7aWYoYSYmdihhLGUsdCksYSYmYyYmIm9iamVjdCI9PXR5cGVvZiBjKXtzPXtvYmplY3Q6ZSx0eXBlOnR9O2ZvcihpIGluIGMpIm9iamVjdCIhPT1pJiYidHlwZSIhPT1pJiYoc1tpXT1jW2ldKTtqKGUsYSxzKX19fX0sTz1mdW5jdGlvbihlLHQsbixyKXt2YXIgbz1pLmdldChuKTtvfHxpLnNldChuLG89e29ic2VydmVkOmMoKSxjaGFuZ2VSZWNvcmRzOltdfSksby5vYnNlcnZlZC5zZXQoZSx7YWNjZXB0TGlzdDpyLnNsaWNlKCksZGF0YTp0fSksdC5oYW5kbGVycy5zZXQobixvKX0saj1mdW5jdGlvbihlLHQsbixyKXt0LmhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG89dC5vYnNlcnZlZC5nZXQoZSkuYWNjZXB0TGlzdDsoInN0cmluZyIhPXR5cGVvZiByfHwtMT09PXUobyxyKSkmJnUobyxuLnR5cGUpPi0xJiZ0LmNoYW5nZVJlY29yZHMucHVzaChuKX0pfTtvPWMoKSxpPWMoKSxlLm9ic2VydmU9ZnVuY3Rpb24odCxuLG8pe2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5vYnNlcnZlIGNhbm5vdCBvYnNlcnZlIG5vbi1vYmplY3QiKTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygbil0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3QgZGVsaXZlciB0byBub24tZnVuY3Rpb24iKTtpZihlLmlzRnJvemVuJiZlLmlzRnJvemVuKG4pKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIGEgZnJvemVuIGZ1bmN0aW9uIG9iamVjdCIpO2lmKG89PT1yKW89cztlbHNlIGlmKCFvfHwib2JqZWN0IiE9dHlwZW9mIG8pdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhpcmQgYXJndW1lbnQgdG8gT2JqZWN0Lm9ic2VydmUgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzLiIpO3JldHVybiBiKHQsbixvKSx0fSxlLnVub2JzZXJ2ZT1mdW5jdGlvbihlLHQpe2lmKG51bGw9PT1lfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC51bm9ic2VydmUgY2Fubm90IHVub2JzZXJ2ZSBub24tb2JqZWN0Iik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LnVub2JzZXJ2ZSBjYW5ub3QgZGVsaXZlciB0byBub24tZnVuY3Rpb24iKTt2YXIgbixyPWkuZ2V0KHQpO3JldHVybiByJiYobj1yLm9ic2VydmVkLmdldChlKSkmJihyLm9ic2VydmVkLmZvckVhY2goZnVuY3Rpb24oZSx0KXt2KGUuZGF0YSx0KX0pLHAoZnVuY3Rpb24oKXtfKHIsdCl9KSwxPT09ci5vYnNlcnZlZC5zaXplJiZyLm9ic2VydmVkLmhhcyhlKT9pWyJkZWxldGUiXSh0KTpyLm9ic2VydmVkWyJkZWxldGUiXShlKSwxPT09bi5kYXRhLmhhbmRsZXJzLnNpemU/b1siZGVsZXRlIl0oZSk6bi5kYXRhLmhhbmRsZXJzWyJkZWxldGUiXSh0KSksZX0sZS5nZXROb3RpZmllcj1mdW5jdGlvbih0KXtpZihudWxsPT09dHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QuZ2V0Tm90aWZpZXIgY2Fubm90IGdldE5vdGlmaWVyIG5vbi1vYmplY3QiKTtyZXR1cm4gZS5pc0Zyb3plbiYmZS5pc0Zyb3plbih0KT9udWxsOmcodCl9LGUuZGVsaXZlckNoYW5nZVJlY29yZHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO3ZhciB0PWkuZ2V0KGUpO3QmJih0Lm9ic2VydmVkLmZvckVhY2goZnVuY3Rpb24oZSx0KXt2KGUuZGF0YSx0KX0pLF8odCxlKSl9fShPYmplY3QsQXJyYXksdGhpcyl9LHt9XSw0OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLG4uRGF0YU9iamVjdE9ic2VydmVyPW4uRGF0YU9iamVjdFJlcG9ydGVyPW4uU3luY2hlcj12b2lkIDAsZSgibXV0YXRpb25vYnNlcnZlci1zaGltIiksZSgib2JqZWN0Lm9ic2VydmUiKSxlKCJhcnJheS5vYnNlcnZlIik7dmFyIG89ZSgiLi9zeW5jaGVyL1N5bmNoZXIiKSxpPXIobykscz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdFJlcG9ydGVyIiksYT1yKHMpLHU9ZSgiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciIpLGM9cih1KTtuLlN5bmNoZXI9aVsiZGVmYXVsdCJdLG4uRGF0YU9iamVjdFJlcG9ydGVyPWFbImRlZmF1bHQiXSxuLkRhdGFPYmplY3RPYnNlcnZlcj1jWyJkZWZhdWx0Il19LHsiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciI6NywiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciI6OCwiLi9zeW5jaGVyL1N5bmNoZXIiOjExLCJhcnJheS5vYnNlcnZlIjoxLCJtdXRhdGlvbm9ic2VydmVyLXNoaW0iOjIsIm9iamVjdC5vYnNlcnZlIjozfV0sNTpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCkscz1lKCIuL1N5bmNPYmplY3QiKSxhPXIocyksdT1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGM9cih1KSxsPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIsaSxzLHUpe28odGhpcyxlKTt2YXIgYz10aGlzO2MuX3N5bmNoZXI9dCxjLl91cmw9bixjLl9zY2hlbWE9cixjLl9zdGF0dXM9aSxjLl9zeW5jT2JqPW5ldyBhWyJkZWZhdWx0Il0ocyksYy5fY2hpbGRyZW5zPXUsYy5fdmVyc2lvbj0wLGMuX2NoaWxkSWQ9MCxjLl9jaGlsZHJlbk9iamVjdHM9e30sYy5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sYy5fb3duZXI9dC5fb3duZXIsYy5fYnVzPXQuX2J1c31yZXR1cm4gaShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMsbj10Ll91cmwrIi9jaGlsZHJlbi8iO3QuX2NoaWxkcmVucyYmdC5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG89bityLGk9dC5fYnVzLmFkZExpc3RlbmVyKG8sZnVuY3Rpb24obil7aWYobi5mcm9tIT09ZS5fb3duZXIpc3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LUNoaWxkcmVuLVJDVjogIixuKSxuLnR5cGUpe2Nhc2UiY3JlYXRlIjp0Ll9vbkNoaWxkcmVuQ3JlYXRlKG4pO2JyZWFrO2Nhc2UiZGVsZXRlIjpjb25zb2xlLmxvZyhuKTticmVhaztkZWZhdWx0OnQuX2NoYW5nZUNoaWxkcmVuKG4pfX0pO3QuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goaSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSksT2JqZWN0LmtleXMoZS5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NoaWxkcmVuT2JqZWN0c1t0XS5fcmVsZWFzZUxpc3RlbmVycygpfSl9fSx7a2V5OiJwYXVzZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToicmVzdW1lIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJzdG9wIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJhZGRDaGlsZHJlbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24uX2NoaWxkSWQrKzt2YXIgcj1uLl9vd25lcisiIyIrbi5fY2hpbGRJZCxvPW4uX3VybCsiL2NoaWxkcmVuLyIrZSxpPXt0eXBlOiJjcmVhdGUiLGZyb206bi5fb3duZXIsdG86byxib2R5OntyZXNvdXJjZTpyLHZhbHVlOnR9fTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7dmFyIHM9bi5fYnVzLnBvc3RNZXNzYWdlKGkpO2NvbnNvbGUubG9nKCJjcmVhdGUtcmVwb3J0ZXItY2hpbGQoICIrbi5fb3duZXIrIiApOiAiLGkpO3ZhciBhPW5ldyBjWyJkZWZhdWx0Il0obixyLHQsbi5fb3duZXIscyk7YS5vbkNoYW5nZShmdW5jdGlvbihlKXtuLl9vbkNoYW5nZShlLHtwYXRoOm8sY2hpbGRJZDpyfSl9KSxuLl9jaGlsZHJlbk9iamVjdHNbcl09YSxlKGEpfSl9fSx7a2V5OiJvbkFkZENoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcj1lfX0se2tleToiX29uQ2hpbGRyZW5DcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmJvZHkucmVzb3VyY2U7Y29uc29sZS5sb2coImNyZWF0ZS1vYnNlcnZlci1jaGlsZCggIit0Ll9vd25lcisiICk6ICIsZSk7dmFyIHI9bmV3IGNbImRlZmF1bHQiXSh0LG4sZS5ib2R5LnZhbHVlKTt0Ll9jaGlsZHJlbk9iamVjdHNbbl09cixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNvdXJjZTp0Ll9vd25lcn19KX0pO3ZhciBvPXt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx1cmw6ZS50byx2YWx1ZTplLmJvZHkudmFsdWUsY2hpbGRJZDpuLGlkZW50aXR5OmUuYm9keS5pZFRva2VufTt0Ll9vbkFkZENoaWxkcmVuSGFuZGxlciYmKGNvbnNvbGUubG9nKCJBREQtQ0hJTERSRU4tRVZFTlQ6ICIsbyksdC5fb25BZGRDaGlsZHJlbkhhbmRsZXIobykpfX0se2tleToiX29uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYobi5fdmVyc2lvbisrLCJvbiI9PT1uLl9zdGF0dXMpe3ZhciByPXt0eXBlOiJ1cGRhdGUiLGZyb206bi5fdXJsLHRvOm4uX3VybCsiL2NoYW5nZXMiLGJvZHk6e3ZlcnNpb246bi5fdmVyc2lvbixzb3VyY2U6bi5fb3duZXIsYXR0cmlidXRlOmUuZmllbGR9fTtlLm9UeXBlPT09cy5PYmplY3RUeXBlLk9CSkVDVD9lLmNUeXBlIT09cy5DaGFuZ2VUeXBlLlJFTU9WRSYmKHIuYm9keS52YWx1ZT1lLmRhdGEpOihyLmJvZHkuYXR0cmlidXRlVHlwZT1lLm9UeXBlLHIuYm9keS52YWx1ZT1lLmRhdGEsZS5jVHlwZSE9PXMuQ2hhbmdlVHlwZS5VUERBVEUmJihyLmJvZHkub3BlcmF0aW9uPWUuY1R5cGUpKSx0JiYoci50bz10LnBhdGgsci5ib2R5LnJlc291cmNlPXQuY2hpbGRJZCksbi5fYnVzLnBvc3RNZXNzYWdlKHIpfX19LHtrZXk6Il9jaGFuZ2VPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztpZihuLl92ZXJzaW9uKzE9PT10LmJvZHkudmVyc2lvbil7bi5fdmVyc2lvbisrO3ZhciByPXQuYm9keS5hdHRyaWJ1dGUsbz0oMCxsLmRlZXBDbG9uZSkodC5ib2R5LnZhbHVlKSxpPWUuZmluZEJlZm9yZShyKTtpZih0LmJvZHkuYXR0cmlidXRlVHlwZT09PXMuT2JqZWN0VHlwZS5BUlJBWSlpZih0LmJvZHkub3BlcmF0aW9uPT09cy5DaGFuZ2VUeXBlLkFERCl7dmFyIGE9aS5vYmosdT1pLmxhc3Q7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhLFt1LDBdLmNvbmNhdChvKSl9ZWxzZSBpZih0LmJvZHkub3BlcmF0aW9uPT09cy5DaGFuZ2VUeXBlLlJFTU9WRSl7dmFyIGM9aS5vYmosZj1pLmxhc3Q7Yy5zcGxpY2UoZixvKX1lbHNlIGkub2JqW2kubGFzdF09bztlbHNlIHQuYm9keS52YWx1ZT9pLm9ialtpLmxhc3RdPW86ZGVsZXRlIGkub2JqW2kubGFzdF19ZWxzZSBjb25zb2xlLmxvZygiVU5TWU5DSFJPTklaRUQgVkVSU0lPTjogKGRhdGEgPT4gIituLl92ZXJzaW9uKyIsIG1zZyA9PiAiK3QuYm9keS52ZXJzaW9uKyIpIil9fSx7a2V5OiJfY2hhbmdlQ2hpbGRyZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Y29uc29sZS5sb2coIkNoYW5nZSBjaGlsZHJlbjogIix0Ll9vd25lcixlKTt2YXIgbj1lLmJvZHkucmVzb3VyY2Uscj10Ll9jaGlsZHJlbk9iamVjdHNbbl07cj90Ll9jaGFuZ2VPYmplY3Qoci5fc3luY09iaixlKTpjb25zb2xlLmxvZygiTm8gY2hpbGRyZW4gZm91bmQgZm9yOiAiLG4pfX0se2tleToidXJsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NoZW1hfX0se2tleToic3RhdHVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdHVzfX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19LHtrZXk6ImNoaWxkcmVucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuT2JqZWN0c319XSksZX0oKTtuWyJkZWZhdWx0Il09Zix0LmV4cG9ydHM9blsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMiwiLi9EYXRhT2JqZWN0Q2hpbGQiOjYsIi4vU3luY09iamVjdCI6MTB9XSw2OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxzPWUoIi4vU3luY09iamVjdCIpLGE9cihzKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4scixpLHMpe28odGhpcyxlKTt2YXIgdT10aGlzO3UuX3BhcmVudD10LHUuX2NoaWxkSWQ9bix1Ll9vd25lcj1pLHUuX21zZ0lkPXMsdS5fc3luY09iaj1uZXcgYVsiZGVmYXVsdCJdKHIpLHUuX2J1cz10Ll9idXMsdS5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4gaShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9vd25lciYmKGUuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9vd25lcixmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6Iix0KSxlLl9vblJlc3BvbnNlKHQpKX0pKX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXImJmUuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZGVsZXRlIGUuX3BhcmVudC5fY2hpbGRyZW5bZS5fY2hpbGRJZF0sZS5fcmVsZWFzZUxpc3RlbmVycygpfX0se2tleToib25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbih0KXtlKHQpfSl9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj17dHlwZTplLnR5cGUsdXJsOmUuYm9keS5zb3VyY2UsY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJnQuX29uUmVzcG9uc2VIYW5kbGVyKG4pfX0se2tleToiY2hpbGRJZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkSWR9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX1dKSxlfSgpO25bImRlZmF1bHQiXT11LHQuZXhwb3J0cz1uWyJkZWZhdWx0Il19LHsiLi9TeW5jT2JqZWN0IjoxMH1dLDc6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gaShlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQ/ZTp0fWZ1bmN0aW9uIHMoZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSx1PWZ1bmN0aW9uIGgoZSx0LG4pe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDpoKG8sdCxuKX1pZigidmFsdWUiaW4gcilyZXR1cm4gci52YWx1ZTt2YXIgaT1yLmdldDtpZih2b2lkIDAhPT1pKXJldHVybiBpLmNhbGwobil9LGM9ZSgiLi9EYXRhT2JqZWN0IiksbD1yKGMpLGY9ZSgiLi9EYXRhT2JqZWN0Q2hpbGQiKSxkPXIoZikscD17QU5ZOiJhbnkiLFNUQVJUOiJzdGFydCIsRVhBQ1Q6ImV4YWN0In0sYj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsbixyLHMsYSx1LGMpe28odGhpcyx0KTt2YXIgbD1pKHRoaXMsT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpLmNhbGwodGhpcyxlLG4scixzLGEuZGF0YSx1KSksZj1sO3JldHVybiBmLl92ZXJzaW9uPWMsZi5fZmlsdGVycz17fSxmLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7Zi5fb25GaWx0ZXIoZSl9KSxPYmplY3Qua2V5cyhhLmNoaWxkcmVucykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1hLmNoaWxkcmVuc1tlXTtmLl9jaGlsZHJlbk9iamVjdHNbZV09bmV3IGRbImRlZmF1bHQiXShmLGUsdCl9KSxmLl9hbGxvY2F0ZUxpc3RlbmVycygpLGx9cmV0dXJuIHModCxlKSxhKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt1KE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX2NoYW5nZUxpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwrIi9jaGFuZ2VzIixmdW5jdGlvbih0KXsidXBkYXRlIj09PXQudHlwZSYmKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0T2JzZXJ2ZXItIitlLl91cmwrIi1SQ1Y6ICIsdCksZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCkpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt1KE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX29ic2VydmVyc1tlLl91cmxdfX0se2tleToidW5zdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLHI9e3R5cGU6cC5FWEFDVCxjYWxsYmFjazp0fSxvPWUuaW5kZXhPZigiKiIpO289PT1lLmxlbmd0aC0xJiYoMD09PW8/ci50eXBlPXAuQU5ZOihyLnR5cGU9cC5TVEFSVCxuPWUuc3Vic3RyKDAsZS5sZW5ndGgtMSkpKSx0aGlzLl9maWx0ZXJzW25dPXJ9fSx7a2V5OiJfb25GaWx0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXModC5fZmlsdGVycykuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgcj10Ll9maWx0ZXJzW25dO3IudHlwZT09PXAuQU5ZP3IuY2FsbGJhY2soZSk6ci50eXBlPT09cC5TVEFSVD8wPT09ZS5maWVsZC5pbmRleE9mKG4pJiZyLmNhbGxiYWNrKGUpOnIudHlwZT09PXAuRVhBQ1QmJmUuZmllbGQ9PT1uJiZyLmNhbGxiYWNrKGUpfSl9fV0pLHR9KGxbImRlZmF1bHQiXSk7blsiZGVmYXVsdCJdPWIsdC5leHBvcnRzPW5bImRlZmF1bHQiXX0seyIuL0RhdGFPYmplY3QiOjUsIi4vRGF0YU9iamVjdENoaWxkIjo2fV0sODpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBpKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hdHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdD9lOnR9ZnVuY3Rpb24gcyhlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLHU9ZnVuY3Rpb24gcChlLHQsbil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpO2lmKHZvaWQgMD09PXIpe3ZhciBvPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PW8/dm9pZCAwOnAobyx0LG4pfWlmKCJ2YWx1ZSJpbiByKXJldHVybiByLnZhbHVlO3ZhciBpPXIuZ2V0O2lmKHZvaWQgMCE9PWkpcmV0dXJuIGkuY2FsbChuKX0sYz1lKCIuL0RhdGFPYmplY3QiKSxsPXIoYyksZj1lKCIuLi91dGlscy91dGlscy5qcyIpLGQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLG4scixzLGEsdSl7byh0aGlzLHQpO3ZhciBjPWkodGhpcyxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkuY2FsbCh0aGlzLGUsbixyLHMsYSx1KSksbD1jO3JldHVybiBsLl9zdWJzY3JpcHRpb25zPXt9LGwuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLSIrbisiLVNFTkQ6ICIsZSksbC5fb25DaGFuZ2UoZSl9KSxsLl9hbGxvY2F0ZUxpc3RlbmVycygpLGN9cmV0dXJuIHModCxlKSxhKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt1KE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX3Jlc3BvbnNlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCxmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZlLl9vblJlc3BvbnNlKHQpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt1KE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fcmVzcG9uc2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6Imludml0ZU9ic2VydmVycyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXt0eXBlOiJjcmVhdGUiLGZyb206dC5fc3luY2hlci5fb3duZXIsdG86dC5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOnQuX3VybCxzY2hlbWE6dC5fc2NoZW1hLHZhbHVlOnQuX3N5bmNPYmouZGF0YSxhdXRob3Jpc2U6ZX19O3QuX2J1cy5wb3N0TWVzc2FnZShuKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6ImRlbGV0ZSIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RSZXBvcnRlci1ERUxFVEU6ICIsdCksMjAwPT09dC5ib2R5LmNvZGUmJihlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX3JlcG9ydGVyc1tlLl91cmxdKX0pfX0se2tleToib25TdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcj1lfX0se2tleToib25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAiLGUpLGUuYm9keS50eXBlKXtjYXNlInN1YnNjcmliZSI6dC5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6dC5fb25VblN1YnNjcmliZShlKX19fSx7a2V5OiJfb25TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmJvZHkuZnJvbSxyPXt0eXBlOmUuYm9keS50eXBlLHVybDpuLGFjY2VwdDpmdW5jdGlvbigpe3ZhciByPXt1cmw6bixzdGF0dXM6Im9uIn07dC5fc3Vic2NyaXB0aW9uc1tuXT1yO3ZhciBvPXt9O3JldHVybiBPYmplY3Qua2V5cyh0Ll9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49dC5fY2hpbGRyZW5PYmplY3RzW2VdLmRhdGE7b1tlXT0oMCxmLmRlZXBDbG9uZSkobil9KSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsc2NoZW1hOnQuX3NjaGVtYSx2ZXJzaW9uOnQuX3ZlcnNpb24sdmFsdWU6e2RhdGE6KDAsZi5kZWVwQ2xvbmUpKHQuZGF0YSksY2hpbGRyZW5zOm99fX0pLHJ9LHJlamVjdDpmdW5jdGlvbihuKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDMsZGVzYzpufX0pfX07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlNVQlNDUklQVElPTi1FVkVOVDogIixyKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIocikpfX0se2tleToiX29uVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmJvZHkuZnJvbSxyPXQuX3N1YnNjcmlwdGlvbnNbbl07ZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbbl07dmFyIG89e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOm4sb2JqZWN0OnJ9O3QuX29uU3Vic2NyaXB0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJVTi1TVUJTQ1JJUFRJT04tRVZFTlQ6ICIsbyksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKG8pKX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49e3R5cGU6ZS50eXBlLHVybDplLmZyb20sY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJihjb25zb2xlLmxvZygiUkVTUE9OU0UtRVZFTlQ6ICIsbiksdC5fb25SZXNwb25zZUhhbmRsZXIobikpfX0se2tleToic3Vic2NyaXB0aW9ucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbnN9fV0pLHR9KGxbImRlZmF1bHQiXSk7blsiZGVmYXVsdCJdPWQsdC5leHBvcnRzPW5bImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTIsIi4vRGF0YU9iamVjdCI6NX1dLDk6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4sbyxpKXtyKHRoaXMsZSk7dmFyIHM9dGhpcztzLl9vd25lcj10LHMuX3VybD1uLHMuX2J1cz1vLHMuX2NoaWxkcmVuPWkscy5fY2hhbmdlcz1bXSxzLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybiBvKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFQcm92aXNpb25hbC0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VzLnB1c2godCl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJhcHBseSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCl9KX19LHtrZXk6ImNoaWxkcmVuIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW59fV0pLGV9KCk7blsiZGVmYXVsdCJdPWksdC5leHBvcnRzPW5bImRlZmF1bHQiXX0se31dLDEwOltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksbi5PYmplY3RUeXBlPW4uQ2hhbmdlVHlwZT12b2lkIDA7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCksaT1lKCIuLi91dGlscy91dGlscy5qcyIpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3IodGhpcyxlKTt2YXIgbj10aGlzO24uX29ic2VydmVycz1bXSxuLl9maWx0ZXJzPXt9LHQ/bi5fZGF0YT0oMCxpLmRlZXBDbG9uZSkodCk6bi5fZGF0YT17fSxuLl9pbnRlcm5hbE9ic2VydmUobmV3IGEsbi5fZGF0YSl9cmV0dXJuIG8oZSxbe2tleToib2JzZXJ2ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLnB1c2goZSl9fSx7a2V5OiJmaW5kIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KCIuIik7cmV0dXJuIHRoaXMuX2ZpbmRXaXRoU3BsaXQodCl9fSx7a2V5OiJmaW5kQmVmb3JlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxuPWUuc3BsaXQoIi4iKTtyZXR1cm4gdC5sYXN0PW4ucG9wKCksdC5vYmo9dGhpcy5fZmluZFdpdGhTcGxpdChuKSx0fX0se2tleToiX2ZpbmRXaXRoU3BsaXQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGE7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXt0PXRbZV19KSx0fX0se2tleToiX2ZpcmVFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dChlKX0pfX0se2tleToiX2lzT2JzZXJ2YWJsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1PYmplY3R8fGUuY29uc3RydWN0b3I9PT1BcnJheX19LHtrZXk6Il9pbnRlcm5hbE9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztpZihuLl9pc09ic2VydmFibGUodCkpe3ZhciByPWZ1bmN0aW9uKHQpe24uX29uQ2hhbmdlcyhlLHQpfTtpZih0LmNvbnN0cnVjdG9yPT09T2JqZWN0KXtPYmplY3Qub2JzZXJ2ZSh0LHIpO2Zvcih2YXIgbyBpbiB0KW4uX2lzT2JzZXJ2YWJsZSh0W29dKSYmbi5faW50ZXJuYWxPYnNlcnZlKGVbIm5ldyJdKG8pLHRbb10pfWVsc2UgaWYodC5jb25zdHJ1Y3Rvcj09PUFycmF5KXtBcnJheS5vYnNlcnZlKHQscik7Zm9yKHZhciBpIGluIHQpaWYobi5faXNPYnNlcnZhYmxlKHRbaV0pKXt2YXIgcz1lWyJuZXciXShuZXcgdSh0W2ldLGkpKTtuLl9pbnRlcm5hbE9ic2VydmUocyx0W2ldKX19fX19LHtrZXk6Il9vbkNoYW5nZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztmb3IodmFyIHIgaW4gdCl7dmFyIG89dFtyXS5vYmplY3Qscz12b2lkIDA7aWYoby5jb25zdHJ1Y3Rvcj09PU9iamVjdCYmKHM9bC5PQkpFQ1QpLG8uY29uc3RydWN0b3I9PT1BcnJheSYmKHM9bC5BUlJBWSksInNwbGljZSI9PT10W3JdLnR5cGUpIWZ1bmN0aW9uKCl7dmFyIGE9dFtyXS5pbmRleCxsPWVbIm5ldyJdKCIiK2EpLGY9bC50b1N0cmluZygpLGQ9dFtyXS5yZW1vdmVkLmxlbmd0aDtpZigwIT09ZCl7dmFyIHA9dFtyXS5yZW1vdmVkO3AuZm9yRWFjaChmdW5jdGlvbih0LHIpe24uX2lzT2JzZXJ2YWJsZSh0KSYmZS5yZW1vdmVJbmRleChhK3IpfSksbi5fZmlyZUV2ZW50KHtjVHlwZTpjLlJFTU9WRSxvVHlwZTpzLGZpZWxkOmYsZGF0YTpkfSl9dmFyIGI9dFtyXS5hZGRlZENvdW50O2lmKDAhPT1iKXt2YXIgaD1vLnNsaWNlKGEsYStiKTtoLmZvckVhY2goZnVuY3Rpb24odCxyKXtpZihuLl9pc09ic2VydmFibGUodCkpe3ZhciBvPWVbIm5ldyJdKG5ldyB1KHQsYStyKSk7bi5faW50ZXJuYWxPYnNlcnZlKG8sdCl9fSksbi5fZmlyZUV2ZW50KHtjVHlwZTpjLkFERCxvVHlwZTpzLGZpZWxkOmYsZGF0YTooMCxpLmRlZXBDbG9uZSkoaCl9KX1hIT09by5sZW5ndGgtMSYmZS5yZUluZGV4RnJvbShvKX0oKTtlbHNle3ZhciBhPWVbIm5ldyJdKHRbcl0ubmFtZSksZj1hLnRvU3RyaW5nKCk7aWYoLTEhPT1mLmluZGV4T2YoIlN5bWJvbCIpKWNvbnRpbnVlO3ZhciBkPW9bdFtyXS5uYW1lXTsidXBkYXRlIj09PXRbcl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpjLlVQREFURSxvVHlwZTpzLGZpZWxkOmYsZGF0YTooMCxpLmRlZXBDbG9uZSkoZCl9KSwiYWRkIj09PXRbcl0udHlwZSYmKHRoaXMuX2ludGVybmFsT2JzZXJ2ZShhLGQpLHRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yy5BREQsb1R5cGU6cyxmaWVsZDpmLGRhdGE6KDAsaS5kZWVwQ2xvbmUpKGQpfSkpLCJkZWxldGUiPT09dFtyXS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmMuUkVNT1ZFLG9UeXBlOnMsZmllbGQ6Zn0pfX19fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX19XSksZX0oKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKSx0aGlzLl9wYXRoPVtdLHRoaXMuX29ic2VydmFibGVzPXt9fXJldHVybiBvKGUsW3trZXk6InJlbW92ZUluZGV4Iix2YWx1ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fb2JzZXJ2YWJsZXNbZV19fSx7a2V5OiJyZUluZGV4RnJvbSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyh0aGlzLl9vYnNlcnZhYmxlcykuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgcj10Ll9vYnNlcnZhYmxlc1tuXSxvPWUuaW5kZXhPZihyLm9iaik7ci5pZHghPW8mJihyLmlkeD1vLGRlbGV0ZSB0Ll9vYnNlcnZhYmxlc1tuXSx0Ll9vYnNlcnZhYmxlc1tvXT1yKX0pfX0se2tleToibmV3Iix2YWx1ZTpmdW5jdGlvbihlKXtlLmNvbnN0cnVjdG9yPT11JiYodGhpcy5fb2JzZXJ2YWJsZXNbZS5pZHhdPWUpO3ZhciB0PXRoaXMuY2xvbmUoKTtyZXR1cm4gdC5fcGF0aC5wdXNoKGUpLHR9fSx7a2V5OiJjbG9uZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZTtyZXR1cm4gdGhpcy5fcGF0aC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX3BhdGgucHVzaChlKX0pLHR9fSx7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0iIjtyZXR1cm4gdGhpcy5fcGF0aC5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7MD09PW4/ZT10LnRvU3RyaW5nKCk6ZSs9Ii4iK3QudG9TdHJpbmcoKX0pLGV9fV0pLGV9KCksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuKXtyKHRoaXMsZSksdGhpcy5vYmo9dCx0aGlzLmlkeD1ufXJldHVybiBvKGUsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkeC50b1N0cmluZygpfX1dKSxlfSgpLGM9bi5DaGFuZ2VUeXBlPXtVUERBVEU6InVwZGF0ZSIsQUREOiJhZGQiLFJFTU9WRToicmVtb3ZlIn0sbD1uLk9iamVjdFR5cGU9e09CSkVDVDoib2JqZWN0IixBUlJBWToiYXJyYXkifTtuWyJkZWZhdWx0Il09c30seyIuLi91dGlscy91dGlscy5qcyI6MTJ9XSwxMTpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCkscz1lKCIuL0RhdGFPYmplY3RSZXBvcnRlciIpLGE9cihzKSx1PWUoIi4vRGF0YU9iamVjdE9ic2VydmVyIiksYz1yKHUpLGw9ZSgiLi9EYXRhUHJvdmlzaW9uYWwiKSxmPXIobCksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIpe28odGhpcyxlKTt2YXIgaT10aGlzO2kuX293bmVyPXQsaS5fYnVzPW4saS5fc3ViVVJMPXIucnVudGltZVVSTCsiL3NtIixpLl9yZXBvcnRlcnM9e30saS5fb2JzZXJ2ZXJzPXt9LGkuX3Byb3Zpc2lvbmFscz17fSxuLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24oZSl7aWYoZS5mcm9tIT09dClzd2l0Y2goY29uc29sZS5sb2coIlN5bmNoZXItUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJmb3J3YXJkIjppLl9vbkZvcndhcmQoZSk7YnJlYWs7Y2FzZSJjcmVhdGUiOmkuX29uUmVtb3RlQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjppLl9vblJlbW90ZURlbGV0ZShlKX19KX1yZXR1cm4gaShlLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10aGlzLG89e3R5cGU6ImNyZWF0ZSIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUsdmFsdWU6bixhdXRob3Jpc2U6dH19O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0LGkpe3IuX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKG8pe2lmKGNvbnNvbGUubG9nKCJjcmVhdGUtcmVzcG9uc2U6ICIsbyksMjAwPT09by5ib2R5LmNvZGUpe3ZhciBzPW8uYm9keS5yZXNvdXJjZSx1PW5ldyBhWyJkZWZhdWx0Il0ocixzLGUsIm9uIixuLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyk7ci5fcmVwb3J0ZXJzW3NdPXUsdCh1KX1lbHNlIGkoby5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLHI9e3R5cGU6InN1YnNjcmliZSIsZnJvbTpuLl9vd25lcix0bzpuLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUscmVzb3VyY2U6dH19O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihvLGkpe24uX2J1cy5wb3N0TWVzc2FnZShyLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJzdWJzY3JpYmUtcmVzcG9uc2U6ICIscik7dmFyIHM9bi5fcHJvdmlzaW9uYWxzW3RdO2lmKGRlbGV0ZSBuLl9wcm92aXNpb25hbHNbdF0scyYmcy5fcmVsZWFzZUxpc3RlbmVycygpLHIuYm9keS5jb2RlPDIwMClzPW5ldyBmWyJkZWZhdWx0Il0obi5fb3duZXIsdCxuLl9idXMsci5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKSxuLl9wcm92aXNpb25hbHNbdF09cztlbHNlIGlmKDIwMD09PXIuYm9keS5jb2RlKXt2YXIgYT1uZXcgY1siZGVmYXVsdCJdKG4sdCxlLCJvbiIsci5ib2R5LnZhbHVlLHMuY2hpbGRyZW4sci5ib2R5LnZlcnNpb24pO24uX29ic2VydmVyc1t0XT1hLG8oYSkscy5hcHBseShhKX1lbHNlIGkoci5ib2R5LmRlc2MpfSl9KX19LHtrZXk6Im9uTm90aWZpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll9yZXBvcnRlcnNbZS5ib2R5LnRvXTtuLl9vbkZvcndhcmQoZSl9fSx7a2V5OiJfb25SZW1vdGVDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmZyb20uc2xpY2UoMCwtMTMpLHI9e3R5cGU6ZS50eXBlLGZyb206ZS5ib2R5LnNvdXJjZSx1cmw6bixzY2hlbWE6ZS5ib2R5LnNjaGVtYSx2YWx1ZTplLmJvZHkudmFsdWUsaWRlbnRpdHk6ZS5ib2R5LmlkVG9rZW4sYWNrOmZ1bmN0aW9uKG4pe3ZhciByPTIwMDtuJiYocj1uKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpyfX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixyKSwKdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKHIpKX19LHtrZXk6Il9vblJlbW90ZURlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuYm9keS5yZXNvdXJjZSxyPXQuX29ic2VydmVyc1tuXTtpZihyKXt2YXIgbz17dHlwZTplLnR5cGUsdXJsOm4saWRlbnRpdHk6ZS5ib2R5LmlkVG9rZW4sYWNrOmZ1bmN0aW9uKG4pe3ZhciBvPTIwMDtuJiYobz1uKSwyMDA9PT1vJiZyWyJkZWxldGUiXSgpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm8sc291cmNlOnQuX293bmVyfX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixvKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobykpfWVsc2UgdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LHNvdXJjZTp0Ll9vd25lcn19KX19LHtrZXk6Im93bmVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3duZXJ9fSx7a2V5OiJyZXBvcnRlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXBvcnRlcnN9fSx7a2V5OiJvYnNlcnZlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYnNlcnZlcnN9fV0pLGV9KCk7blsiZGVmYXVsdCJdPWQsdC5leHBvcnRzPW5bImRlZmF1bHQiXX0seyIuL0RhdGFPYmplY3RPYnNlcnZlciI6NywiLi9EYXRhT2JqZWN0UmVwb3J0ZXIiOjgsIi4vRGF0YVByb3Zpc2lvbmFsIjo5fV0sMTI6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXt2YXIgdD0vKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naSxuPSIkMSwkMiwkMyIscj1lLnJlcGxhY2UodCxuKS5zcGxpdCgiLCIpO3JbMF09PT1lJiYoclswXT0iaHR0cHMiLHJbMV09ZSk7dmFyIG89e3R5cGU6clswXSxkb21haW46clsxXSxpZGVudGl0eTpyWzJdfTtyZXR1cm4gb31mdW5jdGlvbiBvKGUpe3JldHVybiBlP0pTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpOnZvaWQgMH1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksbi5kaXZpZGVVUkw9cixuLmRlZXBDbG9uZT1vfSx7fV19LHt9LFs0XSkoNCl9KTsKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dfSx7fSxbM10pKDMpCn0pOw==",
      "sourceCodeClassname": "HypertyConnector",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10001,
    "type": "Hyperties",
    "version": "0.1",
    "description": "Description of HypertyConnector",
    "objectName": "HypertyConnector",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "HelloWorldObserver": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCJfX2VzTW9kdWxlIix7dmFsdWU6dHJ1ZX0pO3ZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fXJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTtleHBvcnRzLmRlZmF1bHQ9YWN0aXZhdGU7dmFyIF9TeW5jaGVyPXJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcicpO3ZhciBfdXRpbHM9cmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMnKTt2YXIgX0V2ZW50RW1pdHRlcjI9cmVxdWlyZSgnLi4vdXRpbHMvRXZlbnRFbWl0dGVyJyk7dmFyIF9FdmVudEVtaXR0ZXIzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0V2ZW50RW1pdHRlcjIpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKXtyZXR1cm4gb2JqJiZvYmouX19lc01vZHVsZT9vYmo6e2RlZmF1bHQ6b2JqfTt9ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTt9fWZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsY2FsbCl7aWYoIXNlbGYpe3Rocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7fXJldHVybiBjYWxsJiYodHlwZW9mIGNhbGw9PT0ib2JqZWN0Inx8dHlwZW9mIGNhbGw9PT0iZnVuY3Rpb24iKT9jYWxsOnNlbGY7fWZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcyxzdXBlckNsYXNzKXtpZih0eXBlb2Ygc3VwZXJDbGFzcyE9PSJmdW5jdGlvbiImJnN1cGVyQ2xhc3MhPT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHN1cGVyQ2xhc3MpO31zdWJDbGFzcy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzJiZzdXBlckNsYXNzLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnN1YkNsYXNzLGVudW1lcmFibGU6ZmFsc2Usd3JpdGFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZX19KTtpZihzdXBlckNsYXNzKU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3Msc3VwZXJDbGFzcyk6c3ViQ2xhc3MuX19wcm90b19fPXN1cGVyQ2xhc3M7fSAvKiBqc2hpbnQgdW5kZWY6IHRydWUgKi8gLyoqCiogSGVsbG8gV29ybGQgT2JzZXJ2ZXIKKiBAYXV0aG9yIFBhdWxvIENoYWluaG8gW3BhdWxvLWctY2hhaW5ob0B0ZWxlY29tLnB0XQoqIEB2ZXJzaW9uIDAuMS4wCiovdmFyIEhlbGxvV29ybGRPYnNlcnZlcj1mdW5jdGlvbihfRXZlbnRFbWl0dGVyKXtfaW5oZXJpdHMoSGVsbG9Xb3JsZE9ic2VydmVyLF9FdmVudEVtaXR0ZXIpOyAvKioKICAqIENyZWF0ZSBhIG5ldyBIZWxsb1dvcmxkT2JzZXJ2ZXIKICAqIEBwYXJhbSAge1N5bmNoZXJ9IHN5bmNoZXIgLSBTeW5jaGVyIHByb3ZpZGVkIGZyb20gdGhlIHJ1bnRpbWUgY29yZQogICovZnVuY3Rpb24gSGVsbG9Xb3JsZE9ic2VydmVyKGh5cGVydHlVUkwsYnVzLGNvbmZpZ3VyYXRpb24pe19jbGFzc0NhbGxDaGVjayh0aGlzLEhlbGxvV29ybGRPYnNlcnZlcik7aWYoIWh5cGVydHlVUkwpdGhyb3cgbmV3IEVycm9yKCdUaGUgaHlwZXJ0eVVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTtpZighYnVzKXRocm93IG5ldyBFcnJvcignVGhlIE1pbmlCdXMgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7aWYoIWNvbmZpZ3VyYXRpb24pdGhyb3cgbmV3IEVycm9yKCdUaGUgY29uZmlndXJhdGlvbiBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTt2YXIgX3RoaXMyPV9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsT2JqZWN0LmdldFByb3RvdHlwZU9mKEhlbGxvV29ybGRPYnNlcnZlcikuY2FsbCh0aGlzKSk7dmFyIF90aGlzPV90aGlzMjtfdGhpcy5fZG9tYWluPSgwLF91dGlscy5kaXZpZGVVUkwpKGh5cGVydHlVUkwpLmRvbWFpbjtfdGhpcy5fb2JqZWN0RGVzY1VSTD0naHlwZXJ0eS1jYXRhbG9ndWU6Ly8nK190aGlzLl9kb21haW4rJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hcy9IZWxsb1dvcmxkRGF0YVNjaGVtYSc7dmFyIGRvbWFpbj0oMCxfdXRpbHMuZGl2aWRlVVJMKShoeXBlcnR5VVJMKS5kb21haW47dmFyIHN5bmNoZXI9bmV3IF9TeW5jaGVyLlN5bmNoZXIoaHlwZXJ0eVVSTCxidXMsY29uZmlndXJhdGlvbik7c3luY2hlci5vbk5vdGlmaWNhdGlvbihmdW5jdGlvbihldmVudCl7X3RoaXMuX29uTm90aWZpY2F0aW9uKGV2ZW50KTt9KTtfdGhpcy5fc3luY2hlcj1zeW5jaGVyO3JldHVybiBfdGhpczI7fV9jcmVhdGVDbGFzcyhIZWxsb1dvcmxkT2JzZXJ2ZXIsW3trZXk6J19vbk5vdGlmaWNhdGlvbicsdmFsdWU6ZnVuY3Rpb24gX29uTm90aWZpY2F0aW9uKGV2ZW50KXt2YXIgX3RoaXM9dGhpcztjb25zb2xlLmluZm8oJ0V2ZW50IFJlY2VpdmVkOiAnLGV2ZW50KTtfdGhpcy50cmlnZ2VyKCdpbnZpdGF0aW9uJyxldmVudC5pZGVudGl0eSk7IC8vIEFja25vd2xlZGdlIHJlcG9ydGVyIGFib3V0IHRoZSBJbnZpdGF0aW9uIHdhcyByZWNlaXZlZApldmVudC5hY2soKTsgLy8gU3Vic2NyaWJlIEhlbGxvIFdvcmxkIE9iamVjdApfdGhpcy5fc3luY2hlci5zdWJzY3JpYmUoX3RoaXMuX29iamVjdERlc2NVUkwsZXZlbnQudXJsKS50aGVuKGZ1bmN0aW9uKGhlbGxvT2JqdE9ic2VydmVyKXsgLy8gSGVsbG8gV29ybGQgT2JqZWN0IHdhcyBzdWJzY3JpYmVkCmNvbnNvbGUuaW5mbyhoZWxsb09ianRPYnNlcnZlcik7IC8vIGxldHMgbm90aWZ5IHRoZSBBcHAgdGhlIHN1YnNjcmlwdGlvbiB3YXMgYWNjZXB0ZWQgd2l0aCB0aGUgbW5vc3QgdXBkYXRlZCB2ZXJzaW9uIG9mIEhlbGxvIFdvcmxkIE9iamVjdApfdGhpcy50cmlnZ2VyKCdoZWxsbycsaGVsbG9PYmp0T2JzZXJ2ZXIuZGF0YSk7IC8vIGxldHMgbm93IG9ic2VydmUgYW55IGNoYW5nZXMgZG9uZSBpbiBIZWxsbyBXb3JsZCBPYmplY3QKaGVsbG9PYmp0T2JzZXJ2ZXIub25DaGFuZ2UoJyonLGZ1bmN0aW9uKGV2ZW50KXsgLy8gSGVsbG8gV29ybGQgT2JqZWN0IHdhcyBjaGFuZ2VkCmNvbnNvbGUuaW5mbygnbWVzc2FnZSByZWNlaXZlZDonLGV2ZW50KTsgLy8gbGV0cyBub3RpZnkgdGhlIEFwcCBhYm91dCB0aGUgY2hhbmdlCl90aGlzLnRyaWdnZXIoJ2hlbGxvJyxoZWxsb09ianRPYnNlcnZlci5kYXRhKTt9KTt9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe2NvbnNvbGUuZXJyb3IocmVhc29uKTt9KTt9fV0pO3JldHVybiBIZWxsb1dvcmxkT2JzZXJ2ZXI7fShfRXZlbnRFbWl0dGVyMy5kZWZhdWx0KTtmdW5jdGlvbiBhY3RpdmF0ZShoeXBlcnR5VVJMLGJ1cyxjb25maWd1cmF0aW9uKXtyZXR1cm4ge25hbWU6J0hlbGxvV29ybGRPYnNlcnZlcicsaW5zdGFuY2U6bmV3IEhlbGxvV29ybGRPYnNlcnZlcihoeXBlcnR5VVJMLGJ1cyxjb25maWd1cmF0aW9uKX07fW1vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi91dGlscy9FdmVudEVtaXR0ZXIiOjIsIi4uL3V0aWxzL3V0aWxzIjozLCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXIiOjR9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCJfX2VzTW9kdWxlIix7dmFsdWU6dHJ1ZX0pO3ZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fXJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTtmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsQ29uc3RydWN0b3Ipe2lmKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3Rvcikpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpO319IC8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLyAvKioKICogRXZlbnRFbWl0dGVyCiAqIEFsbCBjbGFzc2VzIHdoaWNoIGV4dGVuZHMgdGhpcywgY2FuIGhhdmUgYWRkRXZlbnRMaXN0ZW5lciBhbmQgdHJpZ2dlciBldmVudHM7CiAqL3ZhciBFdmVudEVtaXR0ZXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyxFdmVudEVtaXR0ZXIpO31fY3JlYXRlQ2xhc3MoRXZlbnRFbWl0dGVyLFt7a2V5OiJhZGRFdmVudExpc3RlbmVyIiwgLyoqCiAgICogYWRkRXZlbnRMaXN0ZW5lciBsaXN0ZW4gZm9yIGFuIGV2ZW50VHlwZQogICAqIEBwYXJhbSAge3N0cmluZ30gICAgICAgICBldmVudFR5cGUgLSBsaXN0ZW5pbmcgZm9yIHRoaXMgdHlwZSBvZiBldmVudAogICAqIEBwYXJhbSAge0Z1bmN0aW9ufSAgICAgICBjYiAgICAgICAgLSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGV2ZW50IGl0IGlzIGludm9rZWQKICAgKi92YWx1ZTpmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSxjYil7dmFyIF90aGlzPXRoaXM7X3RoaXNbZXZlbnRUeXBlXT1jYjt9IC8qKgogICAqIEludm9rZSB0aGUgZXZlbnRUeXBlCiAgICogQHBhcmFtICB7c3RyaW5nfSBldmVudFR5cGUgLSBldmVudCB3aWxsIGJlIGludm9rZWQKICAgKiBAcGFyYW0gIHtvYmplY3R9IHBhcmFtcyAtIHBhcmFtZXRlcnMgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGFkZEV2ZW50TGlzdGVuZXIKICAgKi99LHtrZXk6InRyaWdnZXIiLHZhbHVlOmZ1bmN0aW9uIHRyaWdnZXIoZXZlbnRUeXBlLHBhcmFtcyl7dmFyIF90aGlzPXRoaXM7aWYoX3RoaXNbZXZlbnRUeXBlXSl7X3RoaXNbZXZlbnRUeXBlXShwYXJhbXMpO319fV0pO3JldHVybiBFdmVudEVtaXR0ZXI7fSgpO2V4cG9ydHMuZGVmYXVsdD1FdmVudEVtaXR0ZXI7bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOnRydWV9KTtleHBvcnRzLmRpdmlkZVVSTD1kaXZpZGVVUkw7ZXhwb3J0cy5kZWVwQ2xvbmU9ZGVlcENsb25lO2V4cG9ydHMuZ2V0Q29uZmlnPWdldENvbmZpZztleHBvcnRzLmdldFVzZXJNZWRpYT1nZXRVc2VyTWVkaWE7ZXhwb3J0cy5zZXJpYWxpemU9c2VyaWFsaXplO2V4cG9ydHMuZ2V0VGVtcGxhdGU9Z2V0VGVtcGxhdGU7IC8qKgogKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICoqLyAvLyBqc2hpbnQgYnJvd3Nlcjp0cnVlLCBqcXVlcnk6IHRydWUKLy8ganNoaW50IHZhcnN0bXQ6IHRydWUKLyogZ2xvYmFsIEhhbmRsZWJhcnMgKi8gLyoqCiAqIFN1cHBvcnQgbW9kdWxlIHdpdGggc29tZSBmdW5jdGlvbnMgd2lsbCBiZSB1c2VmdWwKICogQG1vZHVsZSB1dGlscwogKi8gLyoqCiAqIEB0eXBlZGVmIGRpdmlkZVVSTAogKiBAdHlwZSBPYmplY3QKICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGlkZW50aXR5IFRoZSBpZGVudGl0eSBvZiBVUkwKICovIC8qKgogKiBEaXZpZGUgYW4gdXJsIGluIHR5cGUsIGRvbWFpbiBhbmQgaWRlbnRpdHkKICogQHBhcmFtICB7VVJMLlVSTH0gdXJsIC0gdXJsIGFkZHJlc3MKICogQHJldHVybiB7ZGl2aWRlVVJMfSB0aGUgcmVzdWx0IG9mIGRpdmlkZVVSTAogKi9mdW5jdGlvbiBkaXZpZGVVUkwodXJsKXsgLy8gbGV0IHJlID0gLyhbYS16QS1aLV0qKT86XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn1cLlthLXpdezIsNn1cYikqKFwvW1wvXGRcd1wuLV0qKSooPzpbXD9dKSooLispKi9naTsKdmFyIHJlPS8oW2EtekEtWi1dKik6XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpO3ZhciBzdWJzdD0nJDEsJDIsJDMnO3ZhciBwYXJ0cz11cmwucmVwbGFjZShyZSxzdWJzdCkuc3BsaXQoJywnKTsgLy8gSWYgdGhlIHVybCBoYXMgbm8gcHJvdG9jb2wsIHRoZSBkZWZhdWx0IHByb3RvY29sIHNldCBpcyBodHRwcwppZihwYXJ0c1swXT09PXVybCl7cGFydHNbMF09J2h0dHBzJztwYXJ0c1sxXT11cmw7fXZhciByZXN1bHQ9e3R5cGU6cGFydHNbMF0sZG9tYWluOnBhcnRzWzFdLGlkZW50aXR5OnBhcnRzWzJdfTtyZXR1cm4gcmVzdWx0O30gLyoqCiAqIE1ha2UgYSBDT1BZIG9mIHRoZSBvcmlnaW5hbCBkYXRhCiAqIEBwYXJhbSAge09iamVjdH0gIG9iaiAtIG9iamVjdCB0byBiZSBjbG9uZWQKICogQHJldHVybiB7T2JqZWN0fQogKi9mdW5jdGlvbiBkZWVwQ2xvbmUob2JqKXsgLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgppZihvYmopcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7fSAvKioKICogR2V0IHRoZSBjb25maWd1cmF0aW9uIGZyb20gYW4ganNvbiBmaWxlOwogKiBAcGFyYW0gIHtKU09OT2JqZWN0fSBqc29uRmlsZQogKiBAcmV0dXJuIHtvYmplY3R9CiAqL2Z1bmN0aW9uIGdldENvbmZpZyhKU09OT2JqZWN0KXtjb25zb2xlLmxvZygnZGV2ZWxvcG1lbnQnKTtyZXR1cm4gSlNPTk9iamVjdFsnZGV2ZWxvcG1lbnQnXTt9IC8qKgogKiBHZXQgV2ViUlRDIEFQSSByZXNvdXJjZXMKICogQHBhcmFtICB7T2JqZWN0fSAgICAgb3B0aW9ucyBPYmplY3QgY29udGFpbmluZyB0aGUgaW5mb3JtYXRpb24gdGhhdCByZXNvdXJjZXMgd2lsbCBiZSB1c2VkIChjYW1lcmEsIG1pYywgcmVzb2x1dGlvbiwgZXRjKTsKICogQHJldHVybiB7UHJvbWlzZX0KICovZnVuY3Rpb24gZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe25hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKGZ1bmN0aW9uKG1lZGlhU3RyZWFtKXtyZXNvbHZlKG1lZGlhU3RyZWFtKTt9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe3JlamVjdChyZWFzb24pO30pO30pO31mdW5jdGlvbiBzZXJpYWxpemUoKXskLmZuLnNlcmlhbGl6ZU9iamVjdD1mdW5jdGlvbigpe3ZhciBvPXt9O3ZhciBhPXRoaXMuc2VyaWFsaXplQXJyYXkoKTskLmVhY2goYSxmdW5jdGlvbigpe2lmKG9bdGhpcy5uYW1lXSE9PXVuZGVmaW5lZCl7aWYoIW9bdGhpcy5uYW1lXS5wdXNoKXtvW3RoaXMubmFtZV09W29bdGhpcy5uYW1lXV07fW9bdGhpcy5uYW1lXS5wdXNoKHRoaXMudmFsdWV8fCcnKTt9ZWxzZSB7b1t0aGlzLm5hbWVdPXRoaXMudmFsdWV8fCcnO319KTtyZXR1cm4gbzt9OyQuZm4uc2VyaWFsaXplT2JqZWN0QXJyYXk9ZnVuY3Rpb24oKXt2YXIgbz17fTt2YXIgYT10aGlzLnNlcmlhbGl6ZUFycmF5KCk7JC5lYWNoKGEsZnVuY3Rpb24oKXtpZihvW3RoaXMubmFtZV0hPT11bmRlZmluZWQpe2lmKCFvW3RoaXMubmFtZV0ucHVzaCl7b1t0aGlzLm5hbWVdPVtvW3RoaXMubmFtZV1dO31vW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlfHwnJyk7fWVsc2Uge2lmKCFvW3RoaXMubmFtZV0pb1t0aGlzLm5hbWVdPVtdO29bdGhpcy5uYW1lXS5wdXNoKHRoaXMudmFsdWV8fCcnKTt9fSk7cmV0dXJuIG87fTt9ZnVuY3Rpb24gZ2V0VGVtcGxhdGUocGF0aCxzY3JpcHQpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7aWYoSGFuZGxlYmFycy50ZW1wbGF0ZXM9PT11bmRlZmluZWR8fEhhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdPT09dW5kZWZpbmVkKXtIYW5kbGViYXJzLnRlbXBsYXRlcz17fTt9ZWxzZSB7cmVzb2x2ZShIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXSk7fXZhciB0ZW1wbGF0ZUZpbGU9JC5hamF4KHt1cmw6cGF0aCsnLmhicycsc3VjY2VzczpmdW5jdGlvbiBzdWNjZXNzKGRhdGEpe0hhbmRsZWJhcnMudGVtcGxhdGVzW25hbWVdPUhhbmRsZWJhcnMuY29tcGlsZShkYXRhKTt9LGZhaWw6ZnVuY3Rpb24gZmFpbChyZWFzb24pe3JldHVybiByZWFzb247fX0pO3ZhciBzY3JpcHRGaWxlPSQuZ2V0U2NyaXB0KHNjcmlwdCk7dmFyIHJlcXVlc3RzPVtdO2lmKHBhdGgpcmVxdWVzdHMucHVzaCh0ZW1wbGF0ZUZpbGUpO2lmKHNjcmlwdClyZXF1ZXN0cy5wdXNoKHNjcmlwdEZpbGUpO1Byb21pc2UuYWxsKHJlcXVlc3RzKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7cmVzb2x2ZShIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXSk7fSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtyZWplY3QocmVhc29uKTt9KTt9KTt9Cgp9LHt9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBTeW5jaGVyLmpzIAovLyB2ZXJzaW9uOiAwLjIuMAoKIWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyx0LlN5bmNoZXI9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gbyhzLGEpe2lmKCFuW3NdKXtpZighdFtzXSl7dmFyIHU9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWEmJnUpcmV0dXJuIHUocywhMCk7aWYoaSlyZXR1cm4gaShzLCEwKTt2YXIgYz1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitzKyInIik7dGhyb3cgYy5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixjfXZhciBsPW5bc109e2V4cG9ydHM6e319O3Rbc11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtzXVsxXVtlXTtyZXR1cm4gbyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW3NdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLHM9MDtzPHIubGVuZ3RoO3MrKylvKHJbc10pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LG4pe09iamVjdC5vYnNlcnZlJiYhQXJyYXkub2JzZXJ2ZSYmZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7dmFyIG49ZS5nZXROb3RpZmllcixyPSJwZXJmb3JtQ2hhbmdlIixvPSJfb3JpZ2luYWwiLGk9InNwbGljZSIscz17cHVzaDpmdW5jdGlvbiB1KGUpe3ZhciB0PWFyZ3VtZW50cyxzPXVbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gbih0aGlzKVtyXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnMtdC5sZW5ndGgsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHVuc2hpZnQ6ZnVuY3Rpb24gYyhlKXt2YXIgdD1hcmd1bWVudHMscz1jW29dLmFwcGx5KHRoaXMsdCk7cmV0dXJuIG4odGhpcylbcl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDowLGFkZGVkQ291bnQ6dC5sZW5ndGgscmVtb3ZlZDpbXX19KSxzfSxwb3A6ZnVuY3Rpb24gbCgpe3ZhciBlPXRoaXMubGVuZ3RoLHQ9bFtvXS5jYWxsKHRoaXMpO3JldHVybiB0aGlzLmxlbmd0aCE9PWUmJm4odGhpcylbcl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDp0aGlzLmxlbmd0aCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzaGlmdDpmdW5jdGlvbiBmKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1mW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmbih0aGlzKVtyXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDowLHJlbW92ZWQ6W3RdfX0sdGhpcyksdH0sc3BsaWNlOmZ1bmN0aW9uIGQoZSx0KXt2YXIgcz1hcmd1bWVudHMsYT1kW29dLmFwcGx5KHRoaXMscyk7cmV0dXJuKGEubGVuZ3RofHxzLmxlbmd0aD4yKSYmbih0aGlzKVtyXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OmUsYWRkZWRDb3VudDpzLmxlbmd0aC0yLHJlbW92ZWQ6YX19LHRoaXMpLGF9fTtmb3IodmFyIGEgaW4gcylzW2FdW29dPXQucHJvdG90eXBlW2FdLHQucHJvdG90eXBlW2FdPXNbYV07dC5vYnNlcnZlPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGUub2JzZXJ2ZSh0LG4sWyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLGldKX0sdC51bm9ic2VydmU9ZS51bm9ic2VydmV9KE9iamVjdCxBcnJheSl9LHt9XSwyOltmdW5jdGlvbihlLHQsbil7d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMuZz1bXSx0aGlzLms9ZX1mdW5jdGlvbiBuKGUpeyFmdW5jdGlvbiBuKCl7dmFyIHI9ZS50YWtlUmVjb3JkcygpO3IubGVuZ3RoJiZlLmsocixlKSxlLmY9c2V0VGltZW91dChuLHQuX3BlcmlvZCl9KCl9ZnVuY3Rpb24gcih0KXt2YXIgbixyPXt0eXBlOm51bGwsdGFyZ2V0Om51bGwsYWRkZWROb2RlczpbXSxyZW1vdmVkTm9kZXM6W10scHJldmlvdXNTaWJsaW5nOm51bGwsbmV4dFNpYmxpbmc6bnVsbCxhdHRyaWJ1dGVOYW1lOm51bGwsYXR0cmlidXRlTmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6bnVsbH07Zm9yKG4gaW4gdClyW25dIT09ZSYmdFtuXSE9PWUmJihyW25dPXRbbl0pO3JldHVybiByfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj1hKGUsdCk7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvLHU9ci5sZW5ndGg7dC5hJiZuLmEmJmkocixlLG4uYSx0LmQpLCh0LmJ8fHQuZSkmJihvPXMocixlLG4sdCkpLChvfHxyLmxlbmd0aCE9PXUpJiYobj1hKGUsdCkpfX1mdW5jdGlvbiBpKHQsbixvLGkpe2Zvcih2YXIgcyxhLHU9e30sYz1uLmF0dHJpYnV0ZXMsbD1jLmxlbmd0aDtsLS07KXM9Y1tsXSxhPXMubmFtZSxpJiZpW2FdPT09ZXx8KHMudmFsdWUhPT1vW2FdJiZ0LnB1c2gocih7dHlwZToiYXR0cmlidXRlcyIsdGFyZ2V0Om4sYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV0sYXR0cmlidXRlTmFtZXNwYWNlOnMubmFtZXNwYWNlVVJJfSkpLHVbYV09ITApO2ZvcihhIGluIG8pdVthXXx8dC5wdXNoKHIoe3RhcmdldDpuLHR5cGU6ImF0dHJpYnV0ZXMiLGF0dHJpYnV0ZU5hbWU6YSxvbGRWYWx1ZTpvW2FdfSkpfWZ1bmN0aW9uIHModCxuLG8scyl7ZnVuY3Rpb24gYShlLG4sbyxhLHUpe3ZhciBsPWUubGVuZ3RoLTE7dT0tfigobC11KS8yKTtmb3IodmFyIGYsZCxwO3A9ZS5wb3AoKTspZj1vW3AuaF0sZD1hW3AuaV0scy5iJiZ1JiZNYXRoLmFicyhwLmgtcC5pKT49bCYmKHQucHVzaChyKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpuLGFkZGVkTm9kZXM6W2ZdLHJlbW92ZWROb2RlczpbZl0sbmV4dFNpYmxpbmc6Zi5uZXh0U2libGluZyxwcmV2aW91c1NpYmxpbmc6Zi5wcmV2aW91c1NpYmxpbmd9KSksdS0tKSxzLmEmJmQuYSYmaSh0LGYsZC5hLHMuZCkscy5jJiYzPT09Zi5ub2RlVHlwZSYmZi5ub2RlVmFsdWUhPT1kLmMmJnQucHVzaChyKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6Zn0pKSxzLmUmJmMoZixkKX1mdW5jdGlvbiBjKG4sbyl7Zm9yKHZhciBkLHAsYixoLHYseT1uLmNoaWxkTm9kZXMsXz1vLmIsZz15Lmxlbmd0aCxPPV8/Xy5sZW5ndGg6MCxqPTAsbT0wLHc9MDtnPm18fE8+dzspaD15W21dLHY9KGI9X1t3XSkmJmIuaixoPT09dj8ocy5hJiZiLmEmJmkodCxoLGIuYSxzLmQpLHMuYyYmYi5jIT09ZSYmaC5ub2RlVmFsdWUhPT1iLmMmJnQucHVzaChyKHt0eXBlOiJjaGFyYWN0ZXJEYXRhIix0YXJnZXQ6aH0pKSxwJiZhKHAsbix5LF8saikscy5lJiYoaC5jaGlsZE5vZGVzLmxlbmd0aHx8Yi5iJiZiLmIubGVuZ3RoKSYmYyhoLGIpLG0rKyx3KyspOihsPSEwLGR8fChkPXt9LHA9W10pLGgmJihkW2I9dShoKV18fChkW2JdPSEwLC0xPT09KGI9ZihfLGgsdywiaiIpKT9zLmImJih0LnB1c2gocih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6bixhZGRlZE5vZGVzOltoXSxuZXh0U2libGluZzpoLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpoLnByZXZpb3VzU2libGluZ30pKSxqKyspOnAucHVzaCh7aDptLGk6Yn0pKSxtKyspLHYmJnYhPT15W21dJiYoZFtiPXUodildfHwoZFtiXT0hMCwtMT09PShiPWYoeSx2LG0pKT9zLmImJih0LnB1c2gocih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6by5qLHJlbW92ZWROb2Rlczpbdl0sbmV4dFNpYmxpbmc6X1t3KzFdLHByZXZpb3VzU2libGluZzpfW3ctMV19KSksai0tKTpwLnB1c2goe2g6YixpOnd9KSksdysrKSk7cCYmYShwLG4seSxfLGopfXZhciBsO3JldHVybiBjKG4sbyksbH1mdW5jdGlvbiBhKGUsdCl7dmFyIG49ITA7cmV0dXJuIGZ1bmN0aW9uIHIoZSl7dmFyIG89e2o6ZX07cmV0dXJuIXQuY3x8MyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlPyh0LmEmJm4mJjE9PT1lLm5vZGVUeXBlJiYoby5hPWwoZS5hdHRyaWJ1dGVzLGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuZCYmIXQuZFtuLm5hbWVdfHwoZVtuLm5hbWVdPW4udmFsdWUpLGV9KSksbiYmKHQuYnx8dC5jfHx0LmEmJnQuZSkmJihvLmI9YyhlLmNoaWxkTm9kZXMscikpLG49dC5lKTpvLmM9ZS5ub2RlVmFsdWUsb30oZSl9ZnVuY3Rpb24gdShlKXt0cnl7cmV0dXJuIGUuaWR8fChlLm1vX2lkPWUubW9faWR8fGQrKyl9Y2F0Y2godCl7dHJ5e3JldHVybiBlLm5vZGVWYWx1ZX1jYXRjaChuKXtyZXR1cm4gZCsrfX19ZnVuY3Rpb24gYyhlLHQpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspbltyXT10KGVbcl0scixlKTtyZXR1cm4gbn1mdW5jdGlvbiBsKGUsdCl7Zm9yKHZhciBuPXt9LHI9MDtyPGUubGVuZ3RoO3IrKyluPXQobixlW3JdLHIsZSk7cmV0dXJuIG59ZnVuY3Rpb24gZihlLHQsbixyKXtmb3IoO248ZS5sZW5ndGg7bisrKWlmKChyP2Vbbl1bcl06ZVtuXSk9PT10KXJldHVybiBuO3JldHVybi0xfXQuX3BlcmlvZD0zMCx0LnByb3RvdHlwZT17b2JzZXJ2ZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj17YTohISh0LmF0dHJpYnV0ZXN8fHQuYXR0cmlidXRlRmlsdGVyfHx0LmF0dHJpYnV0ZU9sZFZhbHVlKSxiOiEhdC5jaGlsZExpc3QsZTohIXQuc3VidHJlZSxjOiEoIXQuY2hhcmFjdGVyRGF0YSYmIXQuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKX0saT10aGlzLmcscz0wO3M8aS5sZW5ndGg7cysrKWlbc10ubT09PWUmJmkuc3BsaWNlKHMsMSk7dC5hdHRyaWJ1dGVGaWx0ZXImJihyLmQ9bCh0LmF0dHJpYnV0ZUZpbHRlcixmdW5jdGlvbihlLHQpe3JldHVybiBlW3RdPSEwLGV9KSksaS5wdXNoKHttOmUsbDpvKGUscil9KSx0aGlzLmZ8fG4odGhpcyl9LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9dGhpcy5nLG49MDtuPHQubGVuZ3RoO24rKyl0W25dLmwoZSk7cmV0dXJuIGV9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLmc9W10sY2xlYXJUaW1lb3V0KHRoaXMuZiksdGhpcy5mPW51bGx9fTt2YXIgZD0xO3JldHVybiB0fSh2b2lkIDApfSx7fV0sMzpbZnVuY3Rpb24oZSx0LG4pe09iamVjdC5vYnNlcnZlfHxmdW5jdGlvbihlLHQsbixyKXsidXNlIHN0cmljdCI7dmFyIG8saSxzPVsiYWRkIiwidXBkYXRlIiwiZGVsZXRlIiwicmVjb25maWd1cmUiLCJzZXRQcm90b3R5cGUiLCJwcmV2ZW50RXh0ZW5zaW9ucyJdLGE9dC5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PWUuY2FsbCh0KX19KGUucHJvdG90eXBlLnRvU3RyaW5nKSx1PXQucHJvdG90eXBlLmluZGV4T2Y/dC5pbmRleE9mfHxmdW5jdGlvbihlLG4scil7cmV0dXJuIHQucHJvdG90eXBlLmluZGV4T2YuY2FsbChlLG4scil9OmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bnx8MDtyPGUubGVuZ3RoO3IrKylpZihlW3JdPT09dClyZXR1cm4gcjtyZXR1cm4tMX0sYz1uLk1hcCE9PXImJk1hcC5wcm90b3R5cGUuZm9yRWFjaD9mdW5jdGlvbigpe3JldHVybiBuZXcgTWFwfTpmdW5jdGlvbigpe3ZhciBlPVtdLHQ9W107cmV0dXJue3NpemU6MCxoYXM6ZnVuY3Rpb24odCl7cmV0dXJuIHUoZSx0KT4tMX0sZ2V0OmZ1bmN0aW9uKG4pe3JldHVybiB0W3UoZSxuKV19LHNldDpmdW5jdGlvbihuLHIpe3ZhciBvPXUoZSxuKTstMT09PW8/KGUucHVzaChuKSx0LnB1c2gociksdGhpcy5zaXplKyspOnRbb109cn0sImRlbGV0ZSI6ZnVuY3Rpb24obil7dmFyIHI9dShlLG4pO3I+LTEmJihlLnNwbGljZShyLDEpLHQuc3BsaWNlKHIsMSksdGhpcy5zaXplLS0pfSxmb3JFYWNoOmZ1bmN0aW9uKG4pe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKW4uY2FsbChhcmd1bWVudHNbMV0sdFtyXSxlW3JdLHRoaXMpfX19LGw9ZS5nZXRPd25Qcm9wZXJ0eU5hbWVzP2Z1bmN0aW9uKCl7dmFyIHQ9ZS5nZXRPd25Qcm9wZXJ0eU5hbWVzO3RyeXthcmd1bWVudHMuY2FsbGVlfWNhdGNoKG4pe3ZhciByPSh0KHUpLmpvaW4oIiAiKSsiICIpLnJlcGxhY2UoL3Byb3RvdHlwZSB8bGVuZ3RoIHxuYW1lIC9nLCIiKS5zbGljZSgwLC0xKS5zcGxpdCgiICIpO3IubGVuZ3RoJiYodD1mdW5jdGlvbih0KXt2YXIgbj1lLmdldE93blByb3BlcnR5TmFtZXModCk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQpZm9yKHZhciBvLGk9MDtpPHIubGVuZ3RoOykobz11KG4scltpKytdKSk+LTEmJm4uc3BsaWNlKG8sMSk7cmV0dXJuIG59KX1yZXR1cm4gdH0oKTpmdW5jdGlvbih0KXt2YXIgbixyLG89W107aWYoImhhc093blByb3BlcnR5ImluIHQpZm9yKG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiZvLnB1c2gobik7ZWxzZXtyPWUuaGFzT3duUHJvcGVydHk7Zm9yKG4gaW4gdClyLmNhbGwodCxuKSYmby5wdXNoKG4pfXJldHVybiBhKHQpJiZvLnB1c2goImxlbmd0aCIpLG99LGY9ZS5nZXRQcm90b3R5cGVPZixkPWUuZGVmaW5lUHJvcGVydGllcyYmZS5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IscD1uLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8bi53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKCl7dmFyIGU9K25ldyBEYXRlLHQ9ZTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtuKCh0PStuZXcgRGF0ZSktZSl9LDE3KX19KCksYj1mdW5jdGlvbihlLHQsbil7dmFyIHI9by5nZXQoZSk7cj8odihyLGUpLE8oZSxyLHQsbikpOihyPWgoZSksTyhlLHIsdCxuKSwxPT09by5zaXplJiZwKHkpKX0saD1mdW5jdGlvbih0LG4pe3ZhciByLGk9bCh0KSxzPVtdLGE9MCxuPXtoYW5kbGVyczpjKCksZnJvemVuOmUuaXNGcm96ZW4/ZS5pc0Zyb3plbih0KTohMSxleHRlbnNpYmxlOmUuaXNFeHRlbnNpYmxlP2UuaXNFeHRlbnNpYmxlKHQpOiEwLHByb3RvOmYmJmYodCkscHJvcGVydGllczppLHZhbHVlczpzLG5vdGlmaWVyOmcodCxuKX07aWYoZClmb3Iocj1uLmRlc2NyaXB0b3JzPVtdO2E8aS5sZW5ndGg7KXJbYV09ZCh0LGlbYV0pLHNbYV09dFtpW2ErK11dO2Vsc2UgZm9yKDthPGkubGVuZ3RoOylzW2FdPXRbaVthKytdXTtyZXR1cm4gby5zZXQodCxuKSxufSx2PWZ1bmN0aW9uKCl7dmFyIHQ9ZD9mdW5jdGlvbihlLHQsbixyLG8pe3ZhciBpPXQucHJvcGVydGllc1tuXSxzPWVbaV0sYT10LnZhbHVlc1tuXSx1PXQuZGVzY3JpcHRvcnNbbl07InZhbHVlImluIG8mJihhPT09cz8wPT09YSYmMS9hIT09MS9zOmE9PT1hfHxzPT09cykmJihqKGUsdCx7bmFtZTppLHR5cGU6InVwZGF0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6YX0sciksdC52YWx1ZXNbbl09cyksIXUuY29uZmlndXJhYmxlfHxvLmNvbmZpZ3VyYWJsZSYmby53cml0YWJsZT09PXUud3JpdGFibGUmJm8uZW51bWVyYWJsZT09PXUuZW51bWVyYWJsZSYmby5nZXQ9PT11LmdldCYmby5zZXQ9PT11LnNldHx8KGooZSx0LHtuYW1lOmksdHlwZToicmVjb25maWd1cmUiLG9iamVjdDplLG9sZFZhbHVlOmF9LHIpLHQuZGVzY3JpcHRvcnNbbl09byl9OmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBvPXQucHJvcGVydGllc1tuXSxpPWVbb10scz10LnZhbHVlc1tuXTsocz09PWk/MD09PXMmJjEvcyE9PTEvaTpzPT09c3x8aT09PWkpJiYoaihlLHQse25hbWU6byx0eXBlOiJ1cGRhdGUiLG9iamVjdDplLG9sZFZhbHVlOnN9LHIpLHQudmFsdWVzW25dPWkpfSxuPWQ/ZnVuY3Rpb24oZSxuLHIsbyxpKXtmb3IodmFyIHMsYT1uLmxlbmd0aDtyJiZhLS07KW51bGwhPT1uW2FdJiYocz1kKGUsblthXSksci0tLHM/dChlLG8sYSxpLHMpOihqKGUsbyx7bmFtZTpuW2FdLHR5cGU6ImRlbGV0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6by52YWx1ZXNbYV19LGkpLG8ucHJvcGVydGllcy5zcGxpY2UoYSwxKSxvLnZhbHVlcy5zcGxpY2UoYSwxKSxvLmRlc2NyaXB0b3JzLnNwbGljZShhLDEpKSl9OmZ1bmN0aW9uKGUsdCxuLHIsbyl7Zm9yKHZhciBpPXQubGVuZ3RoO24mJmktLTspbnVsbCE9PXRbaV0mJihqKGUscix7bmFtZTp0W2ldLHR5cGU6ImRlbGV0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6ci52YWx1ZXNbaV19LG8pLHIucHJvcGVydGllcy5zcGxpY2UoaSwxKSxyLnZhbHVlcy5zcGxpY2UoaSwxKSxuLS0pfTtyZXR1cm4gZnVuY3Rpb24ocixvLGkpe2lmKHIuaGFuZGxlcnMuc2l6ZSYmIXIuZnJvemVuKXt2YXIgcyxhLGMscCxiLGgsdix5LF89ci52YWx1ZXMsZz1yLmRlc2NyaXB0b3JzLE89MDtpZihyLmV4dGVuc2libGUpaWYocz1yLnByb3BlcnRpZXMuc2xpY2UoKSxhPXMubGVuZ3RoLGM9bChvKSxnKXtmb3IoO088Yy5sZW5ndGg7KWI9Y1tPKytdLHA9dShzLGIpLHk9ZChvLGIpLC0xPT09cD8oaihvLHIse25hbWU6Yix0eXBlOiJhZGQiLG9iamVjdDpvfSxpKSxyLnByb3BlcnRpZXMucHVzaChiKSxfLnB1c2gob1tiXSksZy5wdXNoKHkpKTooc1twXT1udWxsLGEtLSx0KG8scixwLGkseSkpO24obyxzLGEscixpKSxlLmlzRXh0ZW5zaWJsZShvKXx8KHIuZXh0ZW5zaWJsZT0hMSxqKG8scix7dHlwZToicHJldmVudEV4dGVuc2lvbnMiLG9iamVjdDpvfSxpKSxyLmZyb3plbj1lLmlzRnJvemVuKG8pKX1lbHNle2Zvcig7TzxjLmxlbmd0aDspYj1jW08rK10scD11KHMsYiksaD1vW2JdLC0xPT09cD8oaihvLHIse25hbWU6Yix0eXBlOiJhZGQiLG9iamVjdDpvfSxpKSxyLnByb3BlcnRpZXMucHVzaChiKSxfLnB1c2goaCkpOihzW3BdPW51bGwsYS0tLHQobyxyLHAsaSkpO24obyxzLGEscixpKX1lbHNlIGlmKCFyLmZyb3plbil7Zm9yKDtPPHMubGVuZ3RoO08rKyliPXNbT10sdChvLHIsTyxpLGQobyxiKSk7ZS5pc0Zyb3plbihvKSYmKHIuZnJvemVuPSEwKX1mJiYodj1mKG8pLHYhPT1yLnByb3RvJiYoaihvLHIse3R5cGU6InNldFByb3RvdHlwZSIsbmFtZToiX19wcm90b19fIixvYmplY3Q6byxvbGRWYWx1ZTpyLnByb3RvfSksci5wcm90bz12KSl9fX0oKSx5PWZ1bmN0aW9uKCl7by5zaXplJiYoby5mb3JFYWNoKHYpLGkuZm9yRWFjaChfKSxwKHkpKX0sXz1mdW5jdGlvbihlLHQpe3ZhciBuPWUuY2hhbmdlUmVjb3JkcztuLmxlbmd0aCYmKGUuY2hhbmdlUmVjb3Jkcz1bXSx0KG4pKX0sZz1mdW5jdGlvbihlLHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDImJih0PW8uZ2V0KGUpKSx0JiZ0Lm5vdGlmaWVyfHx7bm90aWZ5OmZ1bmN0aW9uKHQpe3QudHlwZTt2YXIgbj1vLmdldChlKTtpZihuKXt2YXIgcixpPXtvYmplY3Q6ZX07Zm9yKHIgaW4gdCkib2JqZWN0IiE9PXImJihpW3JdPXRbcl0pO2ooZSxuLGkpfX0scGVyZm9ybUNoYW5nZTpmdW5jdGlvbih0LG4pe2lmKCJzdHJpbmciIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIG5vbi1zdHJpbmcgY2hhbmdlVHlwZSIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBuKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBwZXJmb3JtIG5vbi1mdW5jdGlvbiIpO3ZhciBpLHMsYT1vLmdldChlKSx1PWFyZ3VtZW50c1syXSxjPXU9PT1yP24oKTpuLmNhbGwodSk7aWYoYSYmdihhLGUsdCksYSYmYyYmIm9iamVjdCI9PXR5cGVvZiBjKXtzPXtvYmplY3Q6ZSx0eXBlOnR9O2ZvcihpIGluIGMpIm9iamVjdCIhPT1pJiYidHlwZSIhPT1pJiYoc1tpXT1jW2ldKTtqKGUsYSxzKX19fX0sTz1mdW5jdGlvbihlLHQsbixyKXt2YXIgbz1pLmdldChuKTtvfHxpLnNldChuLG89e29ic2VydmVkOmMoKSxjaGFuZ2VSZWNvcmRzOltdfSksby5vYnNlcnZlZC5zZXQoZSx7YWNjZXB0TGlzdDpyLnNsaWNlKCksZGF0YTp0fSksdC5oYW5kbGVycy5zZXQobixvKX0saj1mdW5jdGlvbihlLHQsbixyKXt0LmhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG89dC5vYnNlcnZlZC5nZXQoZSkuYWNjZXB0TGlzdDsoInN0cmluZyIhPXR5cGVvZiByfHwtMT09PXUobyxyKSkmJnUobyxuLnR5cGUpPi0xJiZ0LmNoYW5nZVJlY29yZHMucHVzaChuKX0pfTtvPWMoKSxpPWMoKSxlLm9ic2VydmU9ZnVuY3Rpb24odCxuLG8pe2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5vYnNlcnZlIGNhbm5vdCBvYnNlcnZlIG5vbi1vYmplY3QiKTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygbil0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3QgZGVsaXZlciB0byBub24tZnVuY3Rpb24iKTtpZihlLmlzRnJvemVuJiZlLmlzRnJvemVuKG4pKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIGEgZnJvemVuIGZ1bmN0aW9uIG9iamVjdCIpO2lmKG89PT1yKW89cztlbHNlIGlmKCFvfHwib2JqZWN0IiE9dHlwZW9mIG8pdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhpcmQgYXJndW1lbnQgdG8gT2JqZWN0Lm9ic2VydmUgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzLiIpO3JldHVybiBiKHQsbixvKSx0fSxlLnVub2JzZXJ2ZT1mdW5jdGlvbihlLHQpe2lmKG51bGw9PT1lfHwib2JqZWN0IiE9dHlwZW9mIGUmJiJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC51bm9ic2VydmUgY2Fubm90IHVub2JzZXJ2ZSBub24tb2JqZWN0Iik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LnVub2JzZXJ2ZSBjYW5ub3QgZGVsaXZlciB0byBub24tZnVuY3Rpb24iKTt2YXIgbixyPWkuZ2V0KHQpO3JldHVybiByJiYobj1yLm9ic2VydmVkLmdldChlKSkmJihyLm9ic2VydmVkLmZvckVhY2goZnVuY3Rpb24oZSx0KXt2KGUuZGF0YSx0KX0pLHAoZnVuY3Rpb24oKXtfKHIsdCl9KSwxPT09ci5vYnNlcnZlZC5zaXplJiZyLm9ic2VydmVkLmhhcyhlKT9pWyJkZWxldGUiXSh0KTpyLm9ic2VydmVkWyJkZWxldGUiXShlKSwxPT09bi5kYXRhLmhhbmRsZXJzLnNpemU/b1siZGVsZXRlIl0oZSk6bi5kYXRhLmhhbmRsZXJzWyJkZWxldGUiXSh0KSksZX0sZS5nZXROb3RpZmllcj1mdW5jdGlvbih0KXtpZihudWxsPT09dHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QuZ2V0Tm90aWZpZXIgY2Fubm90IGdldE5vdGlmaWVyIG5vbi1vYmplY3QiKTtyZXR1cm4gZS5pc0Zyb3plbiYmZS5pc0Zyb3plbih0KT9udWxsOmcodCl9LGUuZGVsaXZlckNoYW5nZVJlY29yZHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmRlbGl2ZXJDaGFuZ2VSZWNvcmRzIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO3ZhciB0PWkuZ2V0KGUpO3QmJih0Lm9ic2VydmVkLmZvckVhY2goZnVuY3Rpb24oZSx0KXt2KGUuZGF0YSx0KX0pLF8odCxlKSl9fShPYmplY3QsQXJyYXksdGhpcyl9LHt9XSw0OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLG4uRGF0YU9iamVjdE9ic2VydmVyPW4uRGF0YU9iamVjdFJlcG9ydGVyPW4uU3luY2hlcj12b2lkIDAsZSgibXV0YXRpb25vYnNlcnZlci1zaGltIiksZSgib2JqZWN0Lm9ic2VydmUiKSxlKCJhcnJheS5vYnNlcnZlIik7dmFyIG89ZSgiLi9zeW5jaGVyL1N5bmNoZXIiKSxpPXIobykscz1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdFJlcG9ydGVyIiksYT1yKHMpLHU9ZSgiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciIpLGM9cih1KTtuLlN5bmNoZXI9aVsiZGVmYXVsdCJdLG4uRGF0YU9iamVjdFJlcG9ydGVyPWFbImRlZmF1bHQiXSxuLkRhdGFPYmplY3RPYnNlcnZlcj1jWyJkZWZhdWx0Il19LHsiLi9zeW5jaGVyL0RhdGFPYmplY3RPYnNlcnZlciI6NywiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciI6OCwiLi9zeW5jaGVyL1N5bmNoZXIiOjExLCJhcnJheS5vYnNlcnZlIjoxLCJtdXRhdGlvbm9ic2VydmVyLXNoaW0iOjIsIm9iamVjdC5vYnNlcnZlIjozfV0sNTpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCkscz1lKCIuL1N5bmNPYmplY3QiKSxhPXIocyksdT1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGM9cih1KSxsPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIsaSxzLHUpe28odGhpcyxlKTt2YXIgYz10aGlzO2MuX3N5bmNoZXI9dCxjLl91cmw9bixjLl9zY2hlbWE9cixjLl9zdGF0dXM9aSxjLl9zeW5jT2JqPW5ldyBhWyJkZWZhdWx0Il0ocyksYy5fY2hpbGRyZW5zPXUsYy5fdmVyc2lvbj0wLGMuX2NoaWxkSWQ9MCxjLl9jaGlsZHJlbk9iamVjdHM9e30sYy5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sYy5fb3duZXI9dC5fb3duZXIsYy5fYnVzPXQuX2J1c31yZXR1cm4gaShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMsbj10Ll91cmwrIi9jaGlsZHJlbi8iO3QuX2NoaWxkcmVucyYmdC5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG89bityLGk9dC5fYnVzLmFkZExpc3RlbmVyKG8sZnVuY3Rpb24obil7aWYobi5mcm9tIT09ZS5fb3duZXIpc3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0LUNoaWxkcmVuLVJDVjogIixuKSxuLnR5cGUpe2Nhc2UiY3JlYXRlIjp0Ll9vbkNoaWxkcmVuQ3JlYXRlKG4pO2JyZWFrO2Nhc2UiZGVsZXRlIjpjb25zb2xlLmxvZyhuKTticmVhaztkZWZhdWx0OnQuX2NoYW5nZUNoaWxkcmVuKG4pfX0pO3QuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goaSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSksT2JqZWN0LmtleXMoZS5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NoaWxkcmVuT2JqZWN0c1t0XS5fcmVsZWFzZUxpc3RlbmVycygpfSl9fSx7a2V5OiJwYXVzZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToicmVzdW1lIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJzdG9wIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJhZGRDaGlsZHJlbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO24uX2NoaWxkSWQrKzt2YXIgcj1uLl9vd25lcisiIyIrbi5fY2hpbGRJZCxvPW4uX3VybCsiL2NoaWxkcmVuLyIrZSxpPXt0eXBlOiJjcmVhdGUiLGZyb206bi5fb3duZXIsdG86byxib2R5OntyZXNvdXJjZTpyLHZhbHVlOnR9fTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7dmFyIHM9bi5fYnVzLnBvc3RNZXNzYWdlKGkpO2NvbnNvbGUubG9nKCJjcmVhdGUtcmVwb3J0ZXItY2hpbGQoICIrbi5fb3duZXIrIiApOiAiLGkpO3ZhciBhPW5ldyBjWyJkZWZhdWx0Il0obixyLHQsbi5fb3duZXIscyk7YS5vbkNoYW5nZShmdW5jdGlvbihlKXtuLl9vbkNoYW5nZShlLHtwYXRoOm8sY2hpbGRJZDpyfSl9KSxuLl9jaGlsZHJlbk9iamVjdHNbcl09YSxlKGEpfSl9fSx7a2V5OiJvbkFkZENoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcj1lfX0se2tleToiX29uQ2hpbGRyZW5DcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmJvZHkucmVzb3VyY2U7Y29uc29sZS5sb2coImNyZWF0ZS1vYnNlcnZlci1jaGlsZCggIit0Ll9vd25lcisiICk6ICIsZSk7dmFyIHI9bmV3IGNbImRlZmF1bHQiXSh0LG4sZS5ib2R5LnZhbHVlKTt0Ll9jaGlsZHJlbk9iamVjdHNbbl09cixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNvdXJjZTp0Ll9vd25lcn19KX0pO3ZhciBvPXt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx1cmw6ZS50byx2YWx1ZTplLmJvZHkudmFsdWUsY2hpbGRJZDpuLGlkZW50aXR5OmUuYm9keS5pZFRva2VufTt0Ll9vbkFkZENoaWxkcmVuSGFuZGxlciYmKGNvbnNvbGUubG9nKCJBREQtQ0hJTERSRU4tRVZFTlQ6ICIsbyksdC5fb25BZGRDaGlsZHJlbkhhbmRsZXIobykpfX0se2tleToiX29uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYobi5fdmVyc2lvbisrLCJvbiI9PT1uLl9zdGF0dXMpe3ZhciByPXt0eXBlOiJ1cGRhdGUiLGZyb206bi5fdXJsLHRvOm4uX3VybCsiL2NoYW5nZXMiLGJvZHk6e3ZlcnNpb246bi5fdmVyc2lvbixzb3VyY2U6bi5fb3duZXIsYXR0cmlidXRlOmUuZmllbGR9fTtlLm9UeXBlPT09cy5PYmplY3RUeXBlLk9CSkVDVD9lLmNUeXBlIT09cy5DaGFuZ2VUeXBlLlJFTU9WRSYmKHIuYm9keS52YWx1ZT1lLmRhdGEpOihyLmJvZHkuYXR0cmlidXRlVHlwZT1lLm9UeXBlLHIuYm9keS52YWx1ZT1lLmRhdGEsZS5jVHlwZSE9PXMuQ2hhbmdlVHlwZS5VUERBVEUmJihyLmJvZHkub3BlcmF0aW9uPWUuY1R5cGUpKSx0JiYoci50bz10LnBhdGgsci5ib2R5LnJlc291cmNlPXQuY2hpbGRJZCksbi5fYnVzLnBvc3RNZXNzYWdlKHIpfX19LHtrZXk6Il9jaGFuZ2VPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztpZihuLl92ZXJzaW9uKzE9PT10LmJvZHkudmVyc2lvbil7bi5fdmVyc2lvbisrO3ZhciByPXQuYm9keS5hdHRyaWJ1dGUsbz0oMCxsLmRlZXBDbG9uZSkodC5ib2R5LnZhbHVlKSxpPWUuZmluZEJlZm9yZShyKTtpZih0LmJvZHkuYXR0cmlidXRlVHlwZT09PXMuT2JqZWN0VHlwZS5BUlJBWSlpZih0LmJvZHkub3BlcmF0aW9uPT09cy5DaGFuZ2VUeXBlLkFERCl7dmFyIGE9aS5vYmosdT1pLmxhc3Q7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhLFt1LDBdLmNvbmNhdChvKSl9ZWxzZSBpZih0LmJvZHkub3BlcmF0aW9uPT09cy5DaGFuZ2VUeXBlLlJFTU9WRSl7dmFyIGM9aS5vYmosZj1pLmxhc3Q7Yy5zcGxpY2UoZixvKX1lbHNlIGkub2JqW2kubGFzdF09bztlbHNlIHQuYm9keS52YWx1ZT9pLm9ialtpLmxhc3RdPW86ZGVsZXRlIGkub2JqW2kubGFzdF19ZWxzZSBjb25zb2xlLmxvZygiVU5TWU5DSFJPTklaRUQgVkVSU0lPTjogKGRhdGEgPT4gIituLl92ZXJzaW9uKyIsIG1zZyA9PiAiK3QuYm9keS52ZXJzaW9uKyIpIil9fSx7a2V5OiJfY2hhbmdlQ2hpbGRyZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Y29uc29sZS5sb2coIkNoYW5nZSBjaGlsZHJlbjogIix0Ll9vd25lcixlKTt2YXIgbj1lLmJvZHkucmVzb3VyY2Uscj10Ll9jaGlsZHJlbk9iamVjdHNbbl07cj90Ll9jaGFuZ2VPYmplY3Qoci5fc3luY09iaixlKTpjb25zb2xlLmxvZygiTm8gY2hpbGRyZW4gZm91bmQgZm9yOiAiLG4pfX0se2tleToidXJsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NoZW1hfX0se2tleToic3RhdHVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdHVzfX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19LHtrZXk6ImNoaWxkcmVucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuT2JqZWN0c319XSksZX0oKTtuWyJkZWZhdWx0Il09Zix0LmV4cG9ydHM9blsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMiwiLi9EYXRhT2JqZWN0Q2hpbGQiOjYsIi4vU3luY09iamVjdCI6MTB9XSw2OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxzPWUoIi4vU3luY09iamVjdCIpLGE9cihzKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4scixpLHMpe28odGhpcyxlKTt2YXIgdT10aGlzO3UuX3BhcmVudD10LHUuX2NoaWxkSWQ9bix1Ll9vd25lcj1pLHUuX21zZ0lkPXMsdS5fc3luY09iaj1uZXcgYVsiZGVmYXVsdCJdKHIpLHUuX2J1cz10Ll9idXMsdS5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4gaShlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9vd25lciYmKGUuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9vd25lcixmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6Iix0KSxlLl9vblJlc3BvbnNlKHQpKX0pKX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXImJmUuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZGVsZXRlIGUuX3BhcmVudC5fY2hpbGRyZW5bZS5fY2hpbGRJZF0sZS5fcmVsZWFzZUxpc3RlbmVycygpfX0se2tleToib25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbih0KXtlKHQpfSl9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj17dHlwZTplLnR5cGUsdXJsOmUuYm9keS5zb3VyY2UsY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJnQuX29uUmVzcG9uc2VIYW5kbGVyKG4pfX0se2tleToiY2hpbGRJZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkSWR9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX1dKSxlfSgpO25bImRlZmF1bHQiXT11LHQuZXhwb3J0cz1uWyJkZWZhdWx0Il19LHsiLi9TeW5jT2JqZWN0IjoxMH1dLDc6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gaShlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQ/ZTp0fWZ1bmN0aW9uIHMoZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSx1PWZ1bmN0aW9uIGgoZSx0LG4pe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDpoKG8sdCxuKX1pZigidmFsdWUiaW4gcilyZXR1cm4gci52YWx1ZTt2YXIgaT1yLmdldDtpZih2b2lkIDAhPT1pKXJldHVybiBpLmNhbGwobil9LGM9ZSgiLi9EYXRhT2JqZWN0IiksbD1yKGMpLGY9ZSgiLi9EYXRhT2JqZWN0Q2hpbGQiKSxkPXIoZikscD17QU5ZOiJhbnkiLFNUQVJUOiJzdGFydCIsRVhBQ1Q6ImV4YWN0In0sYj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsbixyLHMsYSx1LGMpe28odGhpcyx0KTt2YXIgbD1pKHRoaXMsT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpLmNhbGwodGhpcyxlLG4scixzLGEuZGF0YSx1KSksZj1sO3JldHVybiBmLl92ZXJzaW9uPWMsZi5fZmlsdGVycz17fSxmLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7Zi5fb25GaWx0ZXIoZSl9KSxPYmplY3Qua2V5cyhhLmNoaWxkcmVucykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1hLmNoaWxkcmVuc1tlXTtmLl9jaGlsZHJlbk9iamVjdHNbZV09bmV3IGRbImRlZmF1bHQiXShmLGUsdCl9KSxmLl9hbGxvY2F0ZUxpc3RlbmVycygpLGx9cmV0dXJuIHModCxlKSxhKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt1KE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX2NoYW5nZUxpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwrIi9jaGFuZ2VzIixmdW5jdGlvbih0KXsidXBkYXRlIj09PXQudHlwZSYmKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0T2JzZXJ2ZXItIitlLl91cmwrIi1SQ1Y6ICIsdCksZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCkpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt1KE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX29ic2VydmVyc1tlLl91cmxdfX0se2tleToidW5zdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLHI9e3R5cGU6cC5FWEFDVCxjYWxsYmFjazp0fSxvPWUuaW5kZXhPZigiKiIpO289PT1lLmxlbmd0aC0xJiYoMD09PW8/ci50eXBlPXAuQU5ZOihyLnR5cGU9cC5TVEFSVCxuPWUuc3Vic3RyKDAsZS5sZW5ndGgtMSkpKSx0aGlzLl9maWx0ZXJzW25dPXJ9fSx7a2V5OiJfb25GaWx0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXModC5fZmlsdGVycykuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgcj10Ll9maWx0ZXJzW25dO3IudHlwZT09PXAuQU5ZP3IuY2FsbGJhY2soZSk6ci50eXBlPT09cC5TVEFSVD8wPT09ZS5maWVsZC5pbmRleE9mKG4pJiZyLmNhbGxiYWNrKGUpOnIudHlwZT09PXAuRVhBQ1QmJmUuZmllbGQ9PT1uJiZyLmNhbGxiYWNrKGUpfSl9fV0pLHR9KGxbImRlZmF1bHQiXSk7blsiZGVmYXVsdCJdPWIsdC5leHBvcnRzPW5bImRlZmF1bHQiXX0seyIuL0RhdGFPYmplY3QiOjUsIi4vRGF0YU9iamVjdENoaWxkIjo2fV0sODpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBpKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hdHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdD9lOnR9ZnVuY3Rpb24gcyhlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLHU9ZnVuY3Rpb24gcChlLHQsbil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpO2lmKHZvaWQgMD09PXIpe3ZhciBvPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PW8/dm9pZCAwOnAobyx0LG4pfWlmKCJ2YWx1ZSJpbiByKXJldHVybiByLnZhbHVlO3ZhciBpPXIuZ2V0O2lmKHZvaWQgMCE9PWkpcmV0dXJuIGkuY2FsbChuKX0sYz1lKCIuL0RhdGFPYmplY3QiKSxsPXIoYyksZj1lKCIuLi91dGlscy91dGlscy5qcyIpLGQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLG4scixzLGEsdSl7byh0aGlzLHQpO3ZhciBjPWkodGhpcyxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkuY2FsbCh0aGlzLGUsbixyLHMsYSx1KSksbD1jO3JldHVybiBsLl9zdWJzY3JpcHRpb25zPXt9LGwuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLSIrbisiLVNFTkQ6ICIsZSksbC5fb25DaGFuZ2UoZSl9KSxsLl9hbGxvY2F0ZUxpc3RlbmVycygpLGN9cmV0dXJuIHModCxlKSxhKHQsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt1KE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9hbGxvY2F0ZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX3Jlc3BvbnNlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCxmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZlLl9vblJlc3BvbnNlKHQpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt1KE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksIl9yZWxlYXNlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fcmVzcG9uc2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6Imludml0ZU9ic2VydmVycyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXt0eXBlOiJjcmVhdGUiLGZyb206dC5fc3luY2hlci5fb3duZXIsdG86dC5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOnQuX3VybCxzY2hlbWE6dC5fc2NoZW1hLHZhbHVlOnQuX3N5bmNPYmouZGF0YSxhdXRob3Jpc2U6ZX19O3QuX2J1cy5wb3N0TWVzc2FnZShuKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6ImRlbGV0ZSIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RSZXBvcnRlci1ERUxFVEU6ICIsdCksMjAwPT09dC5ib2R5LmNvZGUmJihlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX3JlcG9ydGVyc1tlLl91cmxdKX0pfX0se2tleToib25TdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcj1lfX0se2tleToib25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7c3dpdGNoKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAiLGUpLGUuYm9keS50eXBlKXtjYXNlInN1YnNjcmliZSI6dC5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6dC5fb25VblN1YnNjcmliZShlKX19fSx7a2V5OiJfb25TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmJvZHkuZnJvbSxyPXt0eXBlOmUuYm9keS50eXBlLHVybDpuLGFjY2VwdDpmdW5jdGlvbigpe3ZhciByPXt1cmw6bixzdGF0dXM6Im9uIn07dC5fc3Vic2NyaXB0aW9uc1tuXT1yO3ZhciBvPXt9O3JldHVybiBPYmplY3Qua2V5cyh0Ll9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49dC5fY2hpbGRyZW5PYmplY3RzW2VdLmRhdGE7b1tlXT0oMCxmLmRlZXBDbG9uZSkobil9KSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsc2NoZW1hOnQuX3NjaGVtYSx2ZXJzaW9uOnQuX3ZlcnNpb24sdmFsdWU6e2RhdGE6KDAsZi5kZWVwQ2xvbmUpKHQuZGF0YSksY2hpbGRyZW5zOm99fX0pLHJ9LHJlamVjdDpmdW5jdGlvbihuKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDMsZGVzYzpufX0pfX07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlNVQlNDUklQVElPTi1FVkVOVDogIixyKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIocikpfX0se2tleToiX29uVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmJvZHkuZnJvbSxyPXQuX3N1YnNjcmlwdGlvbnNbbl07ZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbbl07dmFyIG89e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOm4sb2JqZWN0OnJ9O3QuX29uU3Vic2NyaXB0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJVTi1TVUJTQ1JJUFRJT04tRVZFTlQ6ICIsbyksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKG8pKX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49e3R5cGU6ZS50eXBlLHVybDplLmZyb20sY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJihjb25zb2xlLmxvZygiUkVTUE9OU0UtRVZFTlQ6ICIsbiksdC5fb25SZXNwb25zZUhhbmRsZXIobikpfX0se2tleToic3Vic2NyaXB0aW9ucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbnN9fV0pLHR9KGxbImRlZmF1bHQiXSk7blsiZGVmYXVsdCJdPWQsdC5leHBvcnRzPW5bImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTIsIi4vRGF0YU9iamVjdCI6NX1dLDk6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4sbyxpKXtyKHRoaXMsZSk7dmFyIHM9dGhpcztzLl9vd25lcj10LHMuX3VybD1uLHMuX2J1cz1vLHMuX2NoaWxkcmVuPWkscy5fY2hhbmdlcz1bXSxzLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybiBvKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFQcm92aXNpb25hbC0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VzLnB1c2godCl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJhcHBseSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCl9KX19LHtrZXk6ImNoaWxkcmVuIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW59fV0pLGV9KCk7blsiZGVmYXVsdCJdPWksdC5leHBvcnRzPW5bImRlZmF1bHQiXX0se31dLDEwOltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksbi5PYmplY3RUeXBlPW4uQ2hhbmdlVHlwZT12b2lkIDA7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCksaT1lKCIuLi91dGlscy91dGlscy5qcyIpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3IodGhpcyxlKTt2YXIgbj10aGlzO24uX29ic2VydmVycz1bXSxuLl9maWx0ZXJzPXt9LHQ/bi5fZGF0YT0oMCxpLmRlZXBDbG9uZSkodCk6bi5fZGF0YT17fSxuLl9pbnRlcm5hbE9ic2VydmUobmV3IGEsbi5fZGF0YSl9cmV0dXJuIG8oZSxbe2tleToib2JzZXJ2ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLnB1c2goZSl9fSx7a2V5OiJmaW5kIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KCIuIik7cmV0dXJuIHRoaXMuX2ZpbmRXaXRoU3BsaXQodCl9fSx7a2V5OiJmaW5kQmVmb3JlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxuPWUuc3BsaXQoIi4iKTtyZXR1cm4gdC5sYXN0PW4ucG9wKCksdC5vYmo9dGhpcy5fZmluZFdpdGhTcGxpdChuKSx0fX0se2tleToiX2ZpbmRXaXRoU3BsaXQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGE7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXt0PXRbZV19KSx0fX0se2tleToiX2ZpcmVFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dChlKX0pfX0se2tleToiX2lzT2JzZXJ2YWJsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1PYmplY3R8fGUuY29uc3RydWN0b3I9PT1BcnJheX19LHtrZXk6Il9pbnRlcm5hbE9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztpZihuLl9pc09ic2VydmFibGUodCkpe3ZhciByPWZ1bmN0aW9uKHQpe24uX29uQ2hhbmdlcyhlLHQpfTtpZih0LmNvbnN0cnVjdG9yPT09T2JqZWN0KXtPYmplY3Qub2JzZXJ2ZSh0LHIpO2Zvcih2YXIgbyBpbiB0KW4uX2lzT2JzZXJ2YWJsZSh0W29dKSYmbi5faW50ZXJuYWxPYnNlcnZlKGVbIm5ldyJdKG8pLHRbb10pfWVsc2UgaWYodC5jb25zdHJ1Y3Rvcj09PUFycmF5KXtBcnJheS5vYnNlcnZlKHQscik7Zm9yKHZhciBpIGluIHQpaWYobi5faXNPYnNlcnZhYmxlKHRbaV0pKXt2YXIgcz1lWyJuZXciXShuZXcgdSh0W2ldLGkpKTtuLl9pbnRlcm5hbE9ic2VydmUocyx0W2ldKX19fX19LHtrZXk6Il9vbkNoYW5nZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztmb3IodmFyIHIgaW4gdCl7dmFyIG89dFtyXS5vYmplY3Qscz12b2lkIDA7aWYoby5jb25zdHJ1Y3Rvcj09PU9iamVjdCYmKHM9bC5PQkpFQ1QpLG8uY29uc3RydWN0b3I9PT1BcnJheSYmKHM9bC5BUlJBWSksInNwbGljZSI9PT10W3JdLnR5cGUpIWZ1bmN0aW9uKCl7dmFyIGE9dFtyXS5pbmRleCxsPWVbIm5ldyJdKCIiK2EpLGY9bC50b1N0cmluZygpLGQ9dFtyXS5yZW1vdmVkLmxlbmd0aDtpZigwIT09ZCl7dmFyIHA9dFtyXS5yZW1vdmVkO3AuZm9yRWFjaChmdW5jdGlvbih0LHIpe24uX2lzT2JzZXJ2YWJsZSh0KSYmZS5yZW1vdmVJbmRleChhK3IpfSksbi5fZmlyZUV2ZW50KHtjVHlwZTpjLlJFTU9WRSxvVHlwZTpzLGZpZWxkOmYsZGF0YTpkfSl9dmFyIGI9dFtyXS5hZGRlZENvdW50O2lmKDAhPT1iKXt2YXIgaD1vLnNsaWNlKGEsYStiKTtoLmZvckVhY2goZnVuY3Rpb24odCxyKXtpZihuLl9pc09ic2VydmFibGUodCkpe3ZhciBvPWVbIm5ldyJdKG5ldyB1KHQsYStyKSk7bi5faW50ZXJuYWxPYnNlcnZlKG8sdCl9fSksbi5fZmlyZUV2ZW50KHtjVHlwZTpjLkFERCxvVHlwZTpzLGZpZWxkOmYsZGF0YTooMCxpLmRlZXBDbG9uZSkoaCl9KX1hIT09by5sZW5ndGgtMSYmZS5yZUluZGV4RnJvbShvKX0oKTtlbHNle3ZhciBhPWVbIm5ldyJdKHRbcl0ubmFtZSksZj1hLnRvU3RyaW5nKCk7aWYoLTEhPT1mLmluZGV4T2YoIlN5bWJvbCIpKWNvbnRpbnVlO3ZhciBkPW9bdFtyXS5uYW1lXTsidXBkYXRlIj09PXRbcl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpjLlVQREFURSxvVHlwZTpzLGZpZWxkOmYsZGF0YTooMCxpLmRlZXBDbG9uZSkoZCl9KSwiYWRkIj09PXRbcl0udHlwZSYmKHRoaXMuX2ludGVybmFsT2JzZXJ2ZShhLGQpLHRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yy5BREQsb1R5cGU6cyxmaWVsZDpmLGRhdGE6KDAsaS5kZWVwQ2xvbmUpKGQpfSkpLCJkZWxldGUiPT09dFtyXS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmMuUkVNT1ZFLG9UeXBlOnMsZmllbGQ6Zn0pfX19fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX19XSksZX0oKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKSx0aGlzLl9wYXRoPVtdLHRoaXMuX29ic2VydmFibGVzPXt9fXJldHVybiBvKGUsW3trZXk6InJlbW92ZUluZGV4Iix2YWx1ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fb2JzZXJ2YWJsZXNbZV19fSx7a2V5OiJyZUluZGV4RnJvbSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyh0aGlzLl9vYnNlcnZhYmxlcykuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgcj10Ll9vYnNlcnZhYmxlc1tuXSxvPWUuaW5kZXhPZihyLm9iaik7ci5pZHghPW8mJihyLmlkeD1vLGRlbGV0ZSB0Ll9vYnNlcnZhYmxlc1tuXSx0Ll9vYnNlcnZhYmxlc1tvXT1yKX0pfX0se2tleToibmV3Iix2YWx1ZTpmdW5jdGlvbihlKXtlLmNvbnN0cnVjdG9yPT11JiYodGhpcy5fb2JzZXJ2YWJsZXNbZS5pZHhdPWUpO3ZhciB0PXRoaXMuY2xvbmUoKTtyZXR1cm4gdC5fcGF0aC5wdXNoKGUpLHR9fSx7a2V5OiJjbG9uZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZTtyZXR1cm4gdGhpcy5fcGF0aC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX3BhdGgucHVzaChlKX0pLHR9fSx7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0iIjtyZXR1cm4gdGhpcy5fcGF0aC5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7MD09PW4/ZT10LnRvU3RyaW5nKCk6ZSs9Ii4iK3QudG9TdHJpbmcoKX0pLGV9fV0pLGV9KCksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuKXtyKHRoaXMsZSksdGhpcy5vYmo9dCx0aGlzLmlkeD1ufXJldHVybiBvKGUsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkeC50b1N0cmluZygpfX1dKSxlfSgpLGM9bi5DaGFuZ2VUeXBlPXtVUERBVEU6InVwZGF0ZSIsQUREOiJhZGQiLFJFTU9WRToicmVtb3ZlIn0sbD1uLk9iamVjdFR5cGU9e09CSkVDVDoib2JqZWN0IixBUlJBWToiYXJyYXkifTtuWyJkZWZhdWx0Il09c30seyIuLi91dGlscy91dGlscy5qcyI6MTJ9XSwxMTpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCkscz1lKCIuL0RhdGFPYmplY3RSZXBvcnRlciIpLGE9cihzKSx1PWUoIi4vRGF0YU9iamVjdE9ic2VydmVyIiksYz1yKHUpLGw9ZSgiLi9EYXRhUHJvdmlzaW9uYWwiKSxmPXIobCksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIpe28odGhpcyxlKTt2YXIgaT10aGlzO2kuX293bmVyPXQsaS5fYnVzPW4saS5fc3ViVVJMPXIucnVudGltZVVSTCsiL3NtIixpLl9yZXBvcnRlcnM9e30saS5fb2JzZXJ2ZXJzPXt9LGkuX3Byb3Zpc2lvbmFscz17fSxuLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24oZSl7aWYoZS5mcm9tIT09dClzd2l0Y2goY29uc29sZS5sb2coIlN5bmNoZXItUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJmb3J3YXJkIjppLl9vbkZvcndhcmQoZSk7YnJlYWs7Y2FzZSJjcmVhdGUiOmkuX29uUmVtb3RlQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjppLl9vblJlbW90ZURlbGV0ZShlKX19KX1yZXR1cm4gaShlLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10aGlzLG89e3R5cGU6ImNyZWF0ZSIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUsdmFsdWU6bixhdXRob3Jpc2U6dH19O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0LGkpe3IuX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKG8pe2lmKGNvbnNvbGUubG9nKCJjcmVhdGUtcmVzcG9uc2U6ICIsbyksMjAwPT09by5ib2R5LmNvZGUpe3ZhciBzPW8uYm9keS5yZXNvdXJjZSx1PW5ldyBhWyJkZWZhdWx0Il0ocixzLGUsIm9uIixuLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyk7ci5fcmVwb3J0ZXJzW3NdPXUsdCh1KX1lbHNlIGkoby5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLHI9e3R5cGU6InN1YnNjcmliZSIsZnJvbTpuLl9vd25lcix0bzpuLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUscmVzb3VyY2U6dH19O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihvLGkpe24uX2J1cy5wb3N0TWVzc2FnZShyLGZ1bmN0aW9uKHIpe2NvbnNvbGUubG9nKCJzdWJzY3JpYmUtcmVzcG9uc2U6ICIscik7dmFyIHM9bi5fcHJvdmlzaW9uYWxzW3RdO2lmKGRlbGV0ZSBuLl9wcm92aXNpb25hbHNbdF0scyYmcy5fcmVsZWFzZUxpc3RlbmVycygpLHIuYm9keS5jb2RlPDIwMClzPW5ldyBmWyJkZWZhdWx0Il0obi5fb3duZXIsdCxuLl9idXMsci5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKSxuLl9wcm92aXNpb25hbHNbdF09cztlbHNlIGlmKDIwMD09PXIuYm9keS5jb2RlKXt2YXIgYT1uZXcgY1siZGVmYXVsdCJdKG4sdCxlLCJvbiIsci5ib2R5LnZhbHVlLHMuY2hpbGRyZW4sci5ib2R5LnZlcnNpb24pO24uX29ic2VydmVyc1t0XT1hLG8oYSkscy5hcHBseShhKX1lbHNlIGkoci5ib2R5LmRlc2MpfSl9KX19LHtrZXk6Im9uTm90aWZpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10Ll9yZXBvcnRlcnNbZS5ib2R5LnRvXTtuLl9vbkZvcndhcmQoZSl9fSx7a2V5OiJfb25SZW1vdGVDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmZyb20uc2xpY2UoMCwtMTMpLHI9e3R5cGU6ZS50eXBlLGZyb206ZS5ib2R5LnNvdXJjZSx1cmw6bixzY2hlbWE6ZS5ib2R5LnNjaGVtYSx2YWx1ZTplLmJvZHkudmFsdWUsaWRlbnRpdHk6ZS5ib2R5LmlkVG9rZW4sYWNrOmZ1bmN0aW9uKG4pe3ZhciByPTIwMDtuJiYocj1uKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpyfX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixyKSwKdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKHIpKX19LHtrZXk6Il9vblJlbW90ZURlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuYm9keS5yZXNvdXJjZSxyPXQuX29ic2VydmVyc1tuXTtpZihyKXt2YXIgbz17dHlwZTplLnR5cGUsdXJsOm4saWRlbnRpdHk6ZS5ib2R5LmlkVG9rZW4sYWNrOmZ1bmN0aW9uKG4pe3ZhciBvPTIwMDtuJiYobz1uKSwyMDA9PT1vJiZyWyJkZWxldGUiXSgpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm8sc291cmNlOnQuX293bmVyfX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixvKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobykpfWVsc2UgdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LHNvdXJjZTp0Ll9vd25lcn19KX19LHtrZXk6Im93bmVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3duZXJ9fSx7a2V5OiJyZXBvcnRlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXBvcnRlcnN9fSx7a2V5OiJvYnNlcnZlcnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYnNlcnZlcnN9fV0pLGV9KCk7blsiZGVmYXVsdCJdPWQsdC5leHBvcnRzPW5bImRlZmF1bHQiXX0seyIuL0RhdGFPYmplY3RPYnNlcnZlciI6NywiLi9EYXRhT2JqZWN0UmVwb3J0ZXIiOjgsIi4vRGF0YVByb3Zpc2lvbmFsIjo5fV0sMTI6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXt2YXIgdD0vKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naSxuPSIkMSwkMiwkMyIscj1lLnJlcGxhY2UodCxuKS5zcGxpdCgiLCIpO3JbMF09PT1lJiYoclswXT0iaHR0cHMiLHJbMV09ZSk7dmFyIG89e3R5cGU6clswXSxkb21haW46clsxXSxpZGVudGl0eTpyWzJdfTtyZXR1cm4gb31mdW5jdGlvbiBvKGUpe3JldHVybiBlP0pTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpOnZvaWQgMH1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksbi5kaXZpZGVVUkw9cixuLmRlZXBDbG9uZT1vfSx7fV19LHt9LFs0XSkoNCl9KTsKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dfSx7fSxbMV0pKDEpCn0pOw==",
      "sourceCodeClassname": "HelloWorldObserver",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10002,
    "type": "Hyperties",
    "version": "0.1",
    "description": "Description of HelloWorldObserver",
    "objectName": "HelloWorldObserver",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "HelloWorldReporter": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCJfX2VzTW9kdWxlIix7dmFsdWU6dHJ1ZX0pO3ZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fXJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTsgLyoganNoaW50IHVuZGVmOiB0cnVlICovZXhwb3J0cy5kZWZhdWx0PWFjdGl2YXRlO3ZhciBfU3luY2hlcj1yZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXInKTt2YXIgX3V0aWxzPXJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzJyk7dmFyIF9oZWxsbzI9cmVxdWlyZSgnLi9oZWxsbycpO3ZhciBfaGVsbG8zPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2hlbGxvMik7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O31mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsQ29uc3RydWN0b3Ipe2lmKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3Rvcikpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpO319IC8qKgoqIEh5cGVydHkgQ29ubmVjdG9yOwoqIEBhdXRob3IgUGF1bG8gQ2hhaW5obyBbcGF1bG8tZy1jaGFpbmhvQHRlbGVjb20ucHRdCiogQHZlcnNpb24gMC4xLjAKKi92YXIgSGVsbG9Xb3JsZFJlcG9ydGVyPWZ1bmN0aW9uKCl7IC8qKgogICogQ3JlYXRlIGEgbmV3IEhlbGxvV29ybGRSZXBvcnRlcgogICogQHBhcmFtICB7U3luY2hlcn0gc3luY2hlciAtIFN5bmNoZXIgcHJvdmlkZWQgZnJvbSB0aGUgcnVudGltZSBjb3JlCiAgKi9mdW5jdGlvbiBIZWxsb1dvcmxkUmVwb3J0ZXIoaHlwZXJ0eVVSTCxidXMsY29uZmlndXJhdGlvbil7X2NsYXNzQ2FsbENoZWNrKHRoaXMsSGVsbG9Xb3JsZFJlcG9ydGVyKTtpZighaHlwZXJ0eVVSTCl0aHJvdyBuZXcgRXJyb3IoJ1RoZSBoeXBlcnR5VVJMIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpO2lmKCFidXMpdGhyb3cgbmV3IEVycm9yKCdUaGUgTWluaUJ1cyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTtpZighY29uZmlndXJhdGlvbil0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWd1cmF0aW9uIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpO3ZhciBfdGhpcz10aGlzO190aGlzLl9kb21haW49KDAsX3V0aWxzLmRpdmlkZVVSTCkoaHlwZXJ0eVVSTCkuZG9tYWluO190aGlzLl9vYmplY3REZXNjVVJMPSdoeXBlcnR5LWNhdGFsb2d1ZTovLycrX3RoaXMuX2RvbWFpbisnLy53ZWxsLWtub3duL2RhdGFzY2hlbWFzL0hlbGxvV29ybGREYXRhU2NoZW1hJzt2YXIgc3luY2hlcj1uZXcgX1N5bmNoZXIuU3luY2hlcihoeXBlcnR5VVJMLGJ1cyxjb25maWd1cmF0aW9uKTtfdGhpcy5fc3luY2hlcj1zeW5jaGVyO30gLyoqCiAgKiBDcmVhdGUgSGVsbG9Xb3JsZCBEYXRhIE9iamVjdAogICogQHBhcmFtICB7SHlwZXJ0eVVSTH0gSHlwZXJ0eVVSTCAtIEludml0ZWQKICAqL19jcmVhdGVDbGFzcyhIZWxsb1dvcmxkUmVwb3J0ZXIsW3trZXk6J2hlbGxvJyx2YWx1ZTpmdW5jdGlvbiBoZWxsbyhoeXBlcnR5VVJMKXt2YXIgX3RoaXM9dGhpczt2YXIgc3luY2hlcj1fdGhpcy5fc3luY2hlcjtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3N5bmNoZXIuY3JlYXRlKF90aGlzLl9vYmplY3REZXNjVVJMLFtoeXBlcnR5VVJMXSxfaGVsbG8zLmRlZmF1bHQpLnRoZW4oZnVuY3Rpb24oaGVsbG9PYmp0UmVwb3J0ZXIpe2NvbnNvbGUuaW5mbygnMS4gUmV0dXJuIENyZWF0ZWQgSGVsbG8gV29ybGQgRGF0YSBPYmplY3QgUmVwb3J0ZXInLGhlbGxvT2JqdFJlcG9ydGVyKTtfdGhpcy5oZWxsb09ianRSZXBvcnRlcj1oZWxsb09ianRSZXBvcnRlcjtoZWxsb09ianRSZXBvcnRlci5vblN1YnNjcmlwdGlvbihmdW5jdGlvbihldmVudCl7Y29uc29sZS5pbmZvKCctLS0tLS0tLSBIZWxsbyBXb3JsZCBSZXBvcnRlciByZWNlaXZlZCBzdWJzY3JpcHRpb24gcmVxdWVzdCAtLS0tLS0tLS0gXG4nKTsgLy8gQWxsIHN1YnNjcmlwdGlvbiByZXF1ZXN0ZWQgYXJlIGFjY2VwdGVkCmV2ZW50LmFjY2VwdCgpO30pO3Jlc29sdmUoaGVsbG9PYmp0UmVwb3J0ZXIpO30pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7Y29uc29sZS5lcnJvcihyZWFzb24pO3JlamVjdChyZWFzb24pO30pO30pO30gLyoqCiAgKiBVcGRhdGUgSGVsbG9Xb3JsZCBEYXRhIE9iamVjdAogICoKICAqL30se2tleTonYnllJyx2YWx1ZTpmdW5jdGlvbiBieWUoKXt2YXIgX3RoaXM9dGhpcztjb25zb2xlLmxvZygnYnllOicsX3RoaXMuaGVsbG9PYmp0UmVwb3J0ZXIpO190aGlzLmhlbGxvT2JqdFJlcG9ydGVyLmRhdGEuaGVsbG89IkJ5ZSEhIjt9fV0pO3JldHVybiBIZWxsb1dvcmxkUmVwb3J0ZXI7fSgpO2Z1bmN0aW9uIGFjdGl2YXRlKGh5cGVydHlVUkwsYnVzLGNvbmZpZ3VyYXRpb24pe3JldHVybiB7bmFtZTonSGVsbG9Xb3JsZFJlcG9ydGVyJyxpbnN0YW5jZTpuZXcgSGVsbG9Xb3JsZFJlcG9ydGVyKGh5cGVydHlVUkwsYnVzLGNvbmZpZ3VyYXRpb24pfTt9bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uL3V0aWxzL3V0aWxzIjozLCIuL2hlbGxvIjoyLCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXIiOjR9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCJfX2VzTW9kdWxlIix7dmFsdWU6dHJ1ZX0pO3ZhciBoZWxsbz17bmFtZToiaGVsbG8iLGhlbGxvOiJIZWxsbyBXb3JsZCEhIn07ZXhwb3J0cy5kZWZhdWx0PWhlbGxvO21vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5kaXZpZGVVUkw9ZGl2aWRlVVJMO2V4cG9ydHMuZGVlcENsb25lPWRlZXBDbG9uZTtleHBvcnRzLmdldENvbmZpZz1nZXRDb25maWc7ZXhwb3J0cy5nZXRVc2VyTWVkaWE9Z2V0VXNlck1lZGlhO2V4cG9ydHMuc2VyaWFsaXplPXNlcmlhbGl6ZTtleHBvcnRzLmdldFRlbXBsYXRlPWdldFRlbXBsYXRlOyAvKioKICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqKi8gLy8ganNoaW50IGJyb3dzZXI6dHJ1ZSwganF1ZXJ5OiB0cnVlCi8vIGpzaGludCB2YXJzdG10OiB0cnVlCi8qIGdsb2JhbCBIYW5kbGViYXJzICovIC8qKgogKiBTdXBwb3J0IG1vZHVsZSB3aXRoIHNvbWUgZnVuY3Rpb25zIHdpbGwgYmUgdXNlZnVsCiAqIEBtb2R1bGUgdXRpbHMKICovIC8qKgogKiBAdHlwZWRlZiBkaXZpZGVVUkwKICogQHR5cGUgT2JqZWN0CiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBlIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZGVudGl0eSBUaGUgaWRlbnRpdHkgb2YgVVJMCiAqLyAvKioKICogRGl2aWRlIGFuIHVybCBpbiB0eXBlLCBkb21haW4gYW5kIGlkZW50aXR5CiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzCiAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwKICovZnVuY3Rpb24gZGl2aWRlVVJMKHVybCl7IC8vIGxldCByZSA9IC8oW2EtekEtWi1dKik/OlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9XC5bYS16XXsyLDZ9XGIpKihcL1tcL1xkXHdcLi1dKikqKD86W1w/XSkqKC4rKSovZ2k7CnZhciByZT0vKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naTt2YXIgc3Vic3Q9JyQxLCQyLCQzJzt2YXIgcGFydHM9dXJsLnJlcGxhY2UocmUsc3Vic3QpLnNwbGl0KCcsJyk7IC8vIElmIHRoZSB1cmwgaGFzIG5vIHByb3RvY29sLCB0aGUgZGVmYXVsdCBwcm90b2NvbCBzZXQgaXMgaHR0cHMKaWYocGFydHNbMF09PT11cmwpe3BhcnRzWzBdPSdodHRwcyc7cGFydHNbMV09dXJsO312YXIgcmVzdWx0PXt0eXBlOnBhcnRzWzBdLGRvbWFpbjpwYXJ0c1sxXSxpZGVudGl0eTpwYXJ0c1syXX07cmV0dXJuIHJlc3VsdDt9IC8qKgogKiBNYWtlIGEgQ09QWSBvZiB0aGUgb3JpZ2luYWwgZGF0YQogKiBAcGFyYW0gIHtPYmplY3R9ICBvYmogLSBvYmplY3QgdG8gYmUgY2xvbmVkCiAqIEByZXR1cm4ge09iamVjdH0KICovZnVuY3Rpb24gZGVlcENsb25lKG9iail7IC8vVE9ETzogc2ltcGxlIGJ1dCBpbmVmZmljaWVudCBKU09OIGRlZXAgY2xvbmUuLi4KaWYob2JqKXJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO30gLyoqCiAqIEdldCB0aGUgY29uZmlndXJhdGlvbiBmcm9tIGFuIGpzb24gZmlsZTsKICogQHBhcmFtICB7SlNPTk9iamVjdH0ganNvbkZpbGUKICogQHJldHVybiB7b2JqZWN0fQogKi9mdW5jdGlvbiBnZXRDb25maWcoSlNPTk9iamVjdCl7Y29uc29sZS5sb2coJ2RldmVsb3BtZW50Jyk7cmV0dXJuIEpTT05PYmplY3RbJ2RldmVsb3BtZW50J107fSAvKioKICogR2V0IFdlYlJUQyBBUEkgcmVzb3VyY2VzCiAqIEBwYXJhbSAge09iamVjdH0gICAgIG9wdGlvbnMgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGluZm9ybWF0aW9uIHRoYXQgcmVzb3VyY2VzIHdpbGwgYmUgdXNlZCAoY2FtZXJhLCBtaWMsIHJlc29sdXRpb24sIGV0Yyk7CiAqIEByZXR1cm4ge1Byb21pc2V9CiAqL2Z1bmN0aW9uIGdldFVzZXJNZWRpYShjb25zdHJhaW50cyl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihmdW5jdGlvbihtZWRpYVN0cmVhbSl7cmVzb2x2ZShtZWRpYVN0cmVhbSk7fSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtyZWplY3QocmVhc29uKTt9KTt9KTt9ZnVuY3Rpb24gc2VyaWFsaXplKCl7JC5mbi5zZXJpYWxpemVPYmplY3Q9ZnVuY3Rpb24oKXt2YXIgbz17fTt2YXIgYT10aGlzLnNlcmlhbGl6ZUFycmF5KCk7JC5lYWNoKGEsZnVuY3Rpb24oKXtpZihvW3RoaXMubmFtZV0hPT11bmRlZmluZWQpe2lmKCFvW3RoaXMubmFtZV0ucHVzaCl7b1t0aGlzLm5hbWVdPVtvW3RoaXMubmFtZV1dO31vW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlfHwnJyk7fWVsc2Uge29bdGhpcy5uYW1lXT10aGlzLnZhbHVlfHwnJzt9fSk7cmV0dXJuIG87fTskLmZuLnNlcmlhbGl6ZU9iamVjdEFycmF5PWZ1bmN0aW9uKCl7dmFyIG89e307dmFyIGE9dGhpcy5zZXJpYWxpemVBcnJheSgpOyQuZWFjaChhLGZ1bmN0aW9uKCl7aWYob1t0aGlzLm5hbWVdIT09dW5kZWZpbmVkKXtpZighb1t0aGlzLm5hbWVdLnB1c2gpe29bdGhpcy5uYW1lXT1bb1t0aGlzLm5hbWVdXTt9b1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZXx8JycpO31lbHNlIHtpZighb1t0aGlzLm5hbWVdKW9bdGhpcy5uYW1lXT1bXTtvW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlfHwnJyk7fX0pO3JldHVybiBvO307fWZ1bmN0aW9uIGdldFRlbXBsYXRlKHBhdGgsc2NyaXB0KXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe2lmKEhhbmRsZWJhcnMudGVtcGxhdGVzPT09dW5kZWZpbmVkfHxIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXT09PXVuZGVmaW5lZCl7SGFuZGxlYmFycy50ZW1wbGF0ZXM9e307fWVsc2Uge3Jlc29sdmUoSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0pO312YXIgdGVtcGxhdGVGaWxlPSQuYWpheCh7dXJsOnBhdGgrJy5oYnMnLHN1Y2Nlc3M6ZnVuY3Rpb24gc3VjY2VzcyhkYXRhKXtIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXT1IYW5kbGViYXJzLmNvbXBpbGUoZGF0YSk7fSxmYWlsOmZ1bmN0aW9uIGZhaWwocmVhc29uKXtyZXR1cm4gcmVhc29uO319KTt2YXIgc2NyaXB0RmlsZT0kLmdldFNjcmlwdChzY3JpcHQpO3ZhciByZXF1ZXN0cz1bXTtpZihwYXRoKXJlcXVlc3RzLnB1c2godGVtcGxhdGVGaWxlKTtpZihzY3JpcHQpcmVxdWVzdHMucHVzaChzY3JpcHRGaWxlKTtQcm9taXNlLmFsbChyZXF1ZXN0cykudGhlbihmdW5jdGlvbihyZXN1bHQpe3Jlc29sdmUoSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0pO30pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7cmVqZWN0KHJlYXNvbik7fSk7fSk7fQoKfSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3IgU3luY2hlci5qcyAKLy8gdmVyc2lvbjogMC4yLjAKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5TeW5jaGVyPWUoKX19KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIG8ocyxhKXtpZighbltzXSl7aWYoIXRbc10pe3ZhciB1PSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFhJiZ1KXJldHVybiB1KHMsITApO2lmKGkpcmV0dXJuIGkocywhMCk7dmFyIGM9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrcysiJyIpO3Rocm93IGMuY29kZT0iTU9EVUxFX05PVF9GT1VORCIsY312YXIgbD1uW3NdPXtleHBvcnRzOnt9fTt0W3NdWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbc11bMV1bZV07cmV0dXJuIG8obj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltzXS5leHBvcnRzfWZvcih2YXIgaT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxzPTA7czxyLmxlbmd0aDtzKyspbyhyW3NdKTtyZXR1cm4gb30oezE6W2Z1bmN0aW9uKGUsdCxuKXtPYmplY3Qub2JzZXJ2ZSYmIUFycmF5Lm9ic2VydmUmJmZ1bmN0aW9uKGUsdCl7InVzZSBzdHJpY3QiO3ZhciBuPWUuZ2V0Tm90aWZpZXIscj0icGVyZm9ybUNoYW5nZSIsbz0iX29yaWdpbmFsIixpPSJzcGxpY2UiLHM9e3B1c2g6ZnVuY3Rpb24gdShlKXt2YXIgdD1hcmd1bWVudHMscz11W29dLmFwcGx5KHRoaXMsdCk7cmV0dXJuIG4odGhpcylbcl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDpzLXQubGVuZ3RoLGFkZGVkQ291bnQ6dC5sZW5ndGgscmVtb3ZlZDpbXX19KSxzfSx1bnNoaWZ0OmZ1bmN0aW9uIGMoZSl7dmFyIHQ9YXJndW1lbnRzLHM9Y1tvXS5hcHBseSh0aGlzLHQpO3JldHVybiBuKHRoaXMpW3JdKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6MCxhZGRlZENvdW50OnQubGVuZ3RoLHJlbW92ZWQ6W119fSksc30scG9wOmZ1bmN0aW9uIGwoKXt2YXIgZT10aGlzLmxlbmd0aCx0PWxbb10uY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5sZW5ndGghPT1lJiZuKHRoaXMpW3JdKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6dGhpcy5sZW5ndGgsYWRkZWRDb3VudDowLHJlbW92ZWQ6W3RdfX0sdGhpcyksdH0sc2hpZnQ6ZnVuY3Rpb24gZigpe3ZhciBlPXRoaXMubGVuZ3RoLHQ9ZltvXS5jYWxsKHRoaXMpO3JldHVybiB0aGlzLmxlbmd0aCE9PWUmJm4odGhpcylbcl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDowLGFkZGVkQ291bnQ6MCxyZW1vdmVkOlt0XX19LHRoaXMpLHR9LHNwbGljZTpmdW5jdGlvbiBkKGUsdCl7dmFyIHM9YXJndW1lbnRzLGE9ZFtvXS5hcHBseSh0aGlzLHMpO3JldHVybihhLmxlbmd0aHx8cy5sZW5ndGg+MikmJm4odGhpcylbcl0oaSxmdW5jdGlvbigpe3JldHVybntpbmRleDplLGFkZGVkQ291bnQ6cy5sZW5ndGgtMixyZW1vdmVkOmF9fSx0aGlzKSxhfX07Zm9yKHZhciBhIGluIHMpc1thXVtvXT10LnByb3RvdHlwZVthXSx0LnByb3RvdHlwZVthXT1zW2FdO3Qub2JzZXJ2ZT1mdW5jdGlvbih0LG4pe3JldHVybiBlLm9ic2VydmUodCxuLFsiYWRkIiwidXBkYXRlIiwiZGVsZXRlIixpXSl9LHQudW5vYnNlcnZlPWUudW5vYnNlcnZlfShPYmplY3QsQXJyYXkpfSx7fV0sMjpbZnVuY3Rpb24oZSx0LG4pe3dpbmRvdy5NdXRhdGlvbk9ic2VydmVyPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcnx8ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt0aGlzLmc9W10sdGhpcy5rPWV9ZnVuY3Rpb24gbihlKXshZnVuY3Rpb24gbigpe3ZhciByPWUudGFrZVJlY29yZHMoKTtyLmxlbmd0aCYmZS5rKHIsZSksZS5mPXNldFRpbWVvdXQobix0Ll9wZXJpb2QpfSgpfWZ1bmN0aW9uIHIodCl7dmFyIG4scj17dHlwZTpudWxsLHRhcmdldDpudWxsLGFkZGVkTm9kZXM6W10scmVtb3ZlZE5vZGVzOltdLHByZXZpb3VzU2libGluZzpudWxsLG5leHRTaWJsaW5nOm51bGwsYXR0cmlidXRlTmFtZTpudWxsLGF0dHJpYnV0ZU5hbWVzcGFjZTpudWxsLG9sZFZhbHVlOm51bGx9O2ZvcihuIGluIHQpcltuXSE9PWUmJnRbbl0hPT1lJiYocltuXT10W25dKTtyZXR1cm4gcn1mdW5jdGlvbiBvKGUsdCl7dmFyIG49YShlLHQpO3JldHVybiBmdW5jdGlvbihyKXt2YXIgbyx1PXIubGVuZ3RoO3QuYSYmbi5hJiZpKHIsZSxuLmEsdC5kKSwodC5ifHx0LmUpJiYobz1zKHIsZSxuLHQpKSwob3x8ci5sZW5ndGghPT11KSYmKG49YShlLHQpKX19ZnVuY3Rpb24gaSh0LG4sbyxpKXtmb3IodmFyIHMsYSx1PXt9LGM9bi5hdHRyaWJ1dGVzLGw9Yy5sZW5ndGg7bC0tOylzPWNbbF0sYT1zLm5hbWUsaSYmaVthXT09PWV8fChzLnZhbHVlIT09b1thXSYmdC5wdXNoKHIoe3R5cGU6ImF0dHJpYnV0ZXMiLHRhcmdldDpuLGF0dHJpYnV0ZU5hbWU6YSxvbGRWYWx1ZTpvW2FdLGF0dHJpYnV0ZU5hbWVzcGFjZTpzLm5hbWVzcGFjZVVSSX0pKSx1W2FdPSEwKTtmb3IoYSBpbiBvKXVbYV18fHQucHVzaChyKHt0YXJnZXQ6bix0eXBlOiJhdHRyaWJ1dGVzIixhdHRyaWJ1dGVOYW1lOmEsb2xkVmFsdWU6b1thXX0pKX1mdW5jdGlvbiBzKHQsbixvLHMpe2Z1bmN0aW9uIGEoZSxuLG8sYSx1KXt2YXIgbD1lLmxlbmd0aC0xO3U9LX4oKGwtdSkvMik7Zm9yKHZhciBmLGQscDtwPWUucG9wKCk7KWY9b1twLmhdLGQ9YVtwLmldLHMuYiYmdSYmTWF0aC5hYnMocC5oLXAuaSk+PWwmJih0LnB1c2gocih7dHlwZToiY2hpbGRMaXN0Iix0YXJnZXQ6bixhZGRlZE5vZGVzOltmXSxyZW1vdmVkTm9kZXM6W2ZdLG5leHRTaWJsaW5nOmYubmV4dFNpYmxpbmcscHJldmlvdXNTaWJsaW5nOmYucHJldmlvdXNTaWJsaW5nfSkpLHUtLSkscy5hJiZkLmEmJmkodCxmLGQuYSxzLmQpLHMuYyYmMz09PWYubm9kZVR5cGUmJmYubm9kZVZhbHVlIT09ZC5jJiZ0LnB1c2gocih7dHlwZToiY2hhcmFjdGVyRGF0YSIsdGFyZ2V0OmZ9KSkscy5lJiZjKGYsZCl9ZnVuY3Rpb24gYyhuLG8pe2Zvcih2YXIgZCxwLGIsaCx2LHk9bi5jaGlsZE5vZGVzLF89by5iLGc9eS5sZW5ndGgsTz1fP18ubGVuZ3RoOjAsaj0wLG09MCx3PTA7Zz5tfHxPPnc7KWg9eVttXSx2PShiPV9bd10pJiZiLmosaD09PXY/KHMuYSYmYi5hJiZpKHQsaCxiLmEscy5kKSxzLmMmJmIuYyE9PWUmJmgubm9kZVZhbHVlIT09Yi5jJiZ0LnB1c2gocih7dHlwZToiY2hhcmFjdGVyRGF0YSIsdGFyZ2V0Omh9KSkscCYmYShwLG4seSxfLGopLHMuZSYmKGguY2hpbGROb2Rlcy5sZW5ndGh8fGIuYiYmYi5iLmxlbmd0aCkmJmMoaCxiKSxtKyssdysrKToobD0hMCxkfHwoZD17fSxwPVtdKSxoJiYoZFtiPXUoaCldfHwoZFtiXT0hMCwtMT09PShiPWYoXyxoLHcsImoiKSk/cy5iJiYodC5wdXNoKHIoe3R5cGU6ImNoaWxkTGlzdCIsdGFyZ2V0Om4sYWRkZWROb2RlczpbaF0sbmV4dFNpYmxpbmc6aC5uZXh0U2libGluZyxwcmV2aW91c1NpYmxpbmc6aC5wcmV2aW91c1NpYmxpbmd9KSksaisrKTpwLnB1c2goe2g6bSxpOmJ9KSksbSsrKSx2JiZ2IT09eVttXSYmKGRbYj11KHYpXXx8KGRbYl09ITAsLTE9PT0oYj1mKHksdixtKSk/cy5iJiYodC5wdXNoKHIoe3R5cGU6ImNoaWxkTGlzdCIsdGFyZ2V0Om8uaixyZW1vdmVkTm9kZXM6W3ZdLG5leHRTaWJsaW5nOl9bdysxXSxwcmV2aW91c1NpYmxpbmc6X1t3LTFdfSkpLGotLSk6cC5wdXNoKHtoOmIsaTp3fSkpLHcrKykpO3AmJmEocCxuLHksXyxqKX12YXIgbDtyZXR1cm4gYyhuLG8pLGx9ZnVuY3Rpb24gYShlLHQpe3ZhciBuPSEwO3JldHVybiBmdW5jdGlvbiByKGUpe3ZhciBvPXtqOmV9O3JldHVybiF0LmN8fDMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZT8odC5hJiZuJiYxPT09ZS5ub2RlVHlwZSYmKG8uYT1sKGUuYXR0cmlidXRlcyxmdW5jdGlvbihlLG4pe3JldHVybiB0LmQmJiF0LmRbbi5uYW1lXXx8KGVbbi5uYW1lXT1uLnZhbHVlKSxlfSkpLG4mJih0LmJ8fHQuY3x8dC5hJiZ0LmUpJiYoby5iPWMoZS5jaGlsZE5vZGVzLHIpKSxuPXQuZSk6by5jPWUubm9kZVZhbHVlLG99KGUpfWZ1bmN0aW9uIHUoZSl7dHJ5e3JldHVybiBlLmlkfHwoZS5tb19pZD1lLm1vX2lkfHxkKyspfWNhdGNoKHQpe3RyeXtyZXR1cm4gZS5ub2RlVmFsdWV9Y2F0Y2gobil7cmV0dXJuIGQrK319fWZ1bmN0aW9uIGMoZSx0KXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7cisrKW5bcl09dChlW3JdLHIsZSk7cmV0dXJuIG59ZnVuY3Rpb24gbChlLHQpe2Zvcih2YXIgbj17fSxyPTA7cjxlLmxlbmd0aDtyKyspbj10KG4sZVtyXSxyLGUpO3JldHVybiBufWZ1bmN0aW9uIGYoZSx0LG4scil7Zm9yKDtuPGUubGVuZ3RoO24rKylpZigocj9lW25dW3JdOmVbbl0pPT09dClyZXR1cm4gbjtyZXR1cm4tMX10Ll9wZXJpb2Q9MzAsdC5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9e2E6ISEodC5hdHRyaWJ1dGVzfHx0LmF0dHJpYnV0ZUZpbHRlcnx8dC5hdHRyaWJ1dGVPbGRWYWx1ZSksYjohIXQuY2hpbGRMaXN0LGU6ISF0LnN1YnRyZWUsYzohKCF0LmNoYXJhY3RlckRhdGEmJiF0LmNoYXJhY3RlckRhdGFPbGRWYWx1ZSl9LGk9dGhpcy5nLHM9MDtzPGkubGVuZ3RoO3MrKylpW3NdLm09PT1lJiZpLnNwbGljZShzLDEpO3QuYXR0cmlidXRlRmlsdGVyJiYoci5kPWwodC5hdHRyaWJ1dGVGaWx0ZXIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gZVt0XT0hMCxlfSkpLGkucHVzaCh7bTplLGw6byhlLHIpfSksdGhpcy5mfHxuKHRoaXMpfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PXRoaXMuZyxuPTA7bjx0Lmxlbmd0aDtuKyspdFtuXS5sKGUpO3JldHVybiBlfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5nPVtdLGNsZWFyVGltZW91dCh0aGlzLmYpLHRoaXMuZj1udWxsfX07dmFyIGQ9MTtyZXR1cm4gdH0odm9pZCAwKX0se31dLDM6W2Z1bmN0aW9uKGUsdCxuKXtPYmplY3Qub2JzZXJ2ZXx8ZnVuY3Rpb24oZSx0LG4scil7InVzZSBzdHJpY3QiO3ZhciBvLGkscz1bImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsInJlY29uZmlndXJlIiwic2V0UHJvdG90eXBlIiwicHJldmVudEV4dGVuc2lvbnMiXSxhPXQuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1lLmNhbGwodCl9fShlLnByb3RvdHlwZS50b1N0cmluZyksdT10LnByb3RvdHlwZS5pbmRleE9mP3QuaW5kZXhPZnx8ZnVuY3Rpb24oZSxuLHIpe3JldHVybiB0LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSxuLHIpfTpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPW58fDA7cjxlLmxlbmd0aDtyKyspaWYoZVtyXT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9LGM9bi5NYXAhPT1yJiZNYXAucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE1hcH06ZnVuY3Rpb24oKXt2YXIgZT1bXSx0PVtdO3JldHVybntzaXplOjAsaGFzOmZ1bmN0aW9uKHQpe3JldHVybiB1KGUsdCk+LTF9LGdldDpmdW5jdGlvbihuKXtyZXR1cm4gdFt1KGUsbildfSxzZXQ6ZnVuY3Rpb24obixyKXt2YXIgbz11KGUsbik7LTE9PT1vPyhlLnB1c2gobiksdC5wdXNoKHIpLHRoaXMuc2l6ZSsrKTp0W29dPXJ9LCJkZWxldGUiOmZ1bmN0aW9uKG4pe3ZhciByPXUoZSxuKTtyPi0xJiYoZS5zcGxpY2UociwxKSx0LnNwbGljZShyLDEpLHRoaXMuc2l6ZS0tKX0sZm9yRWFjaDpmdW5jdGlvbihuKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyluLmNhbGwoYXJndW1lbnRzWzFdLHRbcl0sZVtyXSx0aGlzKX19fSxsPWUuZ2V0T3duUHJvcGVydHlOYW1lcz9mdW5jdGlvbigpe3ZhciB0PWUuZ2V0T3duUHJvcGVydHlOYW1lczt0cnl7YXJndW1lbnRzLmNhbGxlZX1jYXRjaChuKXt2YXIgcj0odCh1KS5qb2luKCIgIikrIiAiKS5yZXBsYWNlKC9wcm90b3R5cGUgfGxlbmd0aCB8bmFtZSAvZywiIikuc2xpY2UoMCwtMSkuc3BsaXQoIiAiKTtyLmxlbmd0aCYmKHQ9ZnVuY3Rpb24odCl7dmFyIG49ZS5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0KWZvcih2YXIgbyxpPTA7aTxyLmxlbmd0aDspKG89dShuLHJbaSsrXSkpPi0xJiZuLnNwbGljZShvLDEpO3JldHVybiBufSl9cmV0dXJuIHR9KCk6ZnVuY3Rpb24odCl7dmFyIG4scixvPVtdO2lmKCJoYXNPd25Qcm9wZXJ0eSJpbiB0KWZvcihuIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShuKSYmby5wdXNoKG4pO2Vsc2V7cj1lLmhhc093blByb3BlcnR5O2ZvcihuIGluIHQpci5jYWxsKHQsbikmJm8ucHVzaChuKX1yZXR1cm4gYSh0KSYmby5wdXNoKCJsZW5ndGgiKSxvfSxmPWUuZ2V0UHJvdG90eXBlT2YsZD1lLmRlZmluZVByb3BlcnRpZXMmJmUuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHA9bi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fG4ud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbigpe3ZhciBlPStuZXcgRGF0ZSx0PWU7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bigodD0rbmV3IERhdGUpLWUpfSwxNyl9fSgpLGI9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPW8uZ2V0KGUpO3I/KHYocixlKSxPKGUscix0LG4pKToocj1oKGUpLE8oZSxyLHQsbiksMT09PW8uc2l6ZSYmcCh5KSl9LGg9ZnVuY3Rpb24odCxuKXt2YXIgcixpPWwodCkscz1bXSxhPTAsbj17aGFuZGxlcnM6YygpLGZyb3plbjplLmlzRnJvemVuP2UuaXNGcm96ZW4odCk6ITEsZXh0ZW5zaWJsZTplLmlzRXh0ZW5zaWJsZT9lLmlzRXh0ZW5zaWJsZSh0KTohMCxwcm90bzpmJiZmKHQpLHByb3BlcnRpZXM6aSx2YWx1ZXM6cyxub3RpZmllcjpnKHQsbil9O2lmKGQpZm9yKHI9bi5kZXNjcmlwdG9ycz1bXTthPGkubGVuZ3RoOylyW2FdPWQodCxpW2FdKSxzW2FdPXRbaVthKytdXTtlbHNlIGZvcig7YTxpLmxlbmd0aDspc1thXT10W2lbYSsrXV07cmV0dXJuIG8uc2V0KHQsbiksbn0sdj1mdW5jdGlvbigpe3ZhciB0PWQ/ZnVuY3Rpb24oZSx0LG4scixvKXt2YXIgaT10LnByb3BlcnRpZXNbbl0scz1lW2ldLGE9dC52YWx1ZXNbbl0sdT10LmRlc2NyaXB0b3JzW25dOyJ2YWx1ZSJpbiBvJiYoYT09PXM/MD09PWEmJjEvYSE9PTEvczphPT09YXx8cz09PXMpJiYoaihlLHQse25hbWU6aSx0eXBlOiJ1cGRhdGUiLG9iamVjdDplLG9sZFZhbHVlOmF9LHIpLHQudmFsdWVzW25dPXMpLCF1LmNvbmZpZ3VyYWJsZXx8by5jb25maWd1cmFibGUmJm8ud3JpdGFibGU9PT11LndyaXRhYmxlJiZvLmVudW1lcmFibGU9PT11LmVudW1lcmFibGUmJm8uZ2V0PT09dS5nZXQmJm8uc2V0PT09dS5zZXR8fChqKGUsdCx7bmFtZTppLHR5cGU6InJlY29uZmlndXJlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxyKSx0LmRlc2NyaXB0b3JzW25dPW8pfTpmdW5jdGlvbihlLHQsbixyKXt2YXIgbz10LnByb3BlcnRpZXNbbl0saT1lW29dLHM9dC52YWx1ZXNbbl07KHM9PT1pPzA9PT1zJiYxL3MhPT0xL2k6cz09PXN8fGk9PT1pKSYmKGooZSx0LHtuYW1lOm8sdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpzfSxyKSx0LnZhbHVlc1tuXT1pKX0sbj1kP2Z1bmN0aW9uKGUsbixyLG8saSl7Zm9yKHZhciBzLGE9bi5sZW5ndGg7ciYmYS0tOyludWxsIT09blthXSYmKHM9ZChlLG5bYV0pLHItLSxzP3QoZSxvLGEsaSxzKTooaihlLG8se25hbWU6blthXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOm8udmFsdWVzW2FdfSxpKSxvLnByb3BlcnRpZXMuc3BsaWNlKGEsMSksby52YWx1ZXMuc3BsaWNlKGEsMSksby5kZXNjcmlwdG9ycy5zcGxpY2UoYSwxKSkpfTpmdW5jdGlvbihlLHQsbixyLG8pe2Zvcih2YXIgaT10Lmxlbmd0aDtuJiZpLS07KW51bGwhPT10W2ldJiYoaihlLHIse25hbWU6dFtpXSx0eXBlOiJkZWxldGUiLG9iamVjdDplLG9sZFZhbHVlOnIudmFsdWVzW2ldfSxvKSxyLnByb3BlcnRpZXMuc3BsaWNlKGksMSksci52YWx1ZXMuc3BsaWNlKGksMSksbi0tKX07cmV0dXJuIGZ1bmN0aW9uKHIsbyxpKXtpZihyLmhhbmRsZXJzLnNpemUmJiFyLmZyb3plbil7dmFyIHMsYSxjLHAsYixoLHYseSxfPXIudmFsdWVzLGc9ci5kZXNjcmlwdG9ycyxPPTA7aWYoci5leHRlbnNpYmxlKWlmKHM9ci5wcm9wZXJ0aWVzLnNsaWNlKCksYT1zLmxlbmd0aCxjPWwobyksZyl7Zm9yKDtPPGMubGVuZ3RoOyliPWNbTysrXSxwPXUocyxiKSx5PWQobyxiKSwtMT09PXA/KGoobyxyLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksci5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKG9bYl0pLGcucHVzaCh5KSk6KHNbcF09bnVsbCxhLS0sdChvLHIscCxpLHkpKTtuKG8scyxhLHIsaSksZS5pc0V4dGVuc2libGUobyl8fChyLmV4dGVuc2libGU9ITEsaihvLHIse3R5cGU6InByZXZlbnRFeHRlbnNpb25zIixvYmplY3Q6b30saSksci5mcm96ZW49ZS5pc0Zyb3plbihvKSl9ZWxzZXtmb3IoO088Yy5sZW5ndGg7KWI9Y1tPKytdLHA9dShzLGIpLGg9b1tiXSwtMT09PXA/KGoobyxyLHtuYW1lOmIsdHlwZToiYWRkIixvYmplY3Q6b30saSksci5wcm9wZXJ0aWVzLnB1c2goYiksXy5wdXNoKGgpKTooc1twXT1udWxsLGEtLSx0KG8scixwLGkpKTtuKG8scyxhLHIsaSl9ZWxzZSBpZighci5mcm96ZW4pe2Zvcig7TzxzLmxlbmd0aDtPKyspYj1zW09dLHQobyxyLE8saSxkKG8sYikpO2UuaXNGcm96ZW4obykmJihyLmZyb3plbj0hMCl9ZiYmKHY9ZihvKSx2IT09ci5wcm90byYmKGoobyxyLHt0eXBlOiJzZXRQcm90b3R5cGUiLG5hbWU6Il9fcHJvdG9fXyIsb2JqZWN0Om8sb2xkVmFsdWU6ci5wcm90b30pLHIucHJvdG89dikpfX19KCkseT1mdW5jdGlvbigpe28uc2l6ZSYmKG8uZm9yRWFjaCh2KSxpLmZvckVhY2goXykscCh5KSl9LF89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNoYW5nZVJlY29yZHM7bi5sZW5ndGgmJihlLmNoYW5nZVJlY29yZHM9W10sdChuKSl9LGc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyJiYodD1vLmdldChlKSksdCYmdC5ub3RpZmllcnx8e25vdGlmeTpmdW5jdGlvbih0KXt0LnR5cGU7dmFyIG49by5nZXQoZSk7aWYobil7dmFyIHIsaT17b2JqZWN0OmV9O2ZvcihyIGluIHQpIm9iamVjdCIhPT1yJiYoaVtyXT10W3JdKTtqKGUsbixpKX19LHBlcmZvcm1DaGFuZ2U6ZnVuY3Rpb24odCxuKXtpZigic3RyaW5nIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBub24tc3RyaW5nIGNoYW5nZVR5cGUiKTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygbil0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgcGVyZm9ybSBub24tZnVuY3Rpb24iKTt2YXIgaSxzLGE9by5nZXQoZSksdT1hcmd1bWVudHNbMl0sYz11PT09cj9uKCk6bi5jYWxsKHUpO2lmKGEmJnYoYSxlLHQpLGEmJmMmJiJvYmplY3QiPT10eXBlb2YgYyl7cz17b2JqZWN0OmUsdHlwZTp0fTtmb3IoaSBpbiBjKSJvYmplY3QiIT09aSYmInR5cGUiIT09aSYmKHNbaV09Y1tpXSk7aihlLGEscyl9fX19LE89ZnVuY3Rpb24oZSx0LG4scil7dmFyIG89aS5nZXQobik7b3x8aS5zZXQobixvPXtvYnNlcnZlZDpjKCksY2hhbmdlUmVjb3JkczpbXX0pLG8ub2JzZXJ2ZWQuc2V0KGUse2FjY2VwdExpc3Q6ci5zbGljZSgpLGRhdGE6dH0pLHQuaGFuZGxlcnMuc2V0KG4sbyl9LGo9ZnVuY3Rpb24oZSx0LG4scil7dC5oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBvPXQub2JzZXJ2ZWQuZ2V0KGUpLmFjY2VwdExpc3Q7KCJzdHJpbmciIT10eXBlb2Ygcnx8LTE9PT11KG8scikpJiZ1KG8sbi50eXBlKT4tMSYmdC5jaGFuZ2VSZWNvcmRzLnB1c2gobil9KX07bz1jKCksaT1jKCksZS5vYnNlcnZlPWZ1bmN0aW9uKHQsbixvKXtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3Qgb2JzZXJ2ZSBub24tb2JqZWN0Iik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIG4pdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7aWYoZS5pc0Zyb3plbiYmZS5pc0Zyb3plbihuKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qub2JzZXJ2ZSBjYW5ub3QgZGVsaXZlciB0byBhIGZyb3plbiBmdW5jdGlvbiBvYmplY3QiKTtpZihvPT09cilvPXM7ZWxzZSBpZighb3x8Im9iamVjdCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoaXJkIGFyZ3VtZW50IHRvIE9iamVjdC5vYnNlcnZlIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncy4iKTtyZXR1cm4gYih0LG4sbyksdH0sZS51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCB1bm9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC51bm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIG4scj1pLmdldCh0KTtyZXR1cm4gciYmKG49ci5vYnNlcnZlZC5nZXQoZSkpJiYoci5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dihlLmRhdGEsdCl9KSxwKGZ1bmN0aW9uKCl7XyhyLHQpfSksMT09PXIub2JzZXJ2ZWQuc2l6ZSYmci5vYnNlcnZlZC5oYXMoZSk/aVsiZGVsZXRlIl0odCk6ci5vYnNlcnZlZFsiZGVsZXRlIl0oZSksMT09PW4uZGF0YS5oYW5kbGVycy5zaXplP29bImRlbGV0ZSJdKGUpOm4uZGF0YS5oYW5kbGVyc1siZGVsZXRlIl0odCkpLGV9LGUuZ2V0Tm90aWZpZXI9ZnVuY3Rpb24odCl7aWYobnVsbD09PXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmdldE5vdGlmaWVyIGNhbm5vdCBnZXROb3RpZmllciBub24tb2JqZWN0Iik7cmV0dXJuIGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4odCk/bnVsbDpnKHQpfSxlLmRlbGl2ZXJDaGFuZ2VSZWNvcmRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5kZWxpdmVyQ2hhbmdlUmVjb3JkcyBjYW5ub3QgZGVsaXZlciB0byBub24tZnVuY3Rpb24iKTt2YXIgdD1pLmdldChlKTt0JiYodC5vYnNlcnZlZC5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7dihlLmRhdGEsdCl9KSxfKHQsZSkpfX0oT2JqZWN0LEFycmF5LHRoaXMpfSx7fV0sNDpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxuLkRhdGFPYmplY3RPYnNlcnZlcj1uLkRhdGFPYmplY3RSZXBvcnRlcj1uLlN5bmNoZXI9dm9pZCAwLGUoIm11dGF0aW9ub2JzZXJ2ZXItc2hpbSIpLGUoIm9iamVjdC5vYnNlcnZlIiksZSgiYXJyYXkub2JzZXJ2ZSIpO3ZhciBvPWUoIi4vc3luY2hlci9TeW5jaGVyIiksaT1yKG8pLHM9ZSgiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciIpLGE9cihzKSx1PWUoIi4vc3luY2hlci9EYXRhT2JqZWN0T2JzZXJ2ZXIiKSxjPXIodSk7bi5TeW5jaGVyPWlbImRlZmF1bHQiXSxuLkRhdGFPYmplY3RSZXBvcnRlcj1hWyJkZWZhdWx0Il0sbi5EYXRhT2JqZWN0T2JzZXJ2ZXI9Y1siZGVmYXVsdCJdfSx7Ii4vc3luY2hlci9EYXRhT2JqZWN0T2JzZXJ2ZXIiOjcsIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiOjgsIi4vc3luY2hlci9TeW5jaGVyIjoxMSwiYXJyYXkub2JzZXJ2ZSI6MSwibXV0YXRpb25vYnNlcnZlci1zaGltIjoyLCJvYmplY3Qub2JzZXJ2ZSI6M31dLDU6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLHM9ZSgiLi9TeW5jT2JqZWN0IiksYT1yKHMpLHU9ZSgiLi9EYXRhT2JqZWN0Q2hpbGQiKSxjPXIodSksbD1lKCIuLi91dGlscy91dGlscy5qcyIpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixyLGkscyx1KXtvKHRoaXMsZSk7dmFyIGM9dGhpcztjLl9zeW5jaGVyPXQsYy5fdXJsPW4sYy5fc2NoZW1hPXIsYy5fc3RhdHVzPWksYy5fc3luY09iaj1uZXcgYVsiZGVmYXVsdCJdKHMpLGMuX2NoaWxkcmVucz11LGMuX3ZlcnNpb249MCxjLl9jaGlsZElkPTAsYy5fY2hpbGRyZW5PYmplY3RzPXt9LGMuX2NoaWxkcmVuTGlzdGVuZXJzPVtdLGMuX293bmVyPXQuX293bmVyLGMuX2J1cz10Ll9idXN9cmV0dXJuIGkoZSxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLG49dC5fdXJsKyIvY2hpbGRyZW4vIjt0Ll9jaGlsZHJlbnMmJnQuX2NoaWxkcmVucy5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBvPW4rcixpPXQuX2J1cy5hZGRMaXN0ZW5lcihvLGZ1bmN0aW9uKG4pe2lmKG4uZnJvbSE9PWUuX293bmVyKXN3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdC1DaGlsZHJlbi1SQ1Y6ICIsbiksbi50eXBlKXtjYXNlImNyZWF0ZSI6dC5fb25DaGlsZHJlbkNyZWF0ZShuKTticmVhaztjYXNlImRlbGV0ZSI6Y29uc29sZS5sb2cobik7YnJlYWs7ZGVmYXVsdDp0Ll9jaGFuZ2VDaGlsZHJlbihuKX19KTt0Ll9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKGkpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5yZW1vdmUoKX0pLE9iamVjdC5rZXlzKGUuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jaGlsZHJlbk9iamVjdHNbdF0uX3JlbGVhc2VMaXN0ZW5lcnMoKX0pfX0se2tleToicGF1c2UiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InJlc3VtZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToic3RvcCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvdyJOb3QgaW1wbGVtZW50ZWQifX0se2tleToiYWRkQ2hpbGRyZW4iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztuLl9jaGlsZElkKys7dmFyIHI9bi5fb3duZXIrIiMiK24uX2NoaWxkSWQsbz1uLl91cmwrIi9jaGlsZHJlbi8iK2UsaT17dHlwZToiY3JlYXRlIixmcm9tOm4uX293bmVyLHRvOm8sYm9keTp7cmVzb3VyY2U6cix2YWx1ZTp0fX07cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe3ZhciBzPW4uX2J1cy5wb3N0TWVzc2FnZShpKTtjb25zb2xlLmxvZygiY3JlYXRlLXJlcG9ydGVyLWNoaWxkKCAiK24uX293bmVyKyIgKTogIixpKTt2YXIgYT1uZXcgY1siZGVmYXVsdCJdKG4scix0LG4uX293bmVyLHMpO2Eub25DaGFuZ2UoZnVuY3Rpb24oZSl7bi5fb25DaGFuZ2UoZSx7cGF0aDpvLGNoaWxkSWQ6cn0pfSksbi5fY2hpbGRyZW5PYmplY3RzW3JdPWEsZShhKX0pfX0se2tleToib25BZGRDaGlsZHJlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkNoaWxkcmVuQ3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ib2R5LnJlc291cmNlO2NvbnNvbGUubG9nKCJjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICIrdC5fb3duZXIrIiApOiAiLGUpO3ZhciByPW5ldyBjWyJkZWZhdWx0Il0odCxuLGUuYm9keS52YWx1ZSk7dC5fY2hpbGRyZW5PYmplY3RzW25dPXIsc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzb3VyY2U6dC5fb3duZXJ9fSl9KTt2YXIgbz17dHlwZTplLnR5cGUsZnJvbTplLmZyb20sdXJsOmUudG8sdmFsdWU6ZS5ib2R5LnZhbHVlLGNoaWxkSWQ6bixpZGVudGl0eTplLmJvZHkuaWRUb2tlbn07dC5fb25BZGRDaGlsZHJlbkhhbmRsZXImJihjb25zb2xlLmxvZygiQURELUNISUxEUkVOLUVWRU5UOiAiLG8pLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG8pKX19LHtrZXk6Il9vbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2lmKG4uX3ZlcnNpb24rKywib24iPT09bi5fc3RhdHVzKXt2YXIgcj17dHlwZToidXBkYXRlIixmcm9tOm4uX3VybCx0bzpuLl91cmwrIi9jaGFuZ2VzIixib2R5Ont2ZXJzaW9uOm4uX3ZlcnNpb24sc291cmNlOm4uX293bmVyLGF0dHJpYnV0ZTplLmZpZWxkfX07ZS5vVHlwZT09PXMuT2JqZWN0VHlwZS5PQkpFQ1Q/ZS5jVHlwZSE9PXMuQ2hhbmdlVHlwZS5SRU1PVkUmJihyLmJvZHkudmFsdWU9ZS5kYXRhKTooci5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxyLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT1zLkNoYW5nZVR5cGUuVVBEQVRFJiYoci5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKHIudG89dC5wYXRoLHIuYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLG4uX2J1cy5wb3N0TWVzc2FnZShyKX19fSx7a2V5OiJfY2hhbmdlT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYobi5fdmVyc2lvbisxPT09dC5ib2R5LnZlcnNpb24pe24uX3ZlcnNpb24rKzt2YXIgcj10LmJvZHkuYXR0cmlidXRlLG89KDAsbC5kZWVwQ2xvbmUpKHQuYm9keS52YWx1ZSksaT1lLmZpbmRCZWZvcmUocik7aWYodC5ib2R5LmF0dHJpYnV0ZVR5cGU9PT1zLk9iamVjdFR5cGUuQVJSQVkpaWYodC5ib2R5Lm9wZXJhdGlvbj09PXMuQ2hhbmdlVHlwZS5BREQpe3ZhciBhPWkub2JqLHU9aS5sYXN0O0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoYSxbdSwwXS5jb25jYXQobykpfWVsc2UgaWYodC5ib2R5Lm9wZXJhdGlvbj09PXMuQ2hhbmdlVHlwZS5SRU1PVkUpe3ZhciBjPWkub2JqLGY9aS5sYXN0O2Muc3BsaWNlKGYsbyl9ZWxzZSBpLm9ialtpLmxhc3RdPW87ZWxzZSB0LmJvZHkudmFsdWU/aS5vYmpbaS5sYXN0XT1vOmRlbGV0ZSBpLm9ialtpLmxhc3RdfWVsc2UgY29uc29sZS5sb2coIlVOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICIrbi5fdmVyc2lvbisiLCBtc2cgPT4gIit0LmJvZHkudmVyc2lvbisiKSIpfX0se2tleToiX2NoYW5nZUNoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NvbnNvbGUubG9nKCJDaGFuZ2UgY2hpbGRyZW46ICIsdC5fb3duZXIsZSk7dmFyIG49ZS5ib2R5LnJlc291cmNlLHI9dC5fY2hpbGRyZW5PYmplY3RzW25dO3I/dC5fY2hhbmdlT2JqZWN0KHIuX3N5bmNPYmosZSk6Y29uc29sZS5sb2coIk5vIGNoaWxkcmVuIGZvdW5kIGZvcjogIixuKX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYX19LHtrZXk6InN0YXR1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c319LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fSx7a2V5OiJjaGlsZHJlbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHN9fV0pLGV9KCk7blsiZGVmYXVsdCJdPWYsdC5leHBvcnRzPW5bImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTIsIi4vRGF0YU9iamVjdENoaWxkIjo2LCIuL1N5bmNPYmplY3QiOjEwfV0sNjpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCkscz1lKCIuL1N5bmNPYmplY3QiKSxhPXIocyksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIsaSxzKXtvKHRoaXMsZSk7dmFyIHU9dGhpczt1Ll9wYXJlbnQ9dCx1Ll9jaGlsZElkPW4sdS5fb3duZXI9aSx1Ll9tc2dJZD1zLHUuX3N5bmNPYmo9bmV3IGFbImRlZmF1bHQiXShyKSx1Ll9idXM9dC5fYnVzLHUuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuIGkoZSxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fb3duZXImJihlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fb3duZXIsZnVuY3Rpb24odCl7InJlc3BvbnNlIj09PXQudHlwZSYmdC5pZD09PWUuX21zZ0lkJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RDaGlsZC5vblJlc3BvbnNlOiIsdCksZS5fb25SZXNwb25zZSh0KSl9KSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyJiZlLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2RlbGV0ZSBlLl9wYXJlbnQuX2NoaWxkcmVuW2UuX2NoaWxkSWRdLGUuX3JlbGVhc2VMaXN0ZW5lcnMoKX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24odCl7ZSh0KX0pfX0se2tleToib25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49e3R5cGU6ZS50eXBlLHVybDplLmJvZHkuc291cmNlLGNvZGU6ZS5ib2R5LmNvZGV9O3QuX29uUmVzcG9uc2VIYW5kbGVyJiZ0Ll9vblJlc3BvbnNlSGFuZGxlcihuKX19LHtrZXk6ImNoaWxkSWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZElkfX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19XSksZX0oKTtuWyJkZWZhdWx0Il09dSx0LmV4cG9ydHM9blsiZGVmYXVsdCJdfSx7Ii4vU3luY09iamVjdCI6MTB9XSw3OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGkoZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiF0fHwib2JqZWN0IiE9dHlwZW9mIHQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6dH1mdW5jdGlvbiBzKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCksdT1mdW5jdGlvbiBoKGUsdCxuKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCk7aWYodm9pZCAwPT09cil7dmFyIG89T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09bz92b2lkIDA6aChvLHQsbil9aWYoInZhbHVlImluIHIpcmV0dXJuIHIudmFsdWU7dmFyIGk9ci5nZXQ7aWYodm9pZCAwIT09aSlyZXR1cm4gaS5jYWxsKG4pfSxjPWUoIi4vRGF0YU9iamVjdCIpLGw9cihjKSxmPWUoIi4vRGF0YU9iamVjdENoaWxkIiksZD1yKGYpLHA9e0FOWToiYW55IixTVEFSVDoic3RhcnQiLEVYQUNUOiJleGFjdCJ9LGI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLG4scixzLGEsdSxjKXtvKHRoaXMsdCk7dmFyIGw9aSh0aGlzLE9iamVjdC5nZXRQcm90b3R5cGVPZih0KS5jYWxsKHRoaXMsZSxuLHIscyxhLmRhdGEsdSkpLGY9bDtyZXR1cm4gZi5fdmVyc2lvbj1jLGYuX2ZpbHRlcnM9e30sZi5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uKGUpe2YuX29uRmlsdGVyKGUpfSksT2JqZWN0LmtleXMoYS5jaGlsZHJlbnMpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9YS5jaGlsZHJlbnNbZV07Zi5fY2hpbGRyZW5PYmplY3RzW2VdPW5ldyBkWyJkZWZhdWx0Il0oZixlLHQpfSksZi5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxsfXJldHVybiBzKHQsZSksYSh0LFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dShPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsKyIvY2hhbmdlcyIsZnVuY3Rpb24odCl7InVwZGF0ZSI9PT10LnR5cGUmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLSIrZS5fdXJsKyItUkNWOiAiLHQpLGUuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dShPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJfcmVsZWFzZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX2NoYW5nZUxpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9vYnNlcnZlcnNbZS5fdXJsXX19LHtrZXk6InVuc3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dHlwZToidW5zdWJzY3JpYmUiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0T2JzZXJ2ZXItVU5TVUJTQ1JJQkU6ICIsdCksMjAwPT09dC5ib2R5LmNvZGUmJihlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX29ic2VydmVyc1tlLl91cmxdKX0pfX0se2tleToib25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZSxyPXt0eXBlOnAuRVhBQ1QsY2FsbGJhY2s6dH0sbz1lLmluZGV4T2YoIioiKTtvPT09ZS5sZW5ndGgtMSYmKDA9PT1vP3IudHlwZT1wLkFOWTooci50eXBlPXAuU1RBUlQsbj1lLnN1YnN0cigwLGUubGVuZ3RoLTEpKSksdGhpcy5fZmlsdGVyc1tuXT1yfX0se2tleToiX29uRmlsdGVyIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO09iamVjdC5rZXlzKHQuX2ZpbHRlcnMpLmZvckVhY2goZnVuY3Rpb24obil7dmFyIHI9dC5fZmlsdGVyc1tuXTtyLnR5cGU9PT1wLkFOWT9yLmNhbGxiYWNrKGUpOnIudHlwZT09PXAuU1RBUlQ/MD09PWUuZmllbGQuaW5kZXhPZihuKSYmci5jYWxsYmFjayhlKTpyLnR5cGU9PT1wLkVYQUNUJiZlLmZpZWxkPT09biYmci5jYWxsYmFjayhlKX0pfX1dKSx0fShsWyJkZWZhdWx0Il0pO25bImRlZmF1bHQiXT1iLHQuZXhwb3J0cz1uWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0Ijo1LCIuL0RhdGFPYmplY3RDaGlsZCI6Nn1dLDg6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gaShlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQ/ZTp0fWZ1bmN0aW9uIHMoZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiB0KTtlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpOmUuX19wcm90b19fPXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSx1PWZ1bmN0aW9uIHAoZSx0LG4pe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDpwKG8sdCxuKX1pZigidmFsdWUiaW4gcilyZXR1cm4gci52YWx1ZTt2YXIgaT1yLmdldDtpZih2b2lkIDAhPT1pKXJldHVybiBpLmNhbGwobil9LGM9ZSgiLi9EYXRhT2JqZWN0IiksbD1yKGMpLGY9ZSgiLi4vdXRpbHMvdXRpbHMuanMiKSxkPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxuLHIscyxhLHUpe28odGhpcyx0KTt2YXIgYz1pKHRoaXMsT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpLmNhbGwodGhpcyxlLG4scixzLGEsdSkpLGw9YztyZXR1cm4gbC5fc3Vic2NyaXB0aW9ucz17fSxsLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coIkRhdGFPYmplY3RSZXBvcnRlci0iK24rIi1TRU5EOiAiLGUpLGwuX29uQ2hhbmdlKGUpfSksbC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxjfXJldHVybiBzKHQsZSksYSh0LFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dShPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9yZXNwb25zZUxpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7InJlc3BvbnNlIj09PXQudHlwZSYmZS5fb25SZXNwb25zZSh0KX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dShPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJfcmVsZWFzZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX3Jlc3BvbnNlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJpbnZpdGVPYnNlcnZlcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj17dHlwZToiY3JlYXRlIixmcm9tOnQuX3N5bmNoZXIuX293bmVyLHRvOnQuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTp0Ll91cmwsc2NoZW1hOnQuX3NjaGVtYSx2YWx1ZTp0Ll9zeW5jT2JqLmRhdGEsYXV0aG9yaXNlOmV9fTt0Ll9idXMucG9zdE1lc3NhZ2Uobil9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJkZWxldGUiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9yZXBvcnRlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXI9ZX19LHtrZXk6Im9uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5OiJfb25Gb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogIixlKSxlLmJvZHkudHlwZSl7Y2FzZSJzdWJzY3JpYmUiOnQuX29uU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnQuX29uVW5TdWJzY3JpYmUoZSl9fX0se2tleToiX29uU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ib2R5LmZyb20scj17dHlwZTplLmJvZHkudHlwZSx1cmw6bixhY2NlcHQ6ZnVuY3Rpb24oKXt2YXIgcj17dXJsOm4sc3RhdHVzOiJvbiJ9O3QuX3N1YnNjcmlwdGlvbnNbbl09cjt2YXIgbz17fTtyZXR1cm4gT2JqZWN0LmtleXModC5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPXQuX2NoaWxkcmVuT2JqZWN0c1tlXS5kYXRhO29bZV09KDAsZi5kZWVwQ2xvbmUpKG4pfSksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNjaGVtYTp0Ll9zY2hlbWEsdmVyc2lvbjp0Ll92ZXJzaW9uLHZhbHVlOntkYXRhOigwLGYuZGVlcENsb25lKSh0LmRhdGEpLGNoaWxkcmVuczpvfX19KSxyfSxyZWplY3Q6ZnVuY3Rpb24obil7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAzLGRlc2M6bn19KX19O3QuX29uU3Vic2NyaXB0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJTVUJTQ1JJUFRJT04tRVZFTlQ6ICIsciksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKHIpKX19LHtrZXk6Il9vblVuU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ib2R5LmZyb20scj10Ll9zdWJzY3JpcHRpb25zW25dO2RlbGV0ZSB0Ll9zdWJzY3JpcHRpb25zW25dO3ZhciBvPXt0eXBlOmUuYm9keS50eXBlLHVybDpuLG9iamVjdDpyfTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiVU4tU1VCU0NSSVBUSU9OLUVWRU5UOiAiLG8pLHQuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihvKSl9fSx7a2V5OiJfb25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXt0eXBlOmUudHlwZSx1cmw6ZS5mcm9tLGNvZGU6ZS5ib2R5LmNvZGV9O3QuX29uUmVzcG9uc2VIYW5kbGVyJiYoY29uc29sZS5sb2coIlJFU1BPTlNFLUVWRU5UOiAiLG4pLHQuX29uUmVzcG9uc2VIYW5kbGVyKG4pKX19LHtrZXk6InN1YnNjcmlwdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zfX1dKSx0fShsWyJkZWZhdWx0Il0pO25bImRlZmF1bHQiXT1kLHQuZXhwb3J0cz1uWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEyLCIuL0RhdGFPYmplY3QiOjV9XSw5OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCksaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLG8saSl7cih0aGlzLGUpO3ZhciBzPXRoaXM7cy5fb3duZXI9dCxzLl91cmw9bixzLl9idXM9byxzLl9jaGlsZHJlbj1pLHMuX2NoYW5nZXM9W10scy5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4gbyhlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhUHJvdmlzaW9uYWwtIitlLl91cmwrIi1SQ1Y6ICIsdCksZS5fY2hhbmdlcy5wdXNoKHQpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiYXBwbHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpfSl9fSx7a2V5OiJjaGlsZHJlbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVufX1dKSxlfSgpO25bImRlZmF1bHQiXT1pLHQuZXhwb3J0cz1uWyJkZWZhdWx0Il19LHt9XSwxMDpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLG4uT2JqZWN0VHlwZT1uLkNoYW5nZVR5cGU9dm9pZCAwO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLGk9ZSgiLi4vdXRpbHMvdXRpbHMuanMiKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtyKHRoaXMsZSk7dmFyIG49dGhpcztuLl9vYnNlcnZlcnM9W10sbi5fZmlsdGVycz17fSx0P24uX2RhdGE9KDAsaS5kZWVwQ2xvbmUpKHQpOm4uX2RhdGE9e30sbi5faW50ZXJuYWxPYnNlcnZlKG5ldyBhLG4uX2RhdGEpfXJldHVybiBvKGUsW3trZXk6Im9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5wdXNoKGUpfX0se2tleToiZmluZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLiIpO3JldHVybiB0aGlzLl9maW5kV2l0aFNwbGl0KHQpfX0se2tleToiZmluZEJlZm9yZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30sbj1lLnNwbGl0KCIuIik7cmV0dXJuIHQubGFzdD1uLnBvcCgpLHQub2JqPXRoaXMuX2ZpbmRXaXRoU3BsaXQobiksdH19LHtrZXk6Il9maW5kV2l0aFNwbGl0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dD10W2VdfSksdH19LHtrZXk6Il9maXJlRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX19LHtrZXk6Il9pc09ic2VydmFibGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnN0cnVjdG9yPT09T2JqZWN0fHxlLmNvbnN0cnVjdG9yPT09QXJyYXl9fSx7a2V5OiJfaW50ZXJuYWxPYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYobi5faXNPYnNlcnZhYmxlKHQpKXt2YXIgcj1mdW5jdGlvbih0KXtuLl9vbkNoYW5nZXMoZSx0KX07aWYodC5jb25zdHJ1Y3Rvcj09PU9iamVjdCl7T2JqZWN0Lm9ic2VydmUodCxyKTtmb3IodmFyIG8gaW4gdCluLl9pc09ic2VydmFibGUodFtvXSkmJm4uX2ludGVybmFsT2JzZXJ2ZShlWyJuZXciXShvKSx0W29dKX1lbHNlIGlmKHQuY29uc3RydWN0b3I9PT1BcnJheSl7QXJyYXkub2JzZXJ2ZSh0LHIpO2Zvcih2YXIgaSBpbiB0KWlmKG4uX2lzT2JzZXJ2YWJsZSh0W2ldKSl7dmFyIHM9ZVsibmV3Il0obmV3IHUodFtpXSxpKSk7bi5faW50ZXJuYWxPYnNlcnZlKHMsdFtpXSl9fX19fSx7a2V5OiJfb25DaGFuZ2VzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7Zm9yKHZhciByIGluIHQpe3ZhciBvPXRbcl0ub2JqZWN0LHM9dm9pZCAwO2lmKG8uY29uc3RydWN0b3I9PT1PYmplY3QmJihzPWwuT0JKRUNUKSxvLmNvbnN0cnVjdG9yPT09QXJyYXkmJihzPWwuQVJSQVkpLCJzcGxpY2UiPT09dFtyXS50eXBlKSFmdW5jdGlvbigpe3ZhciBhPXRbcl0uaW5kZXgsbD1lWyJuZXciXSgiIithKSxmPWwudG9TdHJpbmcoKSxkPXRbcl0ucmVtb3ZlZC5sZW5ndGg7aWYoMCE9PWQpe3ZhciBwPXRbcl0ucmVtb3ZlZDtwLmZvckVhY2goZnVuY3Rpb24odCxyKXtuLl9pc09ic2VydmFibGUodCkmJmUucmVtb3ZlSW5kZXgoYStyKX0pLG4uX2ZpcmVFdmVudCh7Y1R5cGU6Yy5SRU1PVkUsb1R5cGU6cyxmaWVsZDpmLGRhdGE6ZH0pfXZhciBiPXRbcl0uYWRkZWRDb3VudDtpZigwIT09Yil7dmFyIGg9by5zbGljZShhLGErYik7aC5mb3JFYWNoKGZ1bmN0aW9uKHQscil7aWYobi5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbz1lWyJuZXciXShuZXcgdSh0LGErcikpO24uX2ludGVybmFsT2JzZXJ2ZShvLHQpfX0pLG4uX2ZpcmVFdmVudCh7Y1R5cGU6Yy5BREQsb1R5cGU6cyxmaWVsZDpmLGRhdGE6KDAsaS5kZWVwQ2xvbmUpKGgpfSl9YSE9PW8ubGVuZ3RoLTEmJmUucmVJbmRleEZyb20obyl9KCk7ZWxzZXt2YXIgYT1lWyJuZXciXSh0W3JdLm5hbWUpLGY9YS50b1N0cmluZygpO2lmKC0xIT09Zi5pbmRleE9mKCJTeW1ib2wiKSljb250aW51ZTt2YXIgZD1vW3Rbcl0ubmFtZV07InVwZGF0ZSI9PT10W3JdLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yy5VUERBVEUsb1R5cGU6cyxmaWVsZDpmLGRhdGE6KDAsaS5kZWVwQ2xvbmUpKGQpfSksImFkZCI9PT10W3JdLnR5cGUmJih0aGlzLl9pbnRlcm5hbE9ic2VydmUoYSxkKSx0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmMuQURELG9UeXBlOnMsZmllbGQ6ZixkYXRhOigwLGkuZGVlcENsb25lKShkKX0pKSwiZGVsZXRlIj09PXRbcl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpjLlJFTU9WRSxvVHlwZTpzLGZpZWxkOmZ9KX19fX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fV0pLGV9KCksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSksdGhpcy5fcGF0aD1bXSx0aGlzLl9vYnNlcnZhYmxlcz17fX1yZXR1cm4gbyhlLFt7a2V5OiJyZW1vdmVJbmRleCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuX29ic2VydmFibGVzW2VdfX0se2tleToicmVJbmRleEZyb20iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXModGhpcy5fb2JzZXJ2YWJsZXMpLmZvckVhY2goZnVuY3Rpb24obil7dmFyIHI9dC5fb2JzZXJ2YWJsZXNbbl0sbz1lLmluZGV4T2Yoci5vYmopO3IuaWR4IT1vJiYoci5pZHg9byxkZWxldGUgdC5fb2JzZXJ2YWJsZXNbbl0sdC5fb2JzZXJ2YWJsZXNbb109cil9KX19LHtrZXk6Im5ldyIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5jb25zdHJ1Y3Rvcj09dSYmKHRoaXMuX29ic2VydmFibGVzW2UuaWR4XT1lKTt2YXIgdD10aGlzLmNsb25lKCk7cmV0dXJuIHQuX3BhdGgucHVzaChlKSx0fX0se2tleToiY2xvbmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9wYXRoLnB1c2goZSl9KSx0fX0se2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IiI7cmV0dXJuIHRoaXMuX3BhdGguZm9yRWFjaChmdW5jdGlvbih0LG4pezA9PT1uP2U9dC50b1N0cmluZygpOmUrPSIuIit0LnRvU3RyaW5nKCl9KSxlfX1dKSxlfSgpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbil7cih0aGlzLGUpLHRoaXMub2JqPXQsdGhpcy5pZHg9bn1yZXR1cm4gbyhlLFt7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZHgudG9TdHJpbmcoKX19XSksZX0oKSxjPW4uQ2hhbmdlVHlwZT17VVBEQVRFOiJ1cGRhdGUiLEFERDoiYWRkIixSRU1PVkU6InJlbW92ZSJ9LGw9bi5PYmplY3RUeXBlPXtPQkpFQ1Q6Im9iamVjdCIsQVJSQVk6ImFycmF5In07blsiZGVmYXVsdCJdPXN9LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEyfV0sMTE6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLHM9ZSgiLi9EYXRhT2JqZWN0UmVwb3J0ZXIiKSxhPXIocyksdT1lKCIuL0RhdGFPYmplY3RPYnNlcnZlciIpLGM9cih1KSxsPWUoIi4vRGF0YVByb3Zpc2lvbmFsIiksZj1yKGwpLGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixyKXtvKHRoaXMsZSk7dmFyIGk9dGhpcztpLl9vd25lcj10LGkuX2J1cz1uLGkuX3N1YlVSTD1yLnJ1bnRpbWVVUkwrIi9zbSIsaS5fcmVwb3J0ZXJzPXt9LGkuX29ic2VydmVycz17fSxpLl9wcm92aXNpb25hbHM9e30sbi5hZGRMaXN0ZW5lcih0LGZ1bmN0aW9uKGUpe2lmKGUuZnJvbSE9PXQpc3dpdGNoKGNvbnNvbGUubG9nKCJTeW5jaGVyLVJDVjogIixlKSxlLnR5cGUpe2Nhc2UiZm9yd2FyZCI6aS5fb25Gb3J3YXJkKGUpO2JyZWFrO2Nhc2UiY3JlYXRlIjppLl9vblJlbW90ZUNyZWF0ZShlKTticmVhaztjYXNlImRlbGV0ZSI6aS5fb25SZW1vdGVEZWxldGUoZSl9fSl9cmV0dXJuIGkoZSxbe2tleToiY3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcyxvPXt0eXBlOiJjcmVhdGUiLGZyb206ci5fb3duZXIsdG86ci5fc3ViVVJMLGJvZHk6e3NjaGVtYTplLHZhbHVlOm4sYXV0aG9yaXNlOnR9fTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCxpKXtyLl9idXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihvKXtpZihjb25zb2xlLmxvZygiY3JlYXRlLXJlc3BvbnNlOiAiLG8pLDIwMD09PW8uYm9keS5jb2RlKXt2YXIgcz1vLmJvZHkucmVzb3VyY2UsdT1uZXcgYVsiZGVmYXVsdCJdKHIscyxlLCJvbiIsbixvLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpO3IuX3JlcG9ydGVyc1tzXT11LHQodSl9ZWxzZSBpKG8uYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJzdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxyPXt0eXBlOiJzdWJzY3JpYmUiLGZyb206bi5fb3duZXIsdG86bi5fc3ViVVJMLGJvZHk6e3NjaGVtYTplLHJlc291cmNlOnR9fTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obyxpKXtuLl9idXMucG9zdE1lc3NhZ2UocixmdW5jdGlvbihyKXtjb25zb2xlLmxvZygic3Vic2NyaWJlLXJlc3BvbnNlOiAiLHIpO3ZhciBzPW4uX3Byb3Zpc2lvbmFsc1t0XTtpZihkZWxldGUgbi5fcHJvdmlzaW9uYWxzW3RdLHMmJnMuX3JlbGVhc2VMaXN0ZW5lcnMoKSxyLmJvZHkuY29kZTwyMDApcz1uZXcgZlsiZGVmYXVsdCJdKG4uX293bmVyLHQsbi5fYnVzLHIuYm9keS5jaGlsZHJlblJlc291cmNlcyksbi5fcHJvdmlzaW9uYWxzW3RdPXM7ZWxzZSBpZigyMDA9PT1yLmJvZHkuY29kZSl7dmFyIGE9bmV3IGNbImRlZmF1bHQiXShuLHQsZSwib24iLHIuYm9keS52YWx1ZSxzLmNoaWxkcmVuLHIuYm9keS52ZXJzaW9uKTtuLl9vYnNlcnZlcnNbdF09YSxvKGEpLHMuYXBwbHkoYSl9ZWxzZSBpKHIuYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJvbk5vdGlmaWNhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyPWV9fSx7a2V5OiJfb25Gb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dC5fcmVwb3J0ZXJzW2UuYm9keS50b107bi5fb25Gb3J3YXJkKGUpfX0se2tleToiX29uUmVtb3RlQ3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5mcm9tLnNsaWNlKDAsLTEzKSxyPXt0eXBlOmUudHlwZSxmcm9tOmUuYm9keS5zb3VyY2UsdXJsOm4sc2NoZW1hOmUuYm9keS5zY2hlbWEsdmFsdWU6ZS5ib2R5LnZhbHVlLGlkZW50aXR5OmUuYm9keS5pZFRva2VuLGFjazpmdW5jdGlvbihuKXt2YXIgcj0yMDA7biYmKHI9biksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6cn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsciksCnQuX29uTm90aWZpY2F0aW9uSGFuZGxlcihyKSl9fSx7a2V5OiJfb25SZW1vdGVEZWxldGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmJvZHkucmVzb3VyY2Uscj10Ll9vYnNlcnZlcnNbbl07aWYocil7dmFyIG89e3R5cGU6ZS50eXBlLHVybDpuLGlkZW50aXR5OmUuYm9keS5pZFRva2VuLGFjazpmdW5jdGlvbihuKXt2YXIgbz0yMDA7biYmKG89biksMjAwPT09byYmclsiZGVsZXRlIl0oKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpvLHNvdXJjZTp0Ll9vd25lcn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJOT1RJRklDQVRJT04tRVZFTlQ6ICIsbyksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKG8pKX1lbHNlIHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwNCxzb3VyY2U6dC5fb3duZXJ9fSl9fSx7a2V5OiJvd25lciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX293bmVyfX0se2tleToicmVwb3J0ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVwb3J0ZXJzfX0se2tleToib2JzZXJ2ZXJzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzfX1dKSxlfSgpO25bImRlZmF1bHQiXT1kLHQuZXhwb3J0cz1uWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiOjcsIi4vRGF0YU9iamVjdFJlcG9ydGVyIjo4LCIuL0RhdGFQcm92aXNpb25hbCI6OX1dLDEyOltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2ksbj0iJDEsJDIsJDMiLHI9ZS5yZXBsYWNlKHQsbikuc3BsaXQoIiwiKTtyWzBdPT09ZSYmKHJbMF09Imh0dHBzIixyWzFdPWUpO3ZhciBvPXt0eXBlOnJbMF0sZG9tYWluOnJbMV0saWRlbnRpdHk6clsyXX07cmV0dXJuIG99ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTp2b2lkIDB9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLG4uZGl2aWRlVVJMPXIsbi5kZWVwQ2xvbmU9b30se31dfSx7fSxbNF0pKDQpfSk7Cn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XX0se30sWzFdKSgxKQp9KTs=",
      "sourceCodeClassname": "HelloWorldReporter",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10003,
    "type": "Hyperties",
    "version": "0.1",
    "description": "Description of HelloWorldReporter",
    "objectName": "HelloWorldReporter",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "HypertyChat": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCJfX2VzTW9kdWxlIix7dmFsdWU6dHJ1ZX0pO3ZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fXJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTt2YXIgX0V2ZW50RW1pdHRlcjI9cmVxdWlyZSgnLi4vdXRpbHMvRXZlbnRFbWl0dGVyJyk7dmFyIF9FdmVudEVtaXR0ZXIzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0V2ZW50RW1pdHRlcjIpO3ZhciBfcGFydGljaXBhbnQ9cmVxdWlyZSgnLi9wYXJ0aWNpcGFudCcpO3ZhciBfcGFydGljaXBhbnQyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhcnRpY2lwYW50KTtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iail7cmV0dXJuIG9iaiYmb2JqLl9fZXNNb2R1bGU/b2JqOntkZWZhdWx0Om9ian07fWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSxDb25zdHJ1Y3Rvcil7aWYoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7fX1mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLGNhbGwpe2lmKCFzZWxmKXt0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO31yZXR1cm4gY2FsbCYmKHR5cGVvZiBjYWxsPT09Im9iamVjdCJ8fHR5cGVvZiBjYWxsPT09ImZ1bmN0aW9uIik/Y2FsbDpzZWxmO31mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3Msc3VwZXJDbGFzcyl7aWYodHlwZW9mIHN1cGVyQ2xhc3MhPT0iZnVuY3Rpb24iJiZzdXBlckNsYXNzIT09bnVsbCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiK3R5cGVvZiBzdXBlckNsYXNzKTt9c3ViQ2xhc3MucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyYmc3VwZXJDbGFzcy5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTpzdWJDbGFzcyxlbnVtZXJhYmxlOmZhbHNlLHdyaXRhYmxlOnRydWUsY29uZmlndXJhYmxlOnRydWV9fSk7aWYoc3VwZXJDbGFzcylPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLHN1cGVyQ2xhc3MpOnN1YkNsYXNzLl9fcHJvdG9fXz1zdXBlckNsYXNzO30gLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovdmFyIENoYXRHcm91cD1mdW5jdGlvbihfRXZlbnRFbWl0dGVyKXtfaW5oZXJpdHMoQ2hhdEdyb3VwLF9FdmVudEVtaXR0ZXIpO2Z1bmN0aW9uIENoYXRHcm91cChzeW5jaGVyLGh5cGVydHlEaXNjb3ZlcnksZG9tYWluKXtfY2xhc3NDYWxsQ2hlY2sodGhpcyxDaGF0R3JvdXApO2lmKCFzeW5jaGVyKXRocm93IEVycm9yKCdTeW5jaGVyIGlzIGEgbmVjZXNzYXJ5IGRlcGVuZGVjeScpO2lmKCFoeXBlcnR5RGlzY292ZXJ5KXRocm93IEVycm9yKCdIeXBlcnR5IGRpc2NvdmVyIGlzIGEgbmVjZXNzYXJ5IGRlcGVuZGVjeScpO3ZhciBfdGhpczI9X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcyxPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2hhdEdyb3VwKS5jYWxsKHRoaXMsc3luY2hlcixoeXBlcnR5RGlzY292ZXJ5KSk7dmFyIF90aGlzPV90aGlzMjtfdGhpcy5fc3luY2hlcj1zeW5jaGVyO190aGlzLl9oeXBlcnR5RGlzY292ZXJ5PWh5cGVydHlEaXNjb3Zlcnk7X3RoaXMuX29iamVjdERlc2NVUkw9J2h5cGVydHktY2F0YWxvZ3VlOi8vJytkb21haW4rJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hcy9Db21tdW5pY2F0aW9uJztyZXR1cm4gX3RoaXMyO31fY3JlYXRlQ2xhc3MoQ2hhdEdyb3VwLFt7a2V5Oidwcm9jZXNzUGFydGlwYW50cycsdmFsdWU6ZnVuY3Rpb24gcHJvY2Vzc1BhcnRpcGFudHMocGFydGljaXBhbnRzKXt2YXIgX3RoaXM9dGhpcztwYXJ0aWNpcGFudHMuZm9yRWFjaChmdW5jdGlvbihwYXJ0aWNpcGFudCl7aWYoX3RoaXMuX2RhdGFPYmplY3RPYnNlcnZlci5fb3duZXIhPT1wYXJ0aWNpcGFudC5oeXBlcnR5UmVzb3VyY2Upe190aGlzLnByb2Nlc3NQYXJ0aWNpcGFudChwYXJ0aWNpcGFudCk7fX0pO319LHtrZXk6J3Byb2Nlc3NQYXJ0aWNpcGFudCcsdmFsdWU6ZnVuY3Rpb24gcHJvY2Vzc1BhcnRpY2lwYW50KHBhcnRpY2lwYW50KXt2YXIgX3RoaXM9dGhpcztjb25zb2xlLmxvZygnRWFjaCBQYXJ0aWNpcGFudCB3aWxsIGJlIHRyaWdnZXI6ICcscGFydGljaXBhbnQpO190aGlzLnRyaWdnZXIoJ3BhcnRpY2lwYW50OmFkZGVkJyxwYXJ0aWNpcGFudCk7fSAvKioKICAgKiBQcm9jZXNzIGNoaWxkcmVuIG1lc3NhZ2VzCiAgICogQHBhcmFtICB7W3R5cGVdfSBjaGlsZHJlbiBbZGVzY3JpcHRpb25dCiAgICogQHJldHVybiB7W3R5cGVdfSAgICAgICAgICBbZGVzY3JpcHRpb25dCiAgICovfSx7a2V5OidfcHJvY2Vzc0NoaWxkcmVuJyx2YWx1ZTpmdW5jdGlvbiBfcHJvY2Vzc0NoaWxkcmVuKGNoaWxkcmVuKXt2YXIgX3RoaXM9dGhpcztjb25zb2xlLmluZm8oJ1Byb2Nlc3MgTWVzc2FnZTonLGNoaWxkcmVuKTtfdGhpcy50cmlnZ2VyKCduZXc6bWVzc2FnZTpyZWNpdmVkJyxjaGlsZHJlbik7fSAvKioKICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gc2VuZCBhIGNoYXQgbWVzc2FnZS4KICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBtZXNzYWdlIHRleHQgdG8gYmUgc2VuZAogICAqL30se2tleTonc2VuZCcsdmFsdWU6ZnVuY3Rpb24gc2VuZChtZXNzYWdlKXtjb25zb2xlLmluZm8oJ1NlbmQgTWVzc2FnZTonLG1lc3NhZ2UsdGhpcyk7dmFyIF90aGlzPXRoaXM7dmFyIGRhdGFPYmplY3Q9X3RoaXMuZGF0YU9iamVjdFJlcG9ydGVyP190aGlzLmRhdGFPYmplY3RSZXBvcnRlcjpfdGhpcy5kYXRhT2JqZWN0T2JzZXJ2ZXI7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtkYXRhT2JqZWN0LmFkZENoaWxkcmVuKCdjaGF0bWVzc2FnZXMnLHtjaGF0TWVzc2FnZTptZXNzYWdlfSkudGhlbihmdW5jdGlvbihkYXRhT2JqZWN0Q2hpbGQpe2NvbnNvbGUuaW5mbygnRGF0YSBPYmplY3QgQ2hpbGQ6ICcsZGF0YU9iamVjdENoaWxkKTt2YXIgbXNnPXtjaGlsZElkOmRhdGFPYmplY3RDaGlsZC5fY2hpbGRJZCxmcm9tOmRhdGFPYmplY3RDaGlsZC5fb3duZXIsdmFsdWU6ZGF0YU9iamVjdENoaWxkLmRhdGF9O190aGlzLl9wcm9jZXNzQ2hpbGRyZW4obXNnKTtyZXNvbHZlKGRhdGFPYmplY3RDaGlsZCk7fSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtjb25zb2xlLmVycm9yKCdSZWFzb246JyxyZWFzb24pO3JlamVjdChyZWFzb24pO30pO30pO30gLyoqCiAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGNsb3NlIGFuIGV4aXN0aW5nIEdyb3VwIENoYXQgaW5zdGFuY2UuCiAgICoKICAgKi99LHtrZXk6J2Nsb3NlJyx2YWx1ZTpmdW5jdGlvbiBjbG9zZSgpe319LHtrZXk6J2pvaW4nLHZhbHVlOmZ1bmN0aW9uIGpvaW4ocmVzb3VyY2Upe3ZhciBfdGhpcz10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7X3RoaXMuYWRkUGFydGljaXBhbnQocmVzb3VyY2UpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtyZXNvbHZlKCdqb2luZWQ6ICcscmVzdWx0KTt9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe3JlamVjdChyZWFzb24pO30pO30pO30gLy8gVE9ETzogaW1wcm92ZSB0aGlzIHdpdGggYW4gaW52aXRlOwovKioKICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYWRkIC8gaW52aXRlIG5ldyBwYXJ0aWNpcGFudCBvbiBhbiBleGlzdGluZyBHcm91cCBDaGF0IGluc3RhbmNlLgogICAqIEByZXR1cm4ge1Byb21pc2V9IFByb21pc2Ugd2l0aCB0aGUgc3RhdHVzCiAgICovfSx7a2V5OidhZGRQYXJ0aWNpcGFudCcsdmFsdWU6ZnVuY3Rpb24gYWRkUGFydGljaXBhbnQoZW1haWwpe3ZhciBfdGhpcz10aGlzO3ZhciBzeW5jaGVyPV90aGlzLl9zeW5jaGVyO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7fSk7fSAvKioKICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gcmVtb3ZlIGEgcGFydGljaXBhbnQgZnJvbSBhbiBleGlzdGluZyBHcm91cCBDaGF0IGluc3RhbmNlLgogICAqIEByZXR1cm4ge1Byb21pc2V9IFByb21pc2Ugd2l0aCB0aGUgc3RhdHVzCiAgICovfSx7a2V5OidyZW1vdmVQYXJ0aWNpcGFudCcsdmFsdWU6ZnVuY3Rpb24gcmVtb3ZlUGFydGljaXBhbnQoKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3RyeXtyZXNvbHZlKCdwYXJ0aWNpcGFudCByZW1vdmVkJyk7fWNhdGNoKGUpe3JlamVjdCgncmVtb3ZlIHBhcnRpY2lwYW50IGZhaWwnKTt9fSk7fSAvKioKICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gb3BlbiBhIEdyb3VwIENoYXQgaW5zdGFuY2UgdGhhdCB3YXMgcHJldmlvdXNseSBjbG9zZWQuCiAgICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dCiAgICovfSx7a2V5OidvcGVuJyx2YWx1ZTpmdW5jdGlvbiBvcGVuKCl7fX0se2tleTonZGF0YU9iamVjdFJlcG9ydGVyJyxzZXQ6ZnVuY3Rpb24gc2V0KGRhdGFPYmplY3RSZXBvcnRlcil7aWYoIWRhdGFPYmplY3RSZXBvcnRlcil0aHJvdyBuZXcgRXJyb3IoJ1RoZSBkYXRhIG9iamVjdCByZXBvcnRlciBpcyBuZWNlc3NhcnkgcGFyYW1ldGVyJyk7dmFyIF90aGlzPXRoaXM7Y29uc29sZS5pbmZvKCdTZXQgZGF0YSBvYmplY3QgcmVwb3J0ZXI6ICcsZGF0YU9iamVjdFJlcG9ydGVyKTtkYXRhT2JqZWN0UmVwb3J0ZXIub25TdWJzY3JpcHRpb24oZnVuY3Rpb24oZXZlbnQpe2V2ZW50LmFjY2VwdCgpOyAvLyBTZXQgdGhlIG90aGVyIHN1YnNjcmlwdGlvbiBsaWtlIGEgcGFydGljaXBhbnQKX3BhcnRpY2lwYW50Mi5kZWZhdWx0Lmh5cGVydHlSZXNvdXJjZT1ldmVudC51cmw7Y29uc29sZS5pbmZvKCdPbiBTdWJzY3JpcHRpb24gYWRkIFBhcnRpY2lwYW50OiAnLF9wYXJ0aWNpcGFudDIuZGVmYXVsdCxldmVudCk7ZGF0YU9iamVjdFJlcG9ydGVyLmRhdGEucGFydGljaXBhbnRzLnB1c2goX3BhcnRpY2lwYW50Mi5kZWZhdWx0KTtfdGhpcy5wcm9jZXNzUGFydGljaXBhbnQoX3BhcnRpY2lwYW50Mi5kZWZhdWx0KTt9KTtkYXRhT2JqZWN0UmVwb3J0ZXIub25BZGRDaGlsZHJlbihmdW5jdGlvbihjaGlsZHJlbil7Y29uc29sZS5pbmZvKCdSZXBvcnRlciAtIEFkZCBDaGlsZHJlbjogJyxjaGlsZHJlbik7ZGF0YU9iamVjdFJlcG9ydGVyLmRhdGEubGFzdE1vZGlmaWVkPW5ldyBEYXRlKCkudG9KU09OKCk7X3RoaXMuX3Byb2Nlc3NDaGlsZHJlbihjaGlsZHJlbik7fSk7X3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlcj1kYXRhT2JqZWN0UmVwb3J0ZXI7fSxnZXQ6ZnVuY3Rpb24gZ2V0KCl7dmFyIF90aGlzPXRoaXM7cmV0dXJuIF90aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXI7fX0se2tleTonZGF0YU9iamVjdE9ic2VydmVyJyxzZXQ6ZnVuY3Rpb24gc2V0KGRhdGFPYmplY3RPYnNlcnZlcil7dmFyIF90aGlzPXRoaXM7X3RoaXMuX2RhdGFPYmplY3RPYnNlcnZlcj1kYXRhT2JqZWN0T2JzZXJ2ZXI7ZGF0YU9iamVjdE9ic2VydmVyLm9uQ2hhbmdlKCcqJyxmdW5jdGlvbihldmVudCl7Y29uc29sZS5pbmZvKCdDaGFuZ2UgRXZlbnQ6ICcsZXZlbnQpO190aGlzLnByb2Nlc3NQYXJ0aXBhbnRzKGV2ZW50LmRhdGEpO30pO2RhdGFPYmplY3RPYnNlcnZlci5vbkFkZENoaWxkcmVuKGZ1bmN0aW9uKGNoaWxkcmVuKXtjb25zb2xlLmluZm8oJ09ic2VydmVyIC0gQWRkIENoaWxkcmVuOiAnLGNoaWxkcmVuKTtfdGhpcy5fcHJvY2Vzc0NoaWxkcmVuKGNoaWxkcmVuKTt9KTt9LGdldDpmdW5jdGlvbiBnZXQoKXt2YXIgX3RoaXM9dGhpcztyZXR1cm4gX3RoaXMuX2RhdGFPYmplY3RPYnNlcnZlcjt9fSx7a2V5OidkYXRhT2JqZWN0JyxnZXQ6ZnVuY3Rpb24gZ2V0KCl7dmFyIF90aGlzPXRoaXM7cmV0dXJuIF90aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXI/X3RoaXMuZGF0YU9iamVjdFJlcG9ydGVyOl90aGlzLmRhdGFPYmplY3RPYnNlcnZlcjt9fV0pO3JldHVybiBDaGF0R3JvdXA7fShfRXZlbnRFbWl0dGVyMy5kZWZhdWx0KTtleHBvcnRzLmRlZmF1bHQ9Q2hhdEdyb3VwO21vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi91dGlscy9FdmVudEVtaXR0ZXIiOjUsIi4vcGFydGljaXBhbnQiOjR9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCJfX2VzTW9kdWxlIix7dmFsdWU6dHJ1ZX0pO3ZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcilkZXNjcmlwdG9yLndyaXRhYmxlPXRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fXJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30oKTtleHBvcnRzLmRlZmF1bHQ9YWN0aXZhdGU7dmFyIF9IeXBlcnR5RGlzY292ZXJ5PXJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSHlwZXJ0eURpc2NvdmVyeScpO3ZhciBfSHlwZXJ0eURpc2NvdmVyeTI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSHlwZXJ0eURpc2NvdmVyeSk7dmFyIF9TeW5jaGVyPXJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcicpO3ZhciBfRXZlbnRFbWl0dGVyMj1yZXF1aXJlKCcuLi91dGlscy9FdmVudEVtaXR0ZXInKTt2YXIgX0V2ZW50RW1pdHRlcjM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRXZlbnRFbWl0dGVyMik7dmFyIF91dGlscz1yZXF1aXJlKCcuLi91dGlscy91dGlscycpO3ZhciBfY29tbXVuaWNhdGlvbj1yZXF1aXJlKCcuL2NvbW11bmljYXRpb24nKTt2YXIgX3BhcnRpY2lwYW50PXJlcXVpcmUoJy4vcGFydGljaXBhbnQnKTt2YXIgX3BhcnRpY2lwYW50Mj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wYXJ0aWNpcGFudCk7dmFyIF9DaGF0PXJlcXVpcmUoJy4vQ2hhdCcpO3ZhciBfQ2hhdDI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ2hhdCk7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmope3JldHVybiBvYmomJm9iai5fX2VzTW9kdWxlP29iajp7ZGVmYXVsdDpvYmp9O31mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsQ29uc3RydWN0b3Ipe2lmKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3Rvcikpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpO319ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZixjYWxsKXtpZighc2VsZil7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTt9cmV0dXJuIGNhbGwmJih0eXBlb2YgY2FsbD09PSJvYmplY3QifHx0eXBlb2YgY2FsbD09PSJmdW5jdGlvbiIpP2NhbGw6c2VsZjt9ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLHN1cGVyQ2xhc3Mpe2lmKHR5cGVvZiBzdXBlckNsYXNzIT09ImZ1bmN0aW9uIiYmc3VwZXJDbGFzcyE9PW51bGwpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2Ygc3VwZXJDbGFzcyk7fXN1YkNsYXNzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MmJnN1cGVyQ2xhc3MucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6c3ViQ2xhc3MsZW51bWVyYWJsZTpmYWxzZSx3cml0YWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlfX0pO2lmKHN1cGVyQ2xhc3MpT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcyxzdXBlckNsYXNzKTpzdWJDbGFzcy5fX3Byb3RvX189c3VwZXJDbGFzczt9IC8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLyAvLyBTZXJ2aWNlIEZyYW1ld29yawovLyBVdGlscwovLyBJbnRlcm5hbHMKLyoqCiogSHlwZXJ0eSBDaGF0OwoqIEBhdXRob3IgVml0b3IgU2lsdmEgW3ZpdG9yLXQtc2lsdmFAdGVsZWNvbS5wdF0KKiBAdmVyc2lvbiAwLjEuMAoqL3ZhciBIeXBlcnR5Q2hhdD1mdW5jdGlvbihfRXZlbnRFbWl0dGVyKXtfaW5oZXJpdHMoSHlwZXJ0eUNoYXQsX0V2ZW50RW1pdHRlcik7ZnVuY3Rpb24gSHlwZXJ0eUNoYXQoaHlwZXJ0eVVSTCxidXMsY29uZmlndXJhdGlvbil7X2NsYXNzQ2FsbENoZWNrKHRoaXMsSHlwZXJ0eUNoYXQpO2lmKCFoeXBlcnR5VVJMKXRocm93IG5ldyBFcnJvcignVGhlIGh5cGVydHlVUkwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7aWYoIWJ1cyl0aHJvdyBuZXcgRXJyb3IoJ1RoZSBNaW5pQnVzIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpO2lmKCFjb25maWd1cmF0aW9uKXRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7dmFyIF90aGlzMj1fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLE9iamVjdC5nZXRQcm90b3R5cGVPZihIeXBlcnR5Q2hhdCkuY2FsbCh0aGlzLGh5cGVydHlVUkwsYnVzLGNvbmZpZ3VyYXRpb24pKTt2YXIgX3RoaXM9X3RoaXMyO3ZhciBzeW5jaGVyPW5ldyBfU3luY2hlci5TeW5jaGVyKGh5cGVydHlVUkwsYnVzLGNvbmZpZ3VyYXRpb24pO3ZhciBkb21haW49KDAsX3V0aWxzLmRpdmlkZVVSTCkoaHlwZXJ0eVVSTCkuZG9tYWluO3ZhciBoeXBlcnR5RGlzY292ZXJ5PW5ldyBfSHlwZXJ0eURpc2NvdmVyeTIuZGVmYXVsdChoeXBlcnR5VVJMLGJ1cyk7X3RoaXMuX29iamVjdERlc2NVUkw9J2h5cGVydHktY2F0YWxvZ3VlOi8vJytkb21haW4rJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hcy9Db21tdW5pY2F0aW9uJztfdGhpcy5faHlwZXJ0eVVSTD1oeXBlcnR5VVJMO190aGlzLl9zeW5jaGVyPXN5bmNoZXI7X3RoaXMuX2RvbWFpbj1kb21haW47X3RoaXMuX2h5cGVydHlEaXNjb3Zlcnk9aHlwZXJ0eURpc2NvdmVyeTtzeW5jaGVyLm9uTm90aWZpY2F0aW9uKGZ1bmN0aW9uKGV2ZW50KXtjb25zb2xlLmxvZygnTm90aWZpY2F0aW9uOiAnLGV2ZW50KTtfdGhpcy5fYXV0b1N1YnNjcmliZShldmVudC51cmwpO30pO3JldHVybiBfdGhpczI7fSAvKioKICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY3JlYXRlIGEgbmV3IEdyb3VwIENoYXQgcHJvdmlkaW5nIHRoZSBpZGVudGlmaWVyIG9mIHRoZSBHcm91cCB0byBiZSBub3RpZmllZC4KICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgICAgICAgICAgICAgY2hhdCBuYW1lCiAgICogQHBhcmFtICB7VVJMLlVzZXJVUkx9IFVzZXJVUkxMaXN0IExpc3Qgb2YgVXNlciBhbGxvd2VkCiAgICogQHJldHVybiB7UHJvbWlzZX0KICAgKi9fY3JlYXRlQ2xhc3MoSHlwZXJ0eUNoYXQsW3trZXk6J2NyZWF0ZScsdmFsdWU6ZnVuY3Rpb24gY3JlYXRlKG5hbWUscGFydGljaXBhbnRzKXt2YXIgX3RoaXM9dGhpczt2YXIgc3luY2hlcj1fdGhpcy5fc3luY2hlcjt2YXIgaHlwZXJ0eURpc2NvdmVyeT1fdGhpcy5faHlwZXJ0eURpc2NvdmVyeTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3QpeyAvLyBDcmVhdGUgb3duZXIgcGFydGljaXBhbnQKLy8gVE9ETzogY3JlYXRlIGFsbCBpbmZvcm1hdGlvbiB0byBjb21tdW5pY2F0aW9uOwpfY29tbXVuaWNhdGlvbi5jb21tdW5pY2F0aW9uT2JqZWN0Lm93bmVyPV90aGlzLl9oeXBlcnR5VVJMO19jb21tdW5pY2F0aW9uLmNvbW11bmljYXRpb25PYmplY3QubmFtZT1uYW1lO19jb21tdW5pY2F0aW9uLmNvbW11bmljYXRpb25PYmplY3QuaWQ9bmFtZTtfY29tbXVuaWNhdGlvbi5jb21tdW5pY2F0aW9uT2JqZWN0LnN0YXR1cz1fY29tbXVuaWNhdGlvbi5Db21tdW5pY2F0aW9uU3RhdHVzLk9QRU47X2NvbW11bmljYXRpb24uY29tbXVuaWNhdGlvbk9iamVjdC5zdGFydGluZ1RpbWU9bmV3IERhdGUoKS50b0pTT04oKTtfY29tbXVuaWNhdGlvbi5jb21tdW5pY2F0aW9uT2JqZWN0Lmxhc3RNb2RpZmllZD1fY29tbXVuaWNhdGlvbi5jb21tdW5pY2F0aW9uT2JqZWN0LnN0YXJ0aW5nVGltZTsgLy8gU2V0IHRoZSBvdGhlciBzdWJzY3JpcHRpb24gbGlrZSBhIHBhcnRpY2lwYW50Cl9wYXJ0aWNpcGFudDIuZGVmYXVsdC5oeXBlcnR5UmVzb3VyY2U9X3RoaXMuX2h5cGVydHlVUkw7X2NvbW11bmljYXRpb24uY29tbXVuaWNhdGlvbk9iamVjdC5wYXJ0aWNpcGFudHMucHVzaChfcGFydGljaXBhbnQyLmRlZmF1bHQpO2NvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gTWFwcGluZyBQYXJ0aWNwYW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLSBcbicpO190aGlzLl9tYXBwaW5nVXNlcihwYXJ0aWNpcGFudHMpLnRoZW4oZnVuY3Rpb24oaHlwZXJ0aWVzKXtyZXR1cm4gX3RoaXMuX2NyZWF0ZVN5bmNoZXIoaHlwZXJ0aWVzLF9jb21tdW5pY2F0aW9uLmNvbW11bmljYXRpb25PYmplY3QpO30pLmNhdGNoKGZ1bmN0aW9uKGh5cGVydGllcyl7cmV0dXJuIF90aGlzLl9jcmVhdGVTeW5jaGVyKGh5cGVydGllcyxfY29tbXVuaWNhdGlvbi5jb21tdW5pY2F0aW9uT2JqZWN0KTt9KS50aGVuKGZ1bmN0aW9uKGRhdGFPYmplY3RSZXBvcnRlcil7Y29uc29sZS5pbmZvKCczLiBSZXR1cm4gQ3JlYXRlIERhdGEgT2JqZWN0IFJlcG9ydGVyJyxkYXRhT2JqZWN0UmVwb3J0ZXIpO3ZhciBjaGF0PW5ldyBfQ2hhdDIuZGVmYXVsdChzeW5jaGVyLGh5cGVydHlEaXNjb3ZlcnksX3RoaXMuX2RvbWFpbik7Y2hhdC5kYXRhT2JqZWN0UmVwb3J0ZXI9ZGF0YU9iamVjdFJlcG9ydGVyO3Jlc29sdmUoY2hhdCk7fSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtyZWplY3QocmVhc29uKTt9KTt9KTt9fSx7a2V5Oidqb2luJyx2YWx1ZTpmdW5jdGlvbiBqb2luKHJlc291cmNlKXt2YXIgX3RoaXM9dGhpczt2YXIgc3luY2hlcj1fdGhpcy5fc3luY2hlcjtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe2NvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFN5bmNoZXIgc3Vic2NyaWJlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gXG4nKTtjb25zb2xlLmluZm8ocmVzb3VyY2UpO3N5bmNoZXIuc3Vic2NyaWJlKF90aGlzLl9vYmplY3REZXNjVVJMLHJlc291cmNlKS50aGVuKGZ1bmN0aW9uKGRhdGFPYmplY3RPYnNlcnZlcil7Y29uc29sZS5pbmZvKCdEYXRhIE9iamVjdCBPYnNlcnZlcjogJyxkYXRhT2JqZWN0T2JzZXJ2ZXIpO3ZhciBjaGF0PW5ldyBfQ2hhdDIuZGVmYXVsdChzeW5jaGVyLF90aGlzLl9oeXBlcnR5RGlzY292ZXJ5LF90aGlzLl9kb21haW4pO2NoYXQuZGF0YU9iamVjdE9ic2VydmVyPWRhdGFPYmplY3RPYnNlcnZlcjtyZXNvbHZlKGNoYXQpO30pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7cmVqZWN0KHJlYXNvbik7fSk7fSk7fX0se2tleTonX2F1dG9TdWJzY3JpYmUnLHZhbHVlOmZ1bmN0aW9uIF9hdXRvU3Vic2NyaWJlKHJlc291cmNlKXt2YXIgX3RoaXM9dGhpcztfdGhpcy5qb2luKHJlc291cmNlKS50aGVuKGZ1bmN0aW9uKGNoYXRHcm91cCl7X3RoaXMudHJpZ2dlcignY2hhdDpzdWJzY3JpYmUnLGNoYXRHcm91cCk7fSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtjb25zb2xlLmVycm9yKHJlYXNvbik7fSk7fX0se2tleTonX2NyZWF0ZVN5bmNoZXInLHZhbHVlOmZ1bmN0aW9uIF9jcmVhdGVTeW5jaGVyKGh5cGVydGllcyxjb21tdW5pY2F0aW9uKXt2YXIgX3RoaXM9dGhpczt2YXIgc3luY2hlcj1fdGhpcy5fc3luY2hlcjtjb25zb2xlLmluZm8oJ0hhdmUgJytoeXBlcnRpZXMubGVuZ3RoKycgcGFydGljaXBhbnRzOycpO2NvbnNvbGUuaW5mbygnV0l0aCBjb21tdW5pY2F0aW9uT2JqZWN0OiAnLGNvbW11bmljYXRpb24pO2NvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFN5bmNoZXIgQ3JlYXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gXG4nKTtyZXR1cm4gc3luY2hlci5jcmVhdGUoX3RoaXMuX29iamVjdERlc2NVUkwsaHlwZXJ0aWVzLGNvbW11bmljYXRpb24pO319LHtrZXk6J19tYXBwaW5nVXNlcicsdmFsdWU6ZnVuY3Rpb24gX21hcHBpbmdVc2VyKHVzZXJMaXN0KXt2YXIgX3RoaXM9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3ZhciBoeXBlcnRpZXM9W107dmFyIGNvdW50PTA7aWYodXNlckxpc3QubGVuZ3RoPT09MClyZWplY3QoaHlwZXJ0aWVzKTt2YXIgcmVzdWx0VXNlcnM9ZnVuY3Rpb24gcmVzdWx0VXNlcnMoKXtpZihjb3VudD09PXVzZXJMaXN0Lmxlbmd0aCl7Y29uc29sZS5pbmZvKCdIYXZlICcraHlwZXJ0aWVzLmxlbmd0aCsndXNlcnMgZm91bmQ7Jyk7cmVzb2x2ZShoeXBlcnRpZXMpO319O3ZhciBhY3RpdmVVc2Vycz1mdW5jdGlvbiBhY3RpdmVVc2Vycyh1c2VyKXtjb3VudCsrO2h5cGVydGllcy5wdXNoKHVzZXIuaHlwZXJ0eVVSTCk7cmVzdWx0VXNlcnMoKTt9O3ZhciBpbmFjdGl2ZVVzZXJzPWZ1bmN0aW9uIGluYWN0aXZlVXNlcnMoKXtjb3VudCsrO3Jlc3VsdFVzZXJzKCk7fTt1c2VyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHVzZXIpe2NvbnNvbGUubG9nKHVzZXIpO2lmKHVzZXIuZW1haWwubGVuZ3RoKXtyZXR1cm4gX3RoaXMuX2h5cGVydHlEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnR5UGVyVXNlcih1c2VyLmVtYWlsLHVzZXIuZG9tYWluKS50aGVuKGFjdGl2ZVVzZXJzKS5jYXRjaChpbmFjdGl2ZVVzZXJzKTt9fSk7fSk7fX1dKTtyZXR1cm4gSHlwZXJ0eUNoYXQ7fShfRXZlbnRFbWl0dGVyMy5kZWZhdWx0KTtmdW5jdGlvbiBhY3RpdmF0ZShoeXBlcnR5VVJMLGJ1cyxjb25maWd1cmF0aW9uKXtyZXR1cm4ge25hbWU6J0h5cGVydHlDaGF0JyxpbnN0YW5jZTpuZXcgSHlwZXJ0eUNoYXQoaHlwZXJ0eVVSTCxidXMsY29uZmlndXJhdGlvbil9O31tb2R1bGUuZXhwb3J0cz1leHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvRXZlbnRFbWl0dGVyIjo1LCIuLi91dGlscy91dGlscyI6NiwiLi9DaGF0IjoxLCIuL2NvbW11bmljYXRpb24iOjMsIi4vcGFydGljaXBhbnQiOjQsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSHlwZXJ0eURpc2NvdmVyeSI6Nywic2VydmljZS1mcmFtZXdvcmsvZGlzdC9TeW5jaGVyIjo4fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOnRydWV9KTsgLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovdmFyIENvbW11bmljYXRpb25TdGF0dXM9ZXhwb3J0cy5Db21tdW5pY2F0aW9uU3RhdHVzPXtPUEVOOidvcGVuJyxQRU5ESU5HOidwZW5kaW5nJyxDTE9TRUQ6J2Nsb3NlZCcsUEFVU0VEOidwYXVzZWQnLEZBSUxFRDonZmFpbGVkJ307dmFyIGNvbW11bmljYXRpb25PYmplY3Q9ZXhwb3J0cy5jb21tdW5pY2F0aW9uT2JqZWN0PXtpZDonJyxuYW1lOicnLG93bmVyOicnLHN0YXJ0aW5nVGltZTonJyxsYXN0TW9kaWZpZWQ6JycsZHVyYXRpb246Jycsc3RhdHVzOicnLHFvczonJyxwYXJ0aWNpcGFudHM6W119OwoKfSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JztPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOnRydWV9KTsgLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovdmFyIHBhcnRpY2lwYW50PXtzdGF0dXM6JycsaHlwZXJ0eVJlc291cmNlOicnLGlkZW50aXR5OicnfTtleHBvcnRzLmRlZmF1bHQ9cGFydGljaXBhbnQ7bW9kdWxlLmV4cG9ydHM9ZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywiX19lc01vZHVsZSIse3ZhbHVlOnRydWV9KTt2YXIgX2NyZWF0ZUNsYXNzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2k8cHJvcHMubGVuZ3RoO2krKyl7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlPWRlc2NyaXB0b3IuZW51bWVyYWJsZXx8ZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGU9dHJ1ZTtpZigidmFsdWUiIGluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcik7fX1yZXR1cm4gZnVuY3Rpb24oQ29uc3RydWN0b3IscHJvdG9Qcm9wcyxzdGF0aWNQcm9wcyl7aWYocHJvdG9Qcm9wcylkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKTtpZihzdGF0aWNQcm9wcylkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7fTt9KCk7ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTt9fSAvKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8gLyoqCiAqIEV2ZW50RW1pdHRlcgogKiBBbGwgY2xhc3NlcyB3aGljaCBleHRlbmRzIHRoaXMsIGNhbiBoYXZlIGFkZEV2ZW50TGlzdGVuZXIgYW5kIHRyaWdnZXIgZXZlbnRzOwogKi92YXIgRXZlbnRFbWl0dGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCl7X2NsYXNzQ2FsbENoZWNrKHRoaXMsRXZlbnRFbWl0dGVyKTt9X2NyZWF0ZUNsYXNzKEV2ZW50RW1pdHRlcixbe2tleToiYWRkRXZlbnRMaXN0ZW5lciIsIC8qKgogICAqIGFkZEV2ZW50TGlzdGVuZXIgbGlzdGVuIGZvciBhbiBldmVudFR5cGUKICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgZXZlbnRUeXBlIC0gbGlzdGVuaW5nIGZvciB0aGlzIHR5cGUgb2YgZXZlbnQKICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gICAgICAgY2IgICAgICAgIC0gY2FsbGJhY2sgZnVuY3Rpb24gd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBldmVudCBpdCBpcyBpbnZva2VkCiAgICovdmFsdWU6ZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsY2Ipe3ZhciBfdGhpcz10aGlzO190aGlzW2V2ZW50VHlwZV09Y2I7fSAvKioKICAgKiBJbnZva2UgdGhlIGV2ZW50VHlwZQogICAqIEBwYXJhbSAge3N0cmluZ30gZXZlbnRUeXBlIC0gZXZlbnQgd2lsbCBiZSBpbnZva2VkCiAgICogQHBhcmFtICB7b2JqZWN0fSBwYXJhbXMgLSBwYXJhbWV0ZXJzIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBhZGRFdmVudExpc3RlbmVyCiAgICovfSx7a2V5OiJ0cmlnZ2VyIix2YWx1ZTpmdW5jdGlvbiB0cmlnZ2VyKGV2ZW50VHlwZSxwYXJhbXMpe3ZhciBfdGhpcz10aGlzO2lmKF90aGlzW2V2ZW50VHlwZV0pe190aGlzW2V2ZW50VHlwZV0ocGFyYW1zKTt9fX1dKTtyZXR1cm4gRXZlbnRFbWl0dGVyO30oKTtleHBvcnRzLmRlZmF1bHQ9RXZlbnRFbWl0dGVyO21vZHVsZS5leHBvcnRzPWV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTp0cnVlfSk7ZXhwb3J0cy5kaXZpZGVVUkw9ZGl2aWRlVVJMO2V4cG9ydHMuZGVlcENsb25lPWRlZXBDbG9uZTtleHBvcnRzLmdldENvbmZpZz1nZXRDb25maWc7ZXhwb3J0cy5nZXRVc2VyTWVkaWE9Z2V0VXNlck1lZGlhO2V4cG9ydHMuc2VyaWFsaXplPXNlcmlhbGl6ZTtleHBvcnRzLmdldFRlbXBsYXRlPWdldFRlbXBsYXRlOyAvKioKICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqKi8gLy8ganNoaW50IGJyb3dzZXI6dHJ1ZSwganF1ZXJ5OiB0cnVlCi8vIGpzaGludCB2YXJzdG10OiB0cnVlCi8qIGdsb2JhbCBIYW5kbGViYXJzICovIC8qKgogKiBTdXBwb3J0IG1vZHVsZSB3aXRoIHNvbWUgZnVuY3Rpb25zIHdpbGwgYmUgdXNlZnVsCiAqIEBtb2R1bGUgdXRpbHMKICovIC8qKgogKiBAdHlwZWRlZiBkaXZpZGVVUkwKICogQHR5cGUgT2JqZWN0CiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBlIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZGVudGl0eSBUaGUgaWRlbnRpdHkgb2YgVVJMCiAqLyAvKioKICogRGl2aWRlIGFuIHVybCBpbiB0eXBlLCBkb21haW4gYW5kIGlkZW50aXR5CiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzCiAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwKICovZnVuY3Rpb24gZGl2aWRlVVJMKHVybCl7IC8vIGxldCByZSA9IC8oW2EtekEtWi1dKik/OlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9XC5bYS16XXsyLDZ9XGIpKihcL1tcL1xkXHdcLi1dKikqKD86W1w/XSkqKC4rKSovZ2k7CnZhciByZT0vKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naTt2YXIgc3Vic3Q9JyQxLCQyLCQzJzt2YXIgcGFydHM9dXJsLnJlcGxhY2UocmUsc3Vic3QpLnNwbGl0KCcsJyk7IC8vIElmIHRoZSB1cmwgaGFzIG5vIHByb3RvY29sLCB0aGUgZGVmYXVsdCBwcm90b2NvbCBzZXQgaXMgaHR0cHMKaWYocGFydHNbMF09PT11cmwpe3BhcnRzWzBdPSdodHRwcyc7cGFydHNbMV09dXJsO312YXIgcmVzdWx0PXt0eXBlOnBhcnRzWzBdLGRvbWFpbjpwYXJ0c1sxXSxpZGVudGl0eTpwYXJ0c1syXX07cmV0dXJuIHJlc3VsdDt9IC8qKgogKiBNYWtlIGEgQ09QWSBvZiB0aGUgb3JpZ2luYWwgZGF0YQogKiBAcGFyYW0gIHtPYmplY3R9ICBvYmogLSBvYmplY3QgdG8gYmUgY2xvbmVkCiAqIEByZXR1cm4ge09iamVjdH0KICovZnVuY3Rpb24gZGVlcENsb25lKG9iail7IC8vVE9ETzogc2ltcGxlIGJ1dCBpbmVmZmljaWVudCBKU09OIGRlZXAgY2xvbmUuLi4KaWYob2JqKXJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO30gLyoqCiAqIEdldCB0aGUgY29uZmlndXJhdGlvbiBmcm9tIGFuIGpzb24gZmlsZTsKICogQHBhcmFtICB7SlNPTk9iamVjdH0ganNvbkZpbGUKICogQHJldHVybiB7b2JqZWN0fQogKi9mdW5jdGlvbiBnZXRDb25maWcoSlNPTk9iamVjdCl7Y29uc29sZS5sb2coJ2RldmVsb3BtZW50Jyk7cmV0dXJuIEpTT05PYmplY3RbJ2RldmVsb3BtZW50J107fSAvKioKICogR2V0IFdlYlJUQyBBUEkgcmVzb3VyY2VzCiAqIEBwYXJhbSAge09iamVjdH0gICAgIG9wdGlvbnMgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGluZm9ybWF0aW9uIHRoYXQgcmVzb3VyY2VzIHdpbGwgYmUgdXNlZCAoY2FtZXJhLCBtaWMsIHJlc29sdXRpb24sIGV0Yyk7CiAqIEByZXR1cm4ge1Byb21pc2V9CiAqL2Z1bmN0aW9uIGdldFVzZXJNZWRpYShjb25zdHJhaW50cyl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihmdW5jdGlvbihtZWRpYVN0cmVhbSl7cmVzb2x2ZShtZWRpYVN0cmVhbSk7fSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtyZWplY3QocmVhc29uKTt9KTt9KTt9ZnVuY3Rpb24gc2VyaWFsaXplKCl7JC5mbi5zZXJpYWxpemVPYmplY3Q9ZnVuY3Rpb24oKXt2YXIgbz17fTt2YXIgYT10aGlzLnNlcmlhbGl6ZUFycmF5KCk7JC5lYWNoKGEsZnVuY3Rpb24oKXtpZihvW3RoaXMubmFtZV0hPT11bmRlZmluZWQpe2lmKCFvW3RoaXMubmFtZV0ucHVzaCl7b1t0aGlzLm5hbWVdPVtvW3RoaXMubmFtZV1dO31vW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlfHwnJyk7fWVsc2Uge29bdGhpcy5uYW1lXT10aGlzLnZhbHVlfHwnJzt9fSk7cmV0dXJuIG87fTskLmZuLnNlcmlhbGl6ZU9iamVjdEFycmF5PWZ1bmN0aW9uKCl7dmFyIG89e307dmFyIGE9dGhpcy5zZXJpYWxpemVBcnJheSgpOyQuZWFjaChhLGZ1bmN0aW9uKCl7aWYob1t0aGlzLm5hbWVdIT09dW5kZWZpbmVkKXtpZighb1t0aGlzLm5hbWVdLnB1c2gpe29bdGhpcy5uYW1lXT1bb1t0aGlzLm5hbWVdXTt9b1t0aGlzLm5hbWVdLnB1c2godGhpcy52YWx1ZXx8JycpO31lbHNlIHtpZighb1t0aGlzLm5hbWVdKW9bdGhpcy5uYW1lXT1bXTtvW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlfHwnJyk7fX0pO3JldHVybiBvO307fWZ1bmN0aW9uIGdldFRlbXBsYXRlKHBhdGgsc2NyaXB0KXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe2lmKEhhbmRsZWJhcnMudGVtcGxhdGVzPT09dW5kZWZpbmVkfHxIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXT09PXVuZGVmaW5lZCl7SGFuZGxlYmFycy50ZW1wbGF0ZXM9e307fWVsc2Uge3Jlc29sdmUoSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0pO312YXIgdGVtcGxhdGVGaWxlPSQuYWpheCh7dXJsOnBhdGgrJy5oYnMnLHN1Y2Nlc3M6ZnVuY3Rpb24gc3VjY2VzcyhkYXRhKXtIYW5kbGViYXJzLnRlbXBsYXRlc1tuYW1lXT1IYW5kbGViYXJzLmNvbXBpbGUoZGF0YSk7fSxmYWlsOmZ1bmN0aW9uIGZhaWwocmVhc29uKXtyZXR1cm4gcmVhc29uO319KTt2YXIgc2NyaXB0RmlsZT0kLmdldFNjcmlwdChzY3JpcHQpO3ZhciByZXF1ZXN0cz1bXTtpZihwYXRoKXJlcXVlc3RzLnB1c2godGVtcGxhdGVGaWxlKTtpZihzY3JpcHQpcmVxdWVzdHMucHVzaChzY3JpcHRGaWxlKTtQcm9taXNlLmFsbChyZXF1ZXN0cykudGhlbihmdW5jdGlvbihyZXN1bHQpe3Jlc29sdmUoSGFuZGxlYmFycy50ZW1wbGF0ZXNbbmFtZV0pO30pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7cmVqZWN0KHJlYXNvbik7fSk7fSk7fQoKfSx7fV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3IgSHlwZXJ0eURpc2NvdmVyeS5qcyAKLy8gdmVyc2lvbjogMC4yLjAKCiFmdW5jdGlvbihlKXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHI7cj0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsci5IeXBlcnR5RGlzY292ZXJ5PWUoKX19KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIGUocix0LG8pe2Z1bmN0aW9uIG4ocyx1KXtpZighdFtzXSl7aWYoIXJbc10pe3ZhciBhPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKHMsITApO2lmKGkpcmV0dXJuIGkocywhMCk7dmFyIGQ9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrcysiJyIpO3Rocm93IGQuY29kZT0iTU9EVUxFX05PVF9GT1VORCIsZH12YXIgZj10W3NdPXtleHBvcnRzOnt9fTtyW3NdWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciB0PXJbc11bMV1bZV07cmV0dXJuIG4odD90OmUpfSxmLGYuZXhwb3J0cyxlLHIsdCxvKX1yZXR1cm4gdFtzXS5leHBvcnRzfWZvcih2YXIgaT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxzPTA7czxvLmxlbmd0aDtzKyspbihvW3NdKTtyZXR1cm4gbn0oezE6W2Z1bmN0aW9uKGUscix0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49ZSgiLi9oeXBlcnR5LWRpc2NvdmVyeS9IeXBlcnR5RGlzY292ZXJ5IiksaT1vKG4pO3RbImRlZmF1bHQiXT1pWyJkZWZhdWx0Il0sci5leHBvcnRzPXRbImRlZmF1bHQiXX0seyIuL2h5cGVydHktZGlzY292ZXJ5L0h5cGVydHlEaXNjb3ZlcnkiOjJ9XSwyOltmdW5jdGlvbihlLHIsdCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG8oZSxyKXtpZighKGUgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUscil7Zm9yKHZhciB0PTA7dDxyLmxlbmd0aDt0Kyspe3ZhciBvPXJbdF07by5lbnVtZXJhYmxlPW8uZW51bWVyYWJsZXx8ITEsby5jb25maWd1cmFibGU9ITAsInZhbHVlImluIG8mJihvLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLmtleSxvKX19cmV0dXJuIGZ1bmN0aW9uKHIsdCxvKXtyZXR1cm4gdCYmZShyLnByb3RvdHlwZSx0KSxvJiZlKHIsbykscn19KCksaT1lKCIuLi91dGlscy91dGlscyIpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHIsdCl7byh0aGlzLGUpO3ZhciBuPXRoaXM7bi5tZXNzYWdlQnVzPXQsbi5kb21haW49KDAsaS5kaXZpZGVVUkwpKHIpLmRvbWFpbixuLmRpc2NvdmVyeVVSTD1yfXJldHVybiBuKGUsW3trZXk6ImRpc2NvdmVyRGF0YU9iamVjdFBlck5hbWUiLHZhbHVlOmZ1bmN0aW9uKGUscil7dmFyIHQ9dGhpcyxvPXZvaWQgMDtvPXI/cjp0LmRvbWFpbjt2YXIgbj17dHlwZToicmVhZCIsZnJvbTp0LmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIitvKyIvIixib2R5OntyZXNvdXJjZToiZGF0YU9iamVjdDovLyIrZX19O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlLHIpe3QubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShuLGZ1bmN0aW9uKHQpe3ZhciBvPXQuYm9keS52YWx1ZS51cmw7bz9lKG8pOnIoIkRhdGFPYmplY3QgbmFtZSBkb2VzIG5vdCBleGlzdCIpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eVBlclVzZXIiLHZhbHVlOmZ1bmN0aW9uKGUscil7dmFyIHQ9dGhpcyxvPXZvaWQgMDtvPXI/cjp0LmRvbWFpbjt2YXIgbj0idXNlcjovLyIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKCJAIikrMSxlLmxlbmd0aCkrIi8iK2Uuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCJAIikpLGk9e3R5cGU6InJlYWQiLGZyb206dC5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbysiLyIsYm9keTp7cmVzb3VyY2U6bn19O3JldHVybiBjb25zb2xlLmxvZygiTWVzc2FnZTogIixpLG8sbiksbmV3IFByb21pc2UoZnVuY3Rpb24ocixvKXt0Lm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygibWVzc2FnZSByZXBseSIsdCk7dmFyIG49dm9pZCAwLGk9dm9pZCAwLHM9dm9pZCAwLHU9dC5ib2R5LnZhbHVlO2ZvcihuIGluIHUpaWYodm9pZCAwIT09dVtuXS5sYXN0TW9kaWZpZWQpaWYodm9pZCAwPT09aSlpPW5ldyBEYXRlKHVbbl0ubGFzdE1vZGlmaWVkKSxzPW47ZWxzZXt2YXIgYT1uZXcgRGF0ZSh1W25dLmxhc3RNb2RpZmllZCk7aS5nZXRUaW1lKCk8YS5nZXRUaW1lKCkmJihpPWEscz1uKX1jb25zb2xlLmxvZygiTGFzdCBIeXBlcnR5OiAiLHMsaSk7dmFyIGQ9cztpZih2b2lkIDA9PT1kKXJldHVybiBvKCJVc2VyIEh5cGVydHkgbm90IGZvdW5kIik7dmFyIGY9e2lkOmUsZGVzY3JpcHRvcjp1W2RdLmRlc2NyaXB0b3IsaHlwZXJ0eVVSTDpkfTtjb25zb2xlLmxvZygiPT09PiBoeXBlcnR5RGlzY292ZXJ5IG1lc3NhZ2VCdW5kbGU6ICIsZikscihmKX0pfSl9fV0pLGV9KCk7dFsiZGVmYXVsdCJdPXMsci5leHBvcnRzPXRbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscyI6M31dLDM6W2Z1bmN0aW9uKGUscix0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbyhlKXt2YXIgcj0vKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naSx0PSIkMSwkMiwkMyIsbz1lLnJlcGxhY2Uocix0KS5zcGxpdCgiLCIpO29bMF09PT1lJiYob1swXT0iaHR0cHMiLG9bMV09ZSk7dmFyIG49e3R5cGU6b1swXSxkb21haW46b1sxXSxpZGVudGl0eTpvWzJdfTtyZXR1cm4gbn1mdW5jdGlvbiBuKGUpe3JldHVybiBlP0pTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpOnZvaWQgMH1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5kaXZpZGVVUkw9byx0LmRlZXBDbG9uZT1ufSx7fV19LHt9LFsxXSkoMSl9KTsKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKGdsb2JhbCl7Ci8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKLy8gRGlzdHJpYnV0aW9uIGZpbGUgZm9yIFN5bmNoZXIuanMgCi8vIHZlcnNpb246IDAuMi4wCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuU3luY2hlcj1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBvKHMsYSl7aWYoIW5bc10pe2lmKCF0W3NdKXt2YXIgdT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYSYmdSlyZXR1cm4gdShzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciBjPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyBjLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGN9dmFyIGw9bltzXT17ZXhwb3J0czp7fX07dFtzXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W3NdWzFdW2VdO3JldHVybiBvKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8ci5sZW5ndGg7cysrKW8ocltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQsbil7T2JqZWN0Lm9ic2VydmUmJiFBcnJheS5vYnNlcnZlJiZmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lLmdldE5vdGlmaWVyLHI9InBlcmZvcm1DaGFuZ2UiLG89Il9vcmlnaW5hbCIsaT0ic3BsaWNlIixzPXtwdXNoOmZ1bmN0aW9uIHUoZSl7dmFyIHQ9YXJndW1lbnRzLHM9dVtvXS5hcHBseSh0aGlzLHQpO3JldHVybiBuKHRoaXMpW3JdKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6cy10Lmxlbmd0aCxhZGRlZENvdW50OnQubGVuZ3RoLHJlbW92ZWQ6W119fSksc30sdW5zaGlmdDpmdW5jdGlvbiBjKGUpe3ZhciB0PWFyZ3VtZW50cyxzPWNbb10uYXBwbHkodGhpcyx0KTtyZXR1cm4gbih0aGlzKVtyXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OjAsYWRkZWRDb3VudDp0Lmxlbmd0aCxyZW1vdmVkOltdfX0pLHN9LHBvcDpmdW5jdGlvbiBsKCl7dmFyIGU9dGhpcy5sZW5ndGgsdD1sW29dLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMubGVuZ3RoIT09ZSYmbih0aGlzKVtyXShpLGZ1bmN0aW9uKCl7cmV0dXJue2luZGV4OnRoaXMubGVuZ3RoLGFkZGVkQ291bnQ6MCxyZW1vdmVkOlt0XX19LHRoaXMpLHR9LHNoaWZ0OmZ1bmN0aW9uIGYoKXt2YXIgZT10aGlzLmxlbmd0aCx0PWZbb10uY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5sZW5ndGghPT1lJiZuKHRoaXMpW3JdKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6MCxhZGRlZENvdW50OjAscmVtb3ZlZDpbdF19fSx0aGlzKSx0fSxzcGxpY2U6ZnVuY3Rpb24gZChlLHQpe3ZhciBzPWFyZ3VtZW50cyxhPWRbb10uYXBwbHkodGhpcyxzKTtyZXR1cm4oYS5sZW5ndGh8fHMubGVuZ3RoPjIpJiZuKHRoaXMpW3JdKGksZnVuY3Rpb24oKXtyZXR1cm57aW5kZXg6ZSxhZGRlZENvdW50OnMubGVuZ3RoLTIscmVtb3ZlZDphfX0sdGhpcyksYX19O2Zvcih2YXIgYSBpbiBzKXNbYV1bb109dC5wcm90b3R5cGVbYV0sdC5wcm90b3R5cGVbYV09c1thXTt0Lm9ic2VydmU9ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5vYnNlcnZlKHQsbixbImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsaV0pfSx0LnVub2JzZXJ2ZT1lLnVub2JzZXJ2ZX0oT2JqZWN0LEFycmF5KX0se31dLDI6W2Z1bmN0aW9uKGUsdCxuKXt3aW5kb3cuTXV0YXRpb25PYnNlcnZlcj13aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXJ8fGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dGhpcy5nPVtdLHRoaXMuaz1lfWZ1bmN0aW9uIG4oZSl7IWZ1bmN0aW9uIG4oKXt2YXIgcj1lLnRha2VSZWNvcmRzKCk7ci5sZW5ndGgmJmUuayhyLGUpLGUuZj1zZXRUaW1lb3V0KG4sdC5fcGVyaW9kKX0oKX1mdW5jdGlvbiByKHQpe3ZhciBuLHI9e3R5cGU6bnVsbCx0YXJnZXQ6bnVsbCxhZGRlZE5vZGVzOltdLHJlbW92ZWROb2RlczpbXSxwcmV2aW91c1NpYmxpbmc6bnVsbCxuZXh0U2libGluZzpudWxsLGF0dHJpYnV0ZU5hbWU6bnVsbCxhdHRyaWJ1dGVOYW1lc3BhY2U6bnVsbCxvbGRWYWx1ZTpudWxsfTtmb3IobiBpbiB0KXJbbl0hPT1lJiZ0W25dIT09ZSYmKHJbbl09dFtuXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuPWEoZSx0KTtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG8sdT1yLmxlbmd0aDt0LmEmJm4uYSYmaShyLGUsbi5hLHQuZCksKHQuYnx8dC5lKSYmKG89cyhyLGUsbix0KSksKG98fHIubGVuZ3RoIT09dSkmJihuPWEoZSx0KSl9fWZ1bmN0aW9uIGkodCxuLG8saSl7Zm9yKHZhciBzLGEsdT17fSxjPW4uYXR0cmlidXRlcyxsPWMubGVuZ3RoO2wtLTspcz1jW2xdLGE9cy5uYW1lLGkmJmlbYV09PT1lfHwocy52YWx1ZSE9PW9bYV0mJnQucHVzaChyKHt0eXBlOiJhdHRyaWJ1dGVzIix0YXJnZXQ6bixhdHRyaWJ1dGVOYW1lOmEsb2xkVmFsdWU6b1thXSxhdHRyaWJ1dGVOYW1lc3BhY2U6cy5uYW1lc3BhY2VVUkl9KSksdVthXT0hMCk7Zm9yKGEgaW4gbyl1W2FdfHx0LnB1c2gocih7dGFyZ2V0Om4sdHlwZToiYXR0cmlidXRlcyIsYXR0cmlidXRlTmFtZTphLG9sZFZhbHVlOm9bYV19KSl9ZnVuY3Rpb24gcyh0LG4sbyxzKXtmdW5jdGlvbiBhKGUsbixvLGEsdSl7dmFyIGw9ZS5sZW5ndGgtMTt1PS1+KChsLXUpLzIpO2Zvcih2YXIgZixkLHA7cD1lLnBvcCgpOylmPW9bcC5oXSxkPWFbcC5pXSxzLmImJnUmJk1hdGguYWJzKHAuaC1wLmkpPj1sJiYodC5wdXNoKHIoe3R5cGU6ImNoaWxkTGlzdCIsdGFyZ2V0Om4sYWRkZWROb2RlczpbZl0scmVtb3ZlZE5vZGVzOltmXSxuZXh0U2libGluZzpmLm5leHRTaWJsaW5nLHByZXZpb3VzU2libGluZzpmLnByZXZpb3VzU2libGluZ30pKSx1LS0pLHMuYSYmZC5hJiZpKHQsZixkLmEscy5kKSxzLmMmJjM9PT1mLm5vZGVUeXBlJiZmLm5vZGVWYWx1ZSE9PWQuYyYmdC5wdXNoKHIoe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpmfSkpLHMuZSYmYyhmLGQpfWZ1bmN0aW9uIGMobixvKXtmb3IodmFyIGQscCxiLGgsdix5PW4uY2hpbGROb2RlcyxfPW8uYixnPXkubGVuZ3RoLE89Xz9fLmxlbmd0aDowLGo9MCxtPTAsdz0wO2c+bXx8Tz53OyloPXlbbV0sdj0oYj1fW3ddKSYmYi5qLGg9PT12PyhzLmEmJmIuYSYmaSh0LGgsYi5hLHMuZCkscy5jJiZiLmMhPT1lJiZoLm5vZGVWYWx1ZSE9PWIuYyYmdC5wdXNoKHIoe3R5cGU6ImNoYXJhY3RlckRhdGEiLHRhcmdldDpofSkpLHAmJmEocCxuLHksXyxqKSxzLmUmJihoLmNoaWxkTm9kZXMubGVuZ3RofHxiLmImJmIuYi5sZW5ndGgpJiZjKGgsYiksbSsrLHcrKyk6KGw9ITAsZHx8KGQ9e30scD1bXSksaCYmKGRbYj11KGgpXXx8KGRbYl09ITAsLTE9PT0oYj1mKF8saCx3LCJqIikpP3MuYiYmKHQucHVzaChyKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpuLGFkZGVkTm9kZXM6W2hdLG5leHRTaWJsaW5nOmgubmV4dFNpYmxpbmcscHJldmlvdXNTaWJsaW5nOmgucHJldmlvdXNTaWJsaW5nfSkpLGorKyk6cC5wdXNoKHtoOm0saTpifSkpLG0rKyksdiYmdiE9PXlbbV0mJihkW2I9dSh2KV18fChkW2JdPSEwLC0xPT09KGI9Zih5LHYsbSkpP3MuYiYmKHQucHVzaChyKHt0eXBlOiJjaGlsZExpc3QiLHRhcmdldDpvLmoscmVtb3ZlZE5vZGVzOlt2XSxuZXh0U2libGluZzpfW3crMV0scHJldmlvdXNTaWJsaW5nOl9bdy0xXX0pKSxqLS0pOnAucHVzaCh7aDpiLGk6d30pKSx3KyspKTtwJiZhKHAsbix5LF8sail9dmFyIGw7cmV0dXJuIGMobixvKSxsfWZ1bmN0aW9uIGEoZSx0KXt2YXIgbj0hMDtyZXR1cm4gZnVuY3Rpb24gcihlKXt2YXIgbz17ajplfTtyZXR1cm4hdC5jfHwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGU/KHQuYSYmbiYmMT09PWUubm9kZVR5cGUmJihvLmE9bChlLmF0dHJpYnV0ZXMsZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5kJiYhdC5kW24ubmFtZV18fChlW24ubmFtZV09bi52YWx1ZSksZX0pKSxuJiYodC5ifHx0LmN8fHQuYSYmdC5lKSYmKG8uYj1jKGUuY2hpbGROb2RlcyxyKSksbj10LmUpOm8uYz1lLm5vZGVWYWx1ZSxvfShlKX1mdW5jdGlvbiB1KGUpe3RyeXtyZXR1cm4gZS5pZHx8KGUubW9faWQ9ZS5tb19pZHx8ZCsrKX1jYXRjaCh0KXt0cnl7cmV0dXJuIGUubm9kZVZhbHVlfWNhdGNoKG4pe3JldHVybiBkKyt9fX1mdW5jdGlvbiBjKGUsdCl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyluW3JdPXQoZVtyXSxyLGUpO3JldHVybiBufWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIG49e30scj0wO3I8ZS5sZW5ndGg7cisrKW49dChuLGVbcl0scixlKTtyZXR1cm4gbn1mdW5jdGlvbiBmKGUsdCxuLHIpe2Zvcig7bjxlLmxlbmd0aDtuKyspaWYoKHI/ZVtuXVtyXTplW25dKT09PXQpcmV0dXJuIG47cmV0dXJuLTF9dC5fcGVyaW9kPTMwLHQucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXthOiEhKHQuYXR0cmlidXRlc3x8dC5hdHRyaWJ1dGVGaWx0ZXJ8fHQuYXR0cmlidXRlT2xkVmFsdWUpLGI6ISF0LmNoaWxkTGlzdCxlOiEhdC5zdWJ0cmVlLGM6ISghdC5jaGFyYWN0ZXJEYXRhJiYhdC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpfSxpPXRoaXMuZyxzPTA7czxpLmxlbmd0aDtzKyspaVtzXS5tPT09ZSYmaS5zcGxpY2UocywxKTt0LmF0dHJpYnV0ZUZpbHRlciYmKHIuZD1sKHQuYXR0cmlidXRlRmlsdGVyLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGVbdF09ITAsZX0pKSxpLnB1c2goe206ZSxsOm8oZSxyKX0pLHRoaXMuZnx8bih0aGlzKX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD10aGlzLmcsbj0wO248dC5sZW5ndGg7bisrKXRbbl0ubChlKTtyZXR1cm4gZX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMuZz1bXSxjbGVhclRpbWVvdXQodGhpcy5mKSx0aGlzLmY9bnVsbH19O3ZhciBkPTE7cmV0dXJuIHR9KHZvaWQgMCl9LHt9XSwzOltmdW5jdGlvbihlLHQsbil7T2JqZWN0Lm9ic2VydmV8fGZ1bmN0aW9uKGUsdCxuLHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbyxpLHM9WyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLCJyZWNvbmZpZ3VyZSIsInNldFByb3RvdHlwZSIsInByZXZlbnRFeHRlbnNpb25zIl0sYT10LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09ZS5jYWxsKHQpfX0oZS5wcm90b3R5cGUudG9TdHJpbmcpLHU9dC5wcm90b3R5cGUuaW5kZXhPZj90LmluZGV4T2Z8fGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdC5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUsbixyKX06ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1ufHwwO3I8ZS5sZW5ndGg7cisrKWlmKGVbcl09PT10KXJldHVybiByO3JldHVybi0xfSxjPW4uTWFwIT09ciYmTWFwLnByb3RvdHlwZS5mb3JFYWNoP2Z1bmN0aW9uKCl7cmV0dXJuIG5ldyBNYXB9OmZ1bmN0aW9uKCl7dmFyIGU9W10sdD1bXTtyZXR1cm57c2l6ZTowLGhhczpmdW5jdGlvbih0KXtyZXR1cm4gdShlLHQpPi0xfSxnZXQ6ZnVuY3Rpb24obil7cmV0dXJuIHRbdShlLG4pXX0sc2V0OmZ1bmN0aW9uKG4scil7dmFyIG89dShlLG4pOy0xPT09bz8oZS5wdXNoKG4pLHQucHVzaChyKSx0aGlzLnNpemUrKyk6dFtvXT1yfSwiZGVsZXRlIjpmdW5jdGlvbihuKXt2YXIgcj11KGUsbik7cj4tMSYmKGUuc3BsaWNlKHIsMSksdC5zcGxpY2UociwxKSx0aGlzLnNpemUtLSl9LGZvckVhY2g6ZnVuY3Rpb24obil7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspbi5jYWxsKGFyZ3VtZW50c1sxXSx0W3JdLGVbcl0sdGhpcyl9fX0sbD1lLmdldE93blByb3BlcnR5TmFtZXM/ZnVuY3Rpb24oKXt2YXIgdD1lLmdldE93blByb3BlcnR5TmFtZXM7dHJ5e2FyZ3VtZW50cy5jYWxsZWV9Y2F0Y2gobil7dmFyIHI9KHQodSkuam9pbigiICIpKyIgIikucmVwbGFjZSgvcHJvdG90eXBlIHxsZW5ndGggfG5hbWUgL2csIiIpLnNsaWNlKDAsLTEpLnNwbGl0KCIgIik7ci5sZW5ndGgmJih0PWZ1bmN0aW9uKHQpe3ZhciBuPWUuZ2V0T3duUHJvcGVydHlOYW1lcyh0KTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdClmb3IodmFyIG8saT0wO2k8ci5sZW5ndGg7KShvPXUobixyW2krK10pKT4tMSYmbi5zcGxpY2UobywxKTtyZXR1cm4gbn0pfXJldHVybiB0fSgpOmZ1bmN0aW9uKHQpe3ZhciBuLHIsbz1bXTtpZigiaGFzT3duUHJvcGVydHkiaW4gdClmb3IobiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJm8ucHVzaChuKTtlbHNle3I9ZS5oYXNPd25Qcm9wZXJ0eTtmb3IobiBpbiB0KXIuY2FsbCh0LG4pJiZvLnB1c2gobil9cmV0dXJuIGEodCkmJm8ucHVzaCgibGVuZ3RoIiksb30sZj1lLmdldFByb3RvdHlwZU9mLGQ9ZS5kZWZpbmVQcm9wZXJ0aWVzJiZlLmdldE93blByb3BlcnR5RGVzY3JpcHRvcixwPW4ucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxuLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oKXt2YXIgZT0rbmV3IERhdGUsdD1lO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe24oKHQ9K25ldyBEYXRlKS1lKX0sMTcpfX0oKSxiPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1vLmdldChlKTtyPyh2KHIsZSksTyhlLHIsdCxuKSk6KHI9aChlKSxPKGUscix0LG4pLDE9PT1vLnNpemUmJnAoeSkpfSxoPWZ1bmN0aW9uKHQsbil7dmFyIHIsaT1sKHQpLHM9W10sYT0wLG49e2hhbmRsZXJzOmMoKSxmcm96ZW46ZS5pc0Zyb3plbj9lLmlzRnJvemVuKHQpOiExLGV4dGVuc2libGU6ZS5pc0V4dGVuc2libGU/ZS5pc0V4dGVuc2libGUodCk6ITAscHJvdG86ZiYmZih0KSxwcm9wZXJ0aWVzOmksdmFsdWVzOnMsbm90aWZpZXI6Zyh0LG4pfTtpZihkKWZvcihyPW4uZGVzY3JpcHRvcnM9W107YTxpLmxlbmd0aDspclthXT1kKHQsaVthXSksc1thXT10W2lbYSsrXV07ZWxzZSBmb3IoO2E8aS5sZW5ndGg7KXNbYV09dFtpW2ErK11dO3JldHVybiBvLnNldCh0LG4pLG59LHY9ZnVuY3Rpb24oKXt2YXIgdD1kP2Z1bmN0aW9uKGUsdCxuLHIsbyl7dmFyIGk9dC5wcm9wZXJ0aWVzW25dLHM9ZVtpXSxhPXQudmFsdWVzW25dLHU9dC5kZXNjcmlwdG9yc1tuXTsidmFsdWUiaW4gbyYmKGE9PT1zPzA9PT1hJiYxL2EhPT0xL3M6YT09PWF8fHM9PT1zKSYmKGooZSx0LHtuYW1lOmksdHlwZToidXBkYXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTphfSxyKSx0LnZhbHVlc1tuXT1zKSwhdS5jb25maWd1cmFibGV8fG8uY29uZmlndXJhYmxlJiZvLndyaXRhYmxlPT09dS53cml0YWJsZSYmby5lbnVtZXJhYmxlPT09dS5lbnVtZXJhYmxlJiZvLmdldD09PXUuZ2V0JiZvLnNldD09PXUuc2V0fHwoaihlLHQse25hbWU6aSx0eXBlOiJyZWNvbmZpZ3VyZSIsb2JqZWN0OmUsb2xkVmFsdWU6YX0sciksdC5kZXNjcmlwdG9yc1tuXT1vKX06ZnVuY3Rpb24oZSx0LG4scil7dmFyIG89dC5wcm9wZXJ0aWVzW25dLGk9ZVtvXSxzPXQudmFsdWVzW25dOyhzPT09aT8wPT09cyYmMS9zIT09MS9pOnM9PT1zfHxpPT09aSkmJihqKGUsdCx7bmFtZTpvLHR5cGU6InVwZGF0ZSIsb2JqZWN0OmUsb2xkVmFsdWU6c30sciksdC52YWx1ZXNbbl09aSl9LG49ZD9mdW5jdGlvbihlLG4scixvLGkpe2Zvcih2YXIgcyxhPW4ubGVuZ3RoO3ImJmEtLTspbnVsbCE9PW5bYV0mJihzPWQoZSxuW2FdKSxyLS0scz90KGUsbyxhLGkscyk6KGooZSxvLHtuYW1lOm5bYV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpvLnZhbHVlc1thXX0saSksby5wcm9wZXJ0aWVzLnNwbGljZShhLDEpLG8udmFsdWVzLnNwbGljZShhLDEpLG8uZGVzY3JpcHRvcnMuc3BsaWNlKGEsMSkpKX06ZnVuY3Rpb24oZSx0LG4scixvKXtmb3IodmFyIGk9dC5sZW5ndGg7biYmaS0tOyludWxsIT09dFtpXSYmKGooZSxyLHtuYW1lOnRbaV0sdHlwZToiZGVsZXRlIixvYmplY3Q6ZSxvbGRWYWx1ZTpyLnZhbHVlc1tpXX0sbyksci5wcm9wZXJ0aWVzLnNwbGljZShpLDEpLHIudmFsdWVzLnNwbGljZShpLDEpLG4tLSl9O3JldHVybiBmdW5jdGlvbihyLG8saSl7aWYoci5oYW5kbGVycy5zaXplJiYhci5mcm96ZW4pe3ZhciBzLGEsYyxwLGIsaCx2LHksXz1yLnZhbHVlcyxnPXIuZGVzY3JpcHRvcnMsTz0wO2lmKHIuZXh0ZW5zaWJsZSlpZihzPXIucHJvcGVydGllcy5zbGljZSgpLGE9cy5sZW5ndGgsYz1sKG8pLGcpe2Zvcig7TzxjLmxlbmd0aDspYj1jW08rK10scD11KHMsYikseT1kKG8sYiksLTE9PT1wPyhqKG8scix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLHIucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChvW2JdKSxnLnB1c2goeSkpOihzW3BdPW51bGwsYS0tLHQobyxyLHAsaSx5KSk7bihvLHMsYSxyLGkpLGUuaXNFeHRlbnNpYmxlKG8pfHwoci5leHRlbnNpYmxlPSExLGoobyxyLHt0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyIsb2JqZWN0Om99LGkpLHIuZnJvemVuPWUuaXNGcm96ZW4obykpfWVsc2V7Zm9yKDtPPGMubGVuZ3RoOyliPWNbTysrXSxwPXUocyxiKSxoPW9bYl0sLTE9PT1wPyhqKG8scix7bmFtZTpiLHR5cGU6ImFkZCIsb2JqZWN0Om99LGkpLHIucHJvcGVydGllcy5wdXNoKGIpLF8ucHVzaChoKSk6KHNbcF09bnVsbCxhLS0sdChvLHIscCxpKSk7bihvLHMsYSxyLGkpfWVsc2UgaWYoIXIuZnJvemVuKXtmb3IoO088cy5sZW5ndGg7TysrKWI9c1tPXSx0KG8scixPLGksZChvLGIpKTtlLmlzRnJvemVuKG8pJiYoci5mcm96ZW49ITApfWYmJih2PWYobyksdiE9PXIucHJvdG8mJihqKG8scix7dHlwZToic2V0UHJvdG90eXBlIixuYW1lOiJfX3Byb3RvX18iLG9iamVjdDpvLG9sZFZhbHVlOnIucHJvdG99KSxyLnByb3RvPXYpKX19fSgpLHk9ZnVuY3Rpb24oKXtvLnNpemUmJihvLmZvckVhY2godiksaS5mb3JFYWNoKF8pLHAoeSkpfSxfPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5jaGFuZ2VSZWNvcmRzO24ubGVuZ3RoJiYoZS5jaGFuZ2VSZWNvcmRzPVtdLHQobikpfSxnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MiYmKHQ9by5nZXQoZSkpLHQmJnQubm90aWZpZXJ8fHtub3RpZnk6ZnVuY3Rpb24odCl7dC50eXBlO3ZhciBuPW8uZ2V0KGUpO2lmKG4pe3ZhciByLGk9e29iamVjdDplfTtmb3IociBpbiB0KSJvYmplY3QiIT09ciYmKGlbcl09dFtyXSk7aihlLG4saSl9fSxwZXJmb3JtQ2hhbmdlOmZ1bmN0aW9uKHQsbil7aWYoInN0cmluZyIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgbm9uLXN0cmluZyBjaGFuZ2VUeXBlIik7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIG4pdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IHBlcmZvcm0gbm9uLWZ1bmN0aW9uIik7dmFyIGkscyxhPW8uZ2V0KGUpLHU9YXJndW1lbnRzWzJdLGM9dT09PXI/bigpOm4uY2FsbCh1KTtpZihhJiZ2KGEsZSx0KSxhJiZjJiYib2JqZWN0Ij09dHlwZW9mIGMpe3M9e29iamVjdDplLHR5cGU6dH07Zm9yKGkgaW4gYykib2JqZWN0IiE9PWkmJiJ0eXBlIiE9PWkmJihzW2ldPWNbaV0pO2ooZSxhLHMpfX19fSxPPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBvPWkuZ2V0KG4pO298fGkuc2V0KG4sbz17b2JzZXJ2ZWQ6YygpLGNoYW5nZVJlY29yZHM6W119KSxvLm9ic2VydmVkLnNldChlLHthY2NlcHRMaXN0OnIuc2xpY2UoKSxkYXRhOnR9KSx0LmhhbmRsZXJzLnNldChuLG8pfSxqPWZ1bmN0aW9uKGUsdCxuLHIpe3QuaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbz10Lm9ic2VydmVkLmdldChlKS5hY2NlcHRMaXN0Oygic3RyaW5nIiE9dHlwZW9mIHJ8fC0xPT09dShvLHIpKSYmdShvLG4udHlwZSk+LTEmJnQuY2hhbmdlUmVjb3Jkcy5wdXNoKG4pfSl9O289YygpLGk9YygpLGUub2JzZXJ2ZT1mdW5jdGlvbih0LG4sbyl7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdCYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IG9ic2VydmUgbm9uLW9iamVjdCIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBuKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO2lmKGUuaXNGcm96ZW4mJmUuaXNGcm96ZW4obikpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0Lm9ic2VydmUgY2Fubm90IGRlbGl2ZXIgdG8gYSBmcm96ZW4gZnVuY3Rpb24gb2JqZWN0Iik7aWYobz09PXIpbz1zO2Vsc2UgaWYoIW98fCJvYmplY3QiIT10eXBlb2Ygbyl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGlyZCBhcmd1bWVudCB0byBPYmplY3Qub2JzZXJ2ZSBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ3MuIik7cmV0dXJuIGIodCxuLG8pLHR9LGUudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7aWYobnVsbD09PWV8fCJvYmplY3QiIT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LnVub2JzZXJ2ZSBjYW5ub3QgdW5vYnNlcnZlIG5vbi1vYmplY3QiKTtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QudW5vYnNlcnZlIGNhbm5vdCBkZWxpdmVyIHRvIG5vbi1mdW5jdGlvbiIpO3ZhciBuLHI9aS5nZXQodCk7cmV0dXJuIHImJihuPXIub2JzZXJ2ZWQuZ2V0KGUpKSYmKHIub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3YoZS5kYXRhLHQpfSkscChmdW5jdGlvbigpe18ocix0KX0pLDE9PT1yLm9ic2VydmVkLnNpemUmJnIub2JzZXJ2ZWQuaGFzKGUpP2lbImRlbGV0ZSJdKHQpOnIub2JzZXJ2ZWRbImRlbGV0ZSJdKGUpLDE9PT1uLmRhdGEuaGFuZGxlcnMuc2l6ZT9vWyJkZWxldGUiXShlKTpuLmRhdGEuaGFuZGxlcnNbImRlbGV0ZSJdKHQpKSxlfSxlLmdldE5vdGlmaWVyPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10fHwib2JqZWN0IiE9dHlwZW9mIHQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5nZXROb3RpZmllciBjYW5ub3QgZ2V0Tm90aWZpZXIgbm9uLW9iamVjdCIpO3JldHVybiBlLmlzRnJvemVuJiZlLmlzRnJvemVuKHQpP251bGw6Zyh0KX0sZS5kZWxpdmVyQ2hhbmdlUmVjb3Jkcz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3QuZGVsaXZlckNoYW5nZVJlY29yZHMgY2Fubm90IGRlbGl2ZXIgdG8gbm9uLWZ1bmN0aW9uIik7dmFyIHQ9aS5nZXQoZSk7dCYmKHQub2JzZXJ2ZWQuZm9yRWFjaChmdW5jdGlvbihlLHQpe3YoZS5kYXRhLHQpfSksXyh0LGUpKX19KE9iamVjdCxBcnJheSx0aGlzKX0se31dLDQ6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksbi5EYXRhT2JqZWN0T2JzZXJ2ZXI9bi5EYXRhT2JqZWN0UmVwb3J0ZXI9bi5TeW5jaGVyPXZvaWQgMCxlKCJtdXRhdGlvbm9ic2VydmVyLXNoaW0iKSxlKCJvYmplY3Qub2JzZXJ2ZSIpLGUoImFycmF5Lm9ic2VydmUiKTt2YXIgbz1lKCIuL3N5bmNoZXIvU3luY2hlciIpLGk9cihvKSxzPWUoIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiKSxhPXIocyksdT1lKCIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIiksYz1yKHUpO24uU3luY2hlcj1pWyJkZWZhdWx0Il0sbi5EYXRhT2JqZWN0UmVwb3J0ZXI9YVsiZGVmYXVsdCJdLG4uRGF0YU9iamVjdE9ic2VydmVyPWNbImRlZmF1bHQiXX0seyIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIjo3LCIuL3N5bmNoZXIvRGF0YU9iamVjdFJlcG9ydGVyIjo4LCIuL3N5bmNoZXIvU3luY2hlciI6MTEsImFycmF5Lm9ic2VydmUiOjEsIm11dGF0aW9ub2JzZXJ2ZXItc2hpbSI6Miwib2JqZWN0Lm9ic2VydmUiOjN9XSw1OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxzPWUoIi4vU3luY09iamVjdCIpLGE9cihzKSx1PWUoIi4vRGF0YU9iamVjdENoaWxkIiksYz1yKHUpLGw9ZSgiLi4vdXRpbHMvdXRpbHMuanMiKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4scixpLHMsdSl7byh0aGlzLGUpO3ZhciBjPXRoaXM7Yy5fc3luY2hlcj10LGMuX3VybD1uLGMuX3NjaGVtYT1yLGMuX3N0YXR1cz1pLGMuX3N5bmNPYmo9bmV3IGFbImRlZmF1bHQiXShzKSxjLl9jaGlsZHJlbnM9dSxjLl92ZXJzaW9uPTAsYy5fY2hpbGRJZD0wLGMuX2NoaWxkcmVuT2JqZWN0cz17fSxjLl9jaGlsZHJlbkxpc3RlbmVycz1bXSxjLl9vd25lcj10Ll9vd25lcixjLl9idXM9dC5fYnVzfXJldHVybiBpKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcyxuPXQuX3VybCsiL2NoaWxkcmVuLyI7dC5fY2hpbGRyZW5zJiZ0Ll9jaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbz1uK3IsaT10Ll9idXMuYWRkTGlzdGVuZXIobyxmdW5jdGlvbihuKXtpZihuLmZyb20hPT1lLl9vd25lcilzd2l0Y2goY29uc29sZS5sb2coIkRhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAiLG4pLG4udHlwZSl7Y2FzZSJjcmVhdGUiOnQuX29uQ2hpbGRyZW5DcmVhdGUobik7YnJlYWs7Y2FzZSJkZWxldGUiOmNvbnNvbGUubG9nKG4pO2JyZWFrO2RlZmF1bHQ6dC5fY2hhbmdlQ2hpbGRyZW4obil9fSk7dC5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KSxPYmplY3Qua2V5cyhlLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hpbGRyZW5PYmplY3RzW3RdLl9yZWxlYXNlTGlzdGVuZXJzKCl9KX19LHtrZXk6InBhdXNlIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJyZXN1bWUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InN0b3AiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6ImFkZENoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7bi5fY2hpbGRJZCsrO3ZhciByPW4uX293bmVyKyIjIituLl9jaGlsZElkLG89bi5fdXJsKyIvY2hpbGRyZW4vIitlLGk9e3R5cGU6ImNyZWF0ZSIsZnJvbTpuLl9vd25lcix0bzpvLGJvZHk6e3Jlc291cmNlOnIsdmFsdWU6dH19O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXt2YXIgcz1uLl9idXMucG9zdE1lc3NhZ2UoaSk7Y29uc29sZS5sb2coImNyZWF0ZS1yZXBvcnRlci1jaGlsZCggIituLl9vd25lcisiICk6ICIsaSk7dmFyIGE9bmV3IGNbImRlZmF1bHQiXShuLHIsdCxuLl9vd25lcixzKTthLm9uQ2hhbmdlKGZ1bmN0aW9uKGUpe24uX29uQ2hhbmdlKGUse3BhdGg6byxjaGlsZElkOnJ9KX0pLG4uX2NoaWxkcmVuT2JqZWN0c1tyXT1hLGUoYSl9KX19LHtrZXk6Im9uQWRkQ2hpbGRyZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyPWV9fSx7a2V5OiJfb25DaGlsZHJlbkNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuYm9keS5yZXNvdXJjZTtjb25zb2xlLmxvZygiY3JlYXRlLW9ic2VydmVyLWNoaWxkKCAiK3QuX293bmVyKyIgKTogIixlKTt2YXIgcj1uZXcgY1siZGVmYXVsdCJdKHQsbixlLmJvZHkudmFsdWUpO3QuX2NoaWxkcmVuT2JqZWN0c1tuXT1yLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsc291cmNlOnQuX293bmVyfX0pfSk7dmFyIG89e3R5cGU6ZS50eXBlLGZyb206ZS5mcm9tLHVybDplLnRvLHZhbHVlOmUuYm9keS52YWx1ZSxjaGlsZElkOm4saWRlbnRpdHk6ZS5ib2R5LmlkVG9rZW59O3QuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiYoY29uc29sZS5sb2coIkFERC1DSElMRFJFTi1FVkVOVDogIixvKSx0Ll9vbkFkZENoaWxkcmVuSGFuZGxlcihvKSl9fSx7a2V5OiJfb25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcztpZihuLl92ZXJzaW9uKyssIm9uIj09PW4uX3N0YXR1cyl7dmFyIHI9e3R5cGU6InVwZGF0ZSIsZnJvbTpuLl91cmwsdG86bi5fdXJsKyIvY2hhbmdlcyIsYm9keTp7dmVyc2lvbjpuLl92ZXJzaW9uLHNvdXJjZTpuLl9vd25lcixhdHRyaWJ1dGU6ZS5maWVsZH19O2Uub1R5cGU9PT1zLk9iamVjdFR5cGUuT0JKRUNUP2UuY1R5cGUhPT1zLkNoYW5nZVR5cGUuUkVNT1ZFJiYoci5ib2R5LnZhbHVlPWUuZGF0YSk6KHIuYm9keS5hdHRyaWJ1dGVUeXBlPWUub1R5cGUsci5ib2R5LnZhbHVlPWUuZGF0YSxlLmNUeXBlIT09cy5DaGFuZ2VUeXBlLlVQREFURSYmKHIuYm9keS5vcGVyYXRpb249ZS5jVHlwZSkpLHQmJihyLnRvPXQucGF0aCxyLmJvZHkucmVzb3VyY2U9dC5jaGlsZElkKSxuLl9idXMucG9zdE1lc3NhZ2Uocil9fX0se2tleToiX2NoYW5nZU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2lmKG4uX3ZlcnNpb24rMT09PXQuYm9keS52ZXJzaW9uKXtuLl92ZXJzaW9uKys7dmFyIHI9dC5ib2R5LmF0dHJpYnV0ZSxvPSgwLGwuZGVlcENsb25lKSh0LmJvZHkudmFsdWUpLGk9ZS5maW5kQmVmb3JlKHIpO2lmKHQuYm9keS5hdHRyaWJ1dGVUeXBlPT09cy5PYmplY3RUeXBlLkFSUkFZKWlmKHQuYm9keS5vcGVyYXRpb249PT1zLkNoYW5nZVR5cGUuQUREKXt2YXIgYT1pLm9iaix1PWkubGFzdDtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGEsW3UsMF0uY29uY2F0KG8pKX1lbHNlIGlmKHQuYm9keS5vcGVyYXRpb249PT1zLkNoYW5nZVR5cGUuUkVNT1ZFKXt2YXIgYz1pLm9iaixmPWkubGFzdDtjLnNwbGljZShmLG8pfWVsc2UgaS5vYmpbaS5sYXN0XT1vO2Vsc2UgdC5ib2R5LnZhbHVlP2kub2JqW2kubGFzdF09bzpkZWxldGUgaS5vYmpbaS5sYXN0XX1lbHNlIGNvbnNvbGUubG9nKCJVTlNZTkNIUk9OSVpFRCBWRVJTSU9OOiAoZGF0YSA9PiAiK24uX3ZlcnNpb24rIiwgbXNnID0+ICIrdC5ib2R5LnZlcnNpb24rIikiKX19LHtrZXk6Il9jaGFuZ2VDaGlsZHJlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztjb25zb2xlLmxvZygiQ2hhbmdlIGNoaWxkcmVuOiAiLHQuX293bmVyLGUpO3ZhciBuPWUuYm9keS5yZXNvdXJjZSxyPXQuX2NoaWxkcmVuT2JqZWN0c1tuXTtyP3QuX2NoYW5nZU9iamVjdChyLl9zeW5jT2JqLGUpOmNvbnNvbGUubG9nKCJObyBjaGlsZHJlbiBmb3VuZCBmb3I6ICIsbil9fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2hlbWF9fSx7a2V5OiJzdGF0dXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0dXN9fSx7a2V5OiJkYXRhIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX0se2tleToiY2hpbGRyZW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5PYmplY3RzfX1dKSxlfSgpO25bImRlZmF1bHQiXT1mLHQuZXhwb3J0cz1uWyJkZWZhdWx0Il19LHsiLi4vdXRpbHMvdXRpbHMuanMiOjEyLCIuL0RhdGFPYmplY3RDaGlsZCI6NiwiLi9TeW5jT2JqZWN0IjoxMH1dLDY6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLHM9ZSgiLi9TeW5jT2JqZWN0IiksYT1yKHMpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixyLGkscyl7byh0aGlzLGUpO3ZhciB1PXRoaXM7dS5fcGFyZW50PXQsdS5fY2hpbGRJZD1uLHUuX293bmVyPWksdS5fbXNnSWQ9cyx1Ll9zeW5jT2JqPW5ldyBhWyJkZWZhdWx0Il0ociksdS5fYnVzPXQuX2J1cyx1Ll9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybiBpKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX293bmVyJiYoZS5fbGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX293bmVyLGZ1bmN0aW9uKHQpeyJyZXNwb25zZSI9PT10LnR5cGUmJnQuaWQ9PT1lLl9tc2dJZCYmKGNvbnNvbGUubG9nKCJEYXRhT2JqZWN0Q2hpbGQub25SZXNwb25zZToiLHQpLGUuX29uUmVzcG9uc2UodCkpfSkpfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lciYmZS5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztkZWxldGUgZS5fcGFyZW50Ll9jaGlsZHJlbltlLl9jaGlsZElkXSxlLl9yZWxlYXNlTGlzdGVuZXJzKCl9fSx7a2V5OiJvbkNoYW5nZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uKHQpe2UodCl9KX19LHtrZXk6Im9uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5OiJfb25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXt0eXBlOmUudHlwZSx1cmw6ZS5ib2R5LnNvdXJjZSxjb2RlOmUuYm9keS5jb2RlfTt0Ll9vblJlc3BvbnNlSGFuZGxlciYmdC5fb25SZXNwb25zZUhhbmRsZXIobil9fSx7a2V5OiJjaGlsZElkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRJZH19LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fV0pLGV9KCk7blsiZGVmYXVsdCJdPXUsdC5leHBvcnRzPW5bImRlZmF1bHQiXX0seyIuL1N5bmNPYmplY3QiOjEwfV0sNzpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBpKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hdHx8Im9iamVjdCIhPXR5cGVvZiB0JiYiZnVuY3Rpb24iIT10eXBlb2YgdD9lOnR9ZnVuY3Rpb24gcyhlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrdHlwZW9mIHQpO2UucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk6ZS5fX3Byb3RvX189dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLHU9ZnVuY3Rpb24gaChlLHQsbil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpO2lmKHZvaWQgMD09PXIpe3ZhciBvPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PW8/dm9pZCAwOmgobyx0LG4pfWlmKCJ2YWx1ZSJpbiByKXJldHVybiByLnZhbHVlO3ZhciBpPXIuZ2V0O2lmKHZvaWQgMCE9PWkpcmV0dXJuIGkuY2FsbChuKX0sYz1lKCIuL0RhdGFPYmplY3QiKSxsPXIoYyksZj1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGQ9cihmKSxwPXtBTlk6ImFueSIsU1RBUlQ6InN0YXJ0IixFWEFDVDoiZXhhY3QifSxiPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxuLHIscyxhLHUsYyl7byh0aGlzLHQpO3ZhciBsPWkodGhpcyxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkuY2FsbCh0aGlzLGUsbixyLHMsYS5kYXRhLHUpKSxmPWw7cmV0dXJuIGYuX3ZlcnNpb249YyxmLl9maWx0ZXJzPXt9LGYuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtmLl9vbkZpbHRlcihlKX0pLE9iamVjdC5rZXlzKGEuY2hpbGRyZW5zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWEuY2hpbGRyZW5zW2VdO2YuX2NoaWxkcmVuT2JqZWN0c1tlXT1uZXcgZFsiZGVmYXVsdCJdKGYsZSx0KX0pLGYuX2FsbG9jYXRlTGlzdGVuZXJzKCksbH1yZXR1cm4gcyh0LGUpLGEodCxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3UoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiX2FsbG9jYXRlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCsiL2NoYW5nZXMiLGZ1bmN0aW9uKHQpeyJ1cGRhdGUiPT09dC50eXBlJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VPYmplY3QoZS5fc3luY09iaix0KSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3UoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiX3JlbGVhc2VMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF19fSx7a2V5OiJ1bnN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9vYnNlcnZlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWUscj17dHlwZTpwLkVYQUNULGNhbGxiYWNrOnR9LG89ZS5pbmRleE9mKCIqIik7bz09PWUubGVuZ3RoLTEmJigwPT09bz9yLnR5cGU9cC5BTlk6KHIudHlwZT1wLlNUQVJULG49ZS5zdWJzdHIoMCxlLmxlbmd0aC0xKSkpLHRoaXMuX2ZpbHRlcnNbbl09cn19LHtrZXk6Il9vbkZpbHRlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyh0Ll9maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3ZhciByPXQuX2ZpbHRlcnNbbl07ci50eXBlPT09cC5BTlk/ci5jYWxsYmFjayhlKTpyLnR5cGU9PT1wLlNUQVJUPzA9PT1lLmZpZWxkLmluZGV4T2YobikmJnIuY2FsbGJhY2soZSk6ci50eXBlPT09cC5FWEFDVCYmZS5maWVsZD09PW4mJnIuY2FsbGJhY2soZSl9KX19XSksdH0obFsiZGVmYXVsdCJdKTtuWyJkZWZhdWx0Il09Yix0LmV4cG9ydHM9blsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdCI6NSwiLi9EYXRhT2JqZWN0Q2hpbGQiOjZ9XSw4OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIGkoZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiF0fHwib2JqZWN0IiE9dHlwZW9mIHQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6dH1mdW5jdGlvbiBzKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkobiwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsInZhbHVlImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxyJiZlKHQsciksdH19KCksdT1mdW5jdGlvbiBwKGUsdCxuKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCk7aWYodm9pZCAwPT09cil7dmFyIG89T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09bz92b2lkIDA6cChvLHQsbil9aWYoInZhbHVlImluIHIpcmV0dXJuIHIudmFsdWU7dmFyIGk9ci5nZXQ7aWYodm9pZCAwIT09aSlyZXR1cm4gaS5jYWxsKG4pfSxjPWUoIi4vRGF0YU9iamVjdCIpLGw9cihjKSxmPWUoIi4uL3V0aWxzL3V0aWxzLmpzIiksZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsbixyLHMsYSx1KXtvKHRoaXMsdCk7dmFyIGM9aSh0aGlzLE9iamVjdC5nZXRQcm90b3R5cGVPZih0KS5jYWxsKHRoaXMsZSxuLHIscyxhLHUpKSxsPWM7cmV0dXJuIGwuX3N1YnNjcmlwdGlvbnM9e30sbC5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItIituKyItU0VORDogIixlKSxsLl9vbkNoYW5nZShlKX0pLGwuX2FsbG9jYXRlTGlzdGVuZXJzKCksY31yZXR1cm4gcyh0LGUpLGEodCxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3UoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiX2FsbG9jYXRlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fcmVzcG9uc2VMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpeyJyZXNwb25zZSI9PT10LnR5cGUmJmUuX29uUmVzcG9uc2UodCl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3UoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiX3JlbGVhc2VMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9yZXNwb25zZUxpc3RlbmVyLnJlbW92ZSgpfX0se2tleToiaW52aXRlT2JzZXJ2ZXJzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49e3R5cGU6ImNyZWF0ZSIsZnJvbTp0Ll9zeW5jaGVyLl9vd25lcix0bzp0Ll9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6dC5fdXJsLHNjaGVtYTp0Ll9zY2hlbWEsdmFsdWU6dC5fc3luY09iai5kYXRhLGF1dGhvcmlzZTplfX07dC5fYnVzLnBvc3RNZXNzYWdlKG4pfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dHlwZToiZGVsZXRlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLURFTEVURTogIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fcmVwb3J0ZXJzW2UuX3VybF0pfSl9fSx7a2V5OiJvblN1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyPWV9fSx7a2V5OiJvblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleToiX29uRm9yd2FyZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztzd2l0Y2goY29uc29sZS5sb2coIkRhdGFPYmplY3RSZXBvcnRlci1SQ1Y6ICIsZSksZS5ib2R5LnR5cGUpe2Nhc2Uic3Vic2NyaWJlIjp0Ll9vblN1YnNjcmliZShlKTticmVhaztjYXNlInVuc3Vic2NyaWJlIjp0Ll9vblVuU3Vic2NyaWJlKGUpfX19LHtrZXk6Il9vblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuYm9keS5mcm9tLHI9e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOm4sYWNjZXB0OmZ1bmN0aW9uKCl7dmFyIHI9e3VybDpuLHN0YXR1czoib24ifTt0Ll9zdWJzY3JpcHRpb25zW25dPXI7dmFyIG89e307cmV0dXJuIE9iamVjdC5rZXlzKHQuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj10Ll9jaGlsZHJlbk9iamVjdHNbZV0uZGF0YTtvW2VdPSgwLGYuZGVlcENsb25lKShuKX0pLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCxzY2hlbWE6dC5fc2NoZW1hLHZlcnNpb246dC5fdmVyc2lvbix2YWx1ZTp7ZGF0YTooMCxmLmRlZXBDbG9uZSkodC5kYXRhKSxjaGlsZHJlbnM6b319fSkscn0scmVqZWN0OmZ1bmN0aW9uKG4pe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMyxkZXNjOm59fSl9fTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiU1VCU0NSSVBUSU9OLUVWRU5UOiAiLHIpLHQuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihyKSl9fSx7a2V5OiJfb25VblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuYm9keS5mcm9tLHI9dC5fc3Vic2NyaXB0aW9uc1tuXTtkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1tuXTt2YXIgbz17dHlwZTplLmJvZHkudHlwZSx1cmw6bixvYmplY3Q6cn07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlVOLVNVQlNDUklQVElPTi1FVkVOVDogIixvKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobykpfX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxjb2RlOmUuYm9keS5jb2RlfTt0Ll9vblJlc3BvbnNlSGFuZGxlciYmKGNvbnNvbGUubG9nKCJSRVNQT05TRS1FVkVOVDogIixuKSx0Ll9vblJlc3BvbnNlSGFuZGxlcihuKSl9fSx7a2V5OiJzdWJzY3JpcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uc319XSksdH0obFsiZGVmYXVsdCJdKTtuWyJkZWZhdWx0Il09ZCx0LmV4cG9ydHM9blsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMiwiLi9EYXRhT2JqZWN0Ijo1fV0sOTpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpLGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixvLGkpe3IodGhpcyxlKTt2YXIgcz10aGlzO3MuX293bmVyPXQscy5fdXJsPW4scy5fYnVzPW8scy5fY2hpbGRyZW49aSxzLl9jaGFuZ2VzPVtdLHMuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuIG8oZSxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YVByb3Zpc2lvbmFsLSIrZS5fdXJsKyItUkNWOiAiLHQpLGUuX2NoYW5nZXMucHVzaCh0KX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImFwcGx5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2NoYW5nZXMuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jaGFuZ2VPYmplY3QoZS5fc3luY09iaix0KX0pfX0se2tleToiY2hpbGRyZW4iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbn19XSksZX0oKTtuWyJkZWZhdWx0Il09aSx0LmV4cG9ydHM9blsiZGVmYXVsdCJdfSx7fV0sMTA6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxuLk9iamVjdFR5cGU9bi5DaGFuZ2VUeXBlPXZvaWQgMDt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxpPWUoIi4uL3V0aWxzL3V0aWxzLmpzIikscz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7cih0aGlzLGUpO3ZhciBuPXRoaXM7bi5fb2JzZXJ2ZXJzPVtdLG4uX2ZpbHRlcnM9e30sdD9uLl9kYXRhPSgwLGkuZGVlcENsb25lKSh0KTpuLl9kYXRhPXt9LG4uX2ludGVybmFsT2JzZXJ2ZShuZXcgYSxuLl9kYXRhKX1yZXR1cm4gbyhlLFt7a2V5OiJvYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vYnNlcnZlcnMucHVzaChlKX19LHtrZXk6ImZpbmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoIi4iKTtyZXR1cm4gdGhpcy5fZmluZFdpdGhTcGxpdCh0KX19LHtrZXk6ImZpbmRCZWZvcmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49ZS5zcGxpdCgiLiIpO3JldHVybiB0Lmxhc3Q9bi5wb3AoKSx0Lm9iaj10aGlzLl9maW5kV2l0aFNwbGl0KG4pLHR9fSx7a2V5OiJfZmluZFdpdGhTcGxpdCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Q9dFtlXX0pLHR9fSx7a2V5OiJfZmlyZUV2ZW50Iix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt0KGUpfSl9fSx7a2V5OiJfaXNPYnNlcnZhYmxlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb25zdHJ1Y3Rvcj09PU9iamVjdHx8ZS5jb25zdHJ1Y3Rvcj09PUFycmF5fX0se2tleToiX2ludGVybmFsT2JzZXJ2ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2lmKG4uX2lzT2JzZXJ2YWJsZSh0KSl7dmFyIHI9ZnVuY3Rpb24odCl7bi5fb25DaGFuZ2VzKGUsdCl9O2lmKHQuY29uc3RydWN0b3I9PT1PYmplY3Qpe09iamVjdC5vYnNlcnZlKHQscik7Zm9yKHZhciBvIGluIHQpbi5faXNPYnNlcnZhYmxlKHRbb10pJiZuLl9pbnRlcm5hbE9ic2VydmUoZVsibmV3Il0obyksdFtvXSl9ZWxzZSBpZih0LmNvbnN0cnVjdG9yPT09QXJyYXkpe0FycmF5Lm9ic2VydmUodCxyKTtmb3IodmFyIGkgaW4gdClpZihuLl9pc09ic2VydmFibGUodFtpXSkpe3ZhciBzPWVbIm5ldyJdKG5ldyB1KHRbaV0saSkpO24uX2ludGVybmFsT2JzZXJ2ZShzLHRbaV0pfX19fX0se2tleToiX29uQ2hhbmdlcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2Zvcih2YXIgciBpbiB0KXt2YXIgbz10W3JdLm9iamVjdCxzPXZvaWQgMDtpZihvLmNvbnN0cnVjdG9yPT09T2JqZWN0JiYocz1sLk9CSkVDVCksby5jb25zdHJ1Y3Rvcj09PUFycmF5JiYocz1sLkFSUkFZKSwic3BsaWNlIj09PXRbcl0udHlwZSkhZnVuY3Rpb24oKXt2YXIgYT10W3JdLmluZGV4LGw9ZVsibmV3Il0oIiIrYSksZj1sLnRvU3RyaW5nKCksZD10W3JdLnJlbW92ZWQubGVuZ3RoO2lmKDAhPT1kKXt2YXIgcD10W3JdLnJlbW92ZWQ7cC5mb3JFYWNoKGZ1bmN0aW9uKHQscil7bi5faXNPYnNlcnZhYmxlKHQpJiZlLnJlbW92ZUluZGV4KGErcil9KSxuLl9maXJlRXZlbnQoe2NUeXBlOmMuUkVNT1ZFLG9UeXBlOnMsZmllbGQ6ZixkYXRhOmR9KX12YXIgYj10W3JdLmFkZGVkQ291bnQ7aWYoMCE9PWIpe3ZhciBoPW8uc2xpY2UoYSxhK2IpO2guZm9yRWFjaChmdW5jdGlvbih0LHIpe2lmKG4uX2lzT2JzZXJ2YWJsZSh0KSl7dmFyIG89ZVsibmV3Il0obmV3IHUodCxhK3IpKTtuLl9pbnRlcm5hbE9ic2VydmUobyx0KX19KSxuLl9maXJlRXZlbnQoe2NUeXBlOmMuQURELG9UeXBlOnMsZmllbGQ6ZixkYXRhOigwLGkuZGVlcENsb25lKShoKX0pfWEhPT1vLmxlbmd0aC0xJiZlLnJlSW5kZXhGcm9tKG8pfSgpO2Vsc2V7dmFyIGE9ZVsibmV3Il0odFtyXS5uYW1lKSxmPWEudG9TdHJpbmcoKTtpZigtMSE9PWYuaW5kZXhPZigiU3ltYm9sIikpY29udGludWU7dmFyIGQ9b1t0W3JdLm5hbWVdOyJ1cGRhdGUiPT09dFtyXS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmMuVVBEQVRFLG9UeXBlOnMsZmllbGQ6ZixkYXRhOigwLGkuZGVlcENsb25lKShkKX0pLCJhZGQiPT09dFtyXS50eXBlJiYodGhpcy5faW50ZXJuYWxPYnNlcnZlKGEsZCksdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpjLkFERCxvVHlwZTpzLGZpZWxkOmYsZGF0YTooMCxpLmRlZXBDbG9uZSkoZCl9KSksImRlbGV0ZSI9PT10W3JdLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yy5SRU1PVkUsb1R5cGU6cyxmaWVsZDpmfSl9fX19LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhfX1dKSxlfSgpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpLHRoaXMuX3BhdGg9W10sdGhpcy5fb2JzZXJ2YWJsZXM9e319cmV0dXJuIG8oZSxbe2tleToicmVtb3ZlSW5kZXgiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9vYnNlcnZhYmxlc1tlXX19LHtrZXk6InJlSW5kZXhGcm9tIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO09iamVjdC5rZXlzKHRoaXMuX29ic2VydmFibGVzKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3ZhciByPXQuX29ic2VydmFibGVzW25dLG89ZS5pbmRleE9mKHIub2JqKTtyLmlkeCE9byYmKHIuaWR4PW8sZGVsZXRlIHQuX29ic2VydmFibGVzW25dLHQuX29ic2VydmFibGVzW29dPXIpfSl9fSx7a2V5OiJuZXciLHZhbHVlOmZ1bmN0aW9uKGUpe2UuY29uc3RydWN0b3I9PXUmJih0aGlzLl9vYnNlcnZhYmxlc1tlLmlkeF09ZSk7dmFyIHQ9dGhpcy5jbG9uZSgpO3JldHVybiB0Ll9wYXRoLnB1c2goZSksdH19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBlO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fcGF0aC5wdXNoKGUpfSksdH19LHtrZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSIiO3JldHVybiB0aGlzLl9wYXRoLmZvckVhY2goZnVuY3Rpb24odCxuKXswPT09bj9lPXQudG9TdHJpbmcoKTplKz0iLiIrdC50b1N0cmluZygpfSksZX19XSksZX0oKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4pe3IodGhpcyxlKSx0aGlzLm9iaj10LHRoaXMuaWR4PW59cmV0dXJuIG8oZSxbe2tleToidG9TdHJpbmciLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWR4LnRvU3RyaW5nKCl9fV0pLGV9KCksYz1uLkNoYW5nZVR5cGU9e1VQREFURToidXBkYXRlIixBREQ6ImFkZCIsUkVNT1ZFOiJyZW1vdmUifSxsPW4uT2JqZWN0VHlwZT17T0JKRUNUOiJvYmplY3QiLEFSUkFZOiJhcnJheSJ9O25bImRlZmF1bHQiXT1zfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMn1dLDExOltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLHImJmUodCxyKSx0fX0oKSxzPWUoIi4vRGF0YU9iamVjdFJlcG9ydGVyIiksYT1yKHMpLHU9ZSgiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiKSxjPXIodSksbD1lKCIuL0RhdGFQcm92aXNpb25hbCIpLGY9cihsKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4scil7byh0aGlzLGUpO3ZhciBpPXRoaXM7aS5fb3duZXI9dCxpLl9idXM9bixpLl9zdWJVUkw9ci5ydW50aW1lVVJMKyIvc20iLGkuX3JlcG9ydGVycz17fSxpLl9vYnNlcnZlcnM9e30saS5fcHJvdmlzaW9uYWxzPXt9LG4uYWRkTGlzdGVuZXIodCxmdW5jdGlvbihlKXtpZihlLmZyb20hPT10KXN3aXRjaChjb25zb2xlLmxvZygiU3luY2hlci1SQ1Y6ICIsZSksZS50eXBlKXtjYXNlImZvcndhcmQiOmkuX29uRm9yd2FyZChlKTticmVhaztjYXNlImNyZWF0ZSI6aS5fb25SZW1vdGVDcmVhdGUoZSk7YnJlYWs7Y2FzZSJkZWxldGUiOmkuX29uUmVtb3RlRGVsZXRlKGUpfX0pfXJldHVybiBpKGUsW3trZXk6ImNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMsbz17dHlwZToiY3JlYXRlIixmcm9tOnIuX293bmVyLHRvOnIuX3N1YlVSTCxib2R5OntzY2hlbWE6ZSx2YWx1ZTpuLGF1dGhvcmlzZTp0fX07cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQsaSl7ci5fYnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24obyl7aWYoY29uc29sZS5sb2coImNyZWF0ZS1yZXNwb25zZTogIixvKSwyMDA9PT1vLmJvZHkuY29kZSl7dmFyIHM9by5ib2R5LnJlc291cmNlLHU9bmV3IGFbImRlZmF1bHQiXShyLHMsZSwib24iLG4sby5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTtyLl9yZXBvcnRlcnNbc109dSx0KHUpfWVsc2UgaShvLmJvZHkuZGVzYyl9KX0pfX0se2tleToic3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMscj17dHlwZToic3Vic2NyaWJlIixmcm9tOm4uX293bmVyLHRvOm4uX3N1YlVSTCxib2R5OntzY2hlbWE6ZSxyZXNvdXJjZTp0fX07cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG8saSl7bi5fYnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24ocil7Y29uc29sZS5sb2coInN1YnNjcmliZS1yZXNwb25zZTogIixyKTt2YXIgcz1uLl9wcm92aXNpb25hbHNbdF07aWYoZGVsZXRlIG4uX3Byb3Zpc2lvbmFsc1t0XSxzJiZzLl9yZWxlYXNlTGlzdGVuZXJzKCksci5ib2R5LmNvZGU8MjAwKXM9bmV3IGZbImRlZmF1bHQiXShuLl9vd25lcix0LG4uX2J1cyxyLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpLG4uX3Byb3Zpc2lvbmFsc1t0XT1zO2Vsc2UgaWYoMjAwPT09ci5ib2R5LmNvZGUpe3ZhciBhPW5ldyBjWyJkZWZhdWx0Il0obix0LGUsIm9uIixyLmJvZHkudmFsdWUscy5jaGlsZHJlbixyLmJvZHkudmVyc2lvbik7bi5fb2JzZXJ2ZXJzW3RdPWEsbyhhKSxzLmFwcGx5KGEpfWVsc2UgaShyLmJvZHkuZGVzYyl9KX0pfX0se2tleToib25Ob3RpZmljYXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcj1lfX0se2tleToiX29uRm9yd2FyZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXQuX3JlcG9ydGVyc1tlLmJvZHkudG9dO24uX29uRm9yd2FyZChlKX19LHtrZXk6Il9vblJlbW90ZUNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuZnJvbS5zbGljZSgwLC0xMykscj17dHlwZTplLnR5cGUsZnJvbTplLmJvZHkuc291cmNlLHVybDpuLHNjaGVtYTplLmJvZHkuc2NoZW1hLHZhbHVlOmUuYm9keS52YWx1ZSxpZGVudGl0eTplLmJvZHkuaWRUb2tlbixhY2s6ZnVuY3Rpb24obil7dmFyIHI9MjAwO24mJihyPW4pLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOnJ9fSl9fTt0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiTk9USUZJQ0FUSU9OLUVWRU5UOiAiLHIpLAp0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIocikpfX0se2tleToiX29uUmVtb3RlRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ib2R5LnJlc291cmNlLHI9dC5fb2JzZXJ2ZXJzW25dO2lmKHIpe3ZhciBvPXt0eXBlOmUudHlwZSx1cmw6bixpZGVudGl0eTplLmJvZHkuaWRUb2tlbixhY2s6ZnVuY3Rpb24obil7dmFyIG89MjAwO24mJihvPW4pLDIwMD09PW8mJnJbImRlbGV0ZSJdKCksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6byxzb3VyY2U6dC5fb3duZXJ9fSl9fTt0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiTk9USUZJQ0FUSU9OLUVWRU5UOiAiLG8pLHQuX29uTm90aWZpY2F0aW9uSGFuZGxlcihvKSl9ZWxzZSB0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDQsc291cmNlOnQuX293bmVyfX0pfX0se2tleToib3duZXIiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vd25lcn19LHtrZXk6InJlcG9ydGVycyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcG9ydGVyc319LHtrZXk6Im9ic2VydmVycyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29ic2VydmVyc319XSksZX0oKTtuWyJkZWZhdWx0Il09ZCx0LmV4cG9ydHM9blsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdE9ic2VydmVyIjo3LCIuL0RhdGFPYmplY3RSZXBvcnRlciI6OCwiLi9EYXRhUHJvdmlzaW9uYWwiOjl9XSwxMjpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3ZhciB0PS8oW2EtekEtWi1dKik6XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpLG49IiQxLCQyLCQzIixyPWUucmVwbGFjZSh0LG4pLnNwbGl0KCIsIik7clswXT09PWUmJihyWzBdPSJodHRwcyIsclsxXT1lKTt2YXIgbz17dHlwZTpyWzBdLGRvbWFpbjpyWzFdLGlkZW50aXR5OnJbMl19O3JldHVybiBvfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGU/SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSk6dm9pZCAwfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxuLmRpdmlkZVVSTD1yLG4uZGVlcENsb25lPW99LHt9XX0se30sWzRdKSg0KX0pOwp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV19LHt9LFsyXSkoMikKfSk7",
      "sourceCodeClassname": "HypertyChat",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 10004,
    "type": "Hyperties",
    "version": "0.1",
    "description": "Description of HypertyChat",
    "objectName": "HypertyChat",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  }
}